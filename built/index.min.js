var __awaiter=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(i,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};define("poc/fun/tiny",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isGt=t.isLt=t.isEq=t.isInt=void 0;const s=Math.pow(2,-24);t.isInt=function(e){return s>Math.abs(e-Math.round(e))},t.isEq=function(e,t,n=s){return n>Math.abs(e-t)},t.isLt=function(e,t){return s<t-e},t.isGt=function(e,t){return s<e-t}})),define("poc/test/fun/isSamePoint",["require","exports","chai","poc/fun/tiny"],(function(e,t,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSamePoint=void 0,t.isSamePoint=function(e,t,i){console.log(e),e.forEach((e,o)=>s.assert.isTrue(n.isEq(e,t[o]),`${o}:${i}`))}})),define("poc/types/XY",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})),define("poc/MomentCalculator",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MomentCalculator=void 0;t.MomentCalculator=class{sum(...e){const t=[0,0,0];return e.forEach(e=>e.forEach((e,s)=>t[s]+=e)),t}mass(...e){return e.reduce((e,t)=>e+t[2],0)}center(...e){const[t,s,n]=this.sum(...e);return[t/n,s/n]}}})),define("poc/test/moment-test",["require","exports","mocha","chai","poc/test/fun/isSamePoint","poc/MomentCalculator"],(function(e,t,s,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.describe("moment tests",()=>{s.it("moment of two points test",()=>{const e=new o.MomentCalculator,t=[10,10,10],s=[20,20,10],r=e.sum(t,s);n.assert.equal(r[0],30),n.assert.equal(r[1],30),n.assert.equal(r[2],20),i.isSamePoint(e.center(t,s),[1.5,1.5],"center"),n.assert.equal(e.mass(t,s),20)})})})),define("node_modules/ol/src/extent/Corner",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}})),define("node_modules/ol/src/extent/Relationship",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}})),define("node_modules/ol/src/util",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=t.getUid=t.abstract=void 0,t.abstract=function(){return function(){throw new Error("Unimplemented abstract method.")}()};let s=0;t.getUid=function(e){return e.ol_uid||(e.ol_uid=String(++s))},t.VERSION="latest"})),define("node_modules/ol/src/AssertionError",["require","exports","node_modules/ol/src/util"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){const t="Assertion failed. See https://openlayers.org/en/"+("latest"===s.VERSION?s.VERSION:"v"+s.VERSION.split("-")[0])+"/doc/errors/#"+e+" for details.";super(t),this.code=e,this.name="AssertionError",this.message=t}}t.default=n})),define("node_modules/ol/src/asserts",["require","exports","node_modules/ol/src/AssertionError"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assert=void 0,t.assert=function(e,t){if(!e)throw new s.default(t)}})),define("node_modules/ol/src/math",["require","exports"],(function(e,t){"use strict";function s(e,t,s,n){const i=s-e,o=n-t;return i*i+o*o}Object.defineProperty(t,"__esModule",{value:!0}),t.lerp=t.modulo=t.toRadians=t.toDegrees=t.solveLinearSystem=t.squaredDistance=t.squaredSegmentDistance=t.log2=t.cosh=t.clamp=void 0,t.clamp=function(e,t,s){return Math.min(Math.max(e,t),s)},t.cosh=function(){let e;return e="cosh"in Math?Math.cosh:function(e){const t=Math.exp(e);return(t+1/t)/2},e}(),t.log2=function(){let e;return e="log2"in Math?Math.log2:function(e){return Math.log(e)*Math.LOG2E},e}(),t.squaredSegmentDistance=function(e,t,n,i,o,r){const a=o-n,l=r-i;if(0!==a||0!==l){const s=((e-n)*a+(t-i)*l)/(a*a+l*l);s>1?(n=o,i=r):s>0&&(n+=a*s,i+=l*s)}return s(e,t,n,i)},t.squaredDistance=s,t.solveLinearSystem=function(e){const t=e.length;for(let s=0;s<t;s++){let n=s,i=Math.abs(e[s][s]);for(let o=s+1;o<t;o++){const t=Math.abs(e[o][s]);t>i&&(i=t,n=o)}if(0===i)return null;const o=e[n];e[n]=e[s],e[s]=o;for(let n=s+1;n<t;n++){const i=-e[n][s]/e[s][s];for(let o=s;o<t+1;o++)s==o?e[n][o]=0:e[n][o]+=i*e[s][o]}}const s=new Array(t);for(let n=t-1;n>=0;n--){s[n]=e[n][t]/e[n][n];for(let i=n-1;i>=0;i--)e[i][t]-=e[i][n]*s[n]}return s},t.toDegrees=function(e){return 180*e/Math.PI},t.toRadians=function(e){return e*Math.PI/180},t.modulo=function(e,t){const s=e%t;return s*t<0?s+t:s},t.lerp=function(e,t,s){return e+s*(t-e)}})),define("node_modules/ol/src/string",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareVersions=t.padNumber=void 0,t.padNumber=function(e,t,s){const n=void 0!==s?e.toFixed(s):""+e;let i=n.indexOf(".");return i=-1===i?n.length:i,i>t?n:new Array(1+t-i).join("0")+n},t.compareVersions=function(e,t){const s=(""+e).split("."),n=(""+t).split(".");for(let e=0;e<Math.max(s.length,n.length);e++){const t=parseInt(s[e]||"0",10),i=parseInt(n[e]||"0",10);if(t>i)return 1;if(i>t)return-1}return 0}})),define("node_modules/ol/src/geom/GeometryType",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"}})),define("node_modules/ol/src/events/Event",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.preventDefault=t.stopPropagation=void 0;t.stopPropagation=function(e){e.stopPropagation()},t.preventDefault=function(e){e.preventDefault()},t.default=class{constructor(e){this.propagationStopped,this.type=e,this.target=null}preventDefault(){this.propagationStopped=!0}stopPropagation(){this.propagationStopped=!0}}})),define("node_modules/ol/src/ObjectEventType",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={PROPERTYCHANGE:"propertychange"}})),define("node_modules/ol/src/Disposable",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}})),define("node_modules/ol/src/array",["require","exports"],(function(e,t){"use strict";function s(e,t){return e>t?1:e<t?-1:0}Object.defineProperty(t,"__esModule",{value:!0}),t.isSorted=t.findIndex=t.stableSort=t.equals=t.find=t.remove=t.extend=t.reverseSubArray=t.linearFindNearest=t.includes=t.numberSafeCompareFunction=t.binarySearch=void 0,t.binarySearch=function(e,t,n){let i,o;const r=n||s;let a=0,l=e.length,d=!1;for(;a<l;)i=a+(l-a>>1),o=+r(e[i],t),o<0?a=i+1:(l=i,d=!o);return d?a:~a},t.numberSafeCompareFunction=s,t.includes=function(e,t){return e.indexOf(t)>=0},t.linearFindNearest=function(e,t,s){const n=e.length;if(e[0]<=t)return 0;if(t<=e[n-1])return n-1;{let i;if(s>0){for(i=1;i<n;++i)if(e[i]<t)return i-1}else if(s<0){for(i=1;i<n;++i)if(e[i]<=t)return i}else for(i=1;i<n;++i){if(e[i]==t)return i;if(e[i]<t)return e[i-1]-t<t-e[i]?i-1:i}return n-1}},t.reverseSubArray=function(e,t,s){for(;t<s;){const n=e[t];e[t]=e[s],e[s]=n,++t,--s}},t.extend=function(e,t){const s=Array.isArray(t)?t:[t],n=s.length;for(let t=0;t<n;t++)e[e.length]=s[t]},t.remove=function(e,t){const s=e.indexOf(t),n=s>-1;return n&&e.splice(s,1),n},t.find=function(e,t){const s=e.length>>>0;let n;for(let i=0;i<s;i++)if(n=e[i],t(n,i,e))return n;return null},t.equals=function(e,t){const s=e.length;if(s!==t.length)return!1;for(let n=0;n<s;n++)if(e[n]!==t[n])return!1;return!0},t.stableSort=function(e,t){const s=e.length,n=Array(e.length);let i;for(i=0;i<s;i++)n[i]={index:i,value:e[i]};for(n.sort((function(e,s){return t(e.value,s.value)||e.index-s.index})),i=0;i<e.length;i++)e[i]=n[i].value},t.findIndex=function(e,t){let s;return!e.every((function(n,i){return s=i,!t(n,i,e)}))?s:-1},t.isSorted=function(e,t,n){const i=t||s;return e.every((function(t,s){if(0===s)return!0;const o=i(e[s-1],t);return!(o>0||n&&0===o)}))}})),define("node_modules/ol/src/functions",["require","exports","node_modules/ol/src/array"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.memoizeOne=t.VOID=t.FALSE=t.TRUE=void 0,t.TRUE=function(){return!0},t.FALSE=function(){return!1},t.VOID=function(){},t.memoizeOne=function(e){let t,n,i,o=!1;return function(){const r=Array.prototype.slice.call(arguments);return o&&this===i&&s.equals(r,n)||(o=!0,i=this,n=r,t=e.apply(this,arguments)),t}}})),define("node_modules/ol/src/obj",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmpty=t.getValues=t.clear=t.assign=void 0,t.assign="function"==typeof Object.assign?Object.assign:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");const s=Object(e);for(let e=1,t=arguments.length;e<t;++e){const t=arguments[e];if(null!=t)for(const e in t)t.hasOwnProperty(e)&&(s[e]=t[e])}return s},t.clear=function(e){for(const t in e)delete e[t]},t.getValues="function"==typeof Object.values?Object.values:function(e){const t=[];for(const s in e)t.push(e[s]);return t},t.isEmpty=function(e){let t;for(t in e)return!1;return!t}})),define("node_modules/ol/src/events",["require","exports","node_modules/ol/src/obj"],(function(e,t,s){"use strict";function n(e,t,s,n,i){if(n&&n!==e&&(s=s.bind(n)),i){const n=s;s=function(){e.removeEventListener(t,s),n.apply(this,arguments)}}const o={target:e,type:t,listener:s};return e.addEventListener(t,s),o}Object.defineProperty(t,"__esModule",{value:!0}),t.unlistenByKey=t.listenOnce=t.listen=void 0,t.listen=n,t.listenOnce=function(e,t,s,i){return n(e,t,s,i,!0)},t.unlistenByKey=function(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),s.clear(e))}})),define("node_modules/ol/src/events/Target",["require","exports","node_modules/ol/src/Disposable","node_modules/ol/src/events/Event","node_modules/ol/src/functions","node_modules/ol/src/obj"],(function(e,t,s,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends s.default{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const s=this.listeners_||(this.listeners_={}),n=s[e]||(s[e]=[]);-1===n.indexOf(t)&&n.push(t)}dispatchEvent(e){const t="string"==typeof e?new n.default(e):e,s=t.type;t.target||(t.target=this.eventTarget_||this);const o=this.listeners_&&this.listeners_[s];let r;if(o){const e=this.dispatching_||(this.dispatching_={}),n=this.pendingRemovals_||(this.pendingRemovals_={});s in e||(e[s]=0,n[s]=0),++e[s];for(let e=0,s=o.length;e<s;++e)if(r="handleEvent"in o[e]?o[e].handleEvent(t):o[e].call(this,t),!1===r||t.propagationStopped){r=!1;break}if(--e[s],0===e[s]){let t=n[s];for(delete n[s];t--;)this.removeEventListener(s,i.VOID);delete e[s]}return r}}disposeInternal(){this.listeners_&&o.clear(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(e,t){const s=this.listeners_&&this.listeners_[e];if(s){const n=s.indexOf(t);-1!==n&&(this.pendingRemovals_&&e in this.pendingRemovals_?(s[n]=i.VOID,++this.pendingRemovals_[e]):(s.splice(n,1),0===s.length&&delete this.listeners_[e]))}}}t.default=r})),define("node_modules/ol/src/events/EventType",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}})),define("node_modules/ol/src/Observable",["require","exports","node_modules/ol/src/events/Target","node_modules/ol/src/events/EventType","node_modules/ol/src/events"],(function(e,t,s,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unByKey=void 0;class o extends s.default{constructor(){super(),this.revision_=0}changed(){++this.revision_,this.dispatchEvent(n.default.CHANGE)}getRevision(){return this.revision_}on(e,t){if(Array.isArray(e)){const s=e.length,n=new Array(s);for(let o=0;o<s;++o)n[o]=i.listen(this,e[o],t);return n}return i.listen(this,e,t)}once(e,t){let s;if(Array.isArray(e)){const n=e.length;s=new Array(n);for(let o=0;o<n;++o)s[o]=i.listenOnce(this,e[o],t)}else s=i.listenOnce(this,e,t);return t.ol_key=s,s}un(e,t){const s=t.ol_key;if(s)r(s);else if(Array.isArray(e))for(let s=0,n=e.length;s<n;++s)this.removeEventListener(e[s],t);else this.removeEventListener(e,t)}}function r(e){if(Array.isArray(e))for(let t=0,s=e.length;t<s;++t)i.unlistenByKey(e[t]);else i.unlistenByKey(e)}t.unByKey=r,t.default=o})),define("node_modules/ol/src/Object",["require","exports","node_modules/ol/src/events/Event","node_modules/ol/src/ObjectEventType","node_modules/ol/src/Observable","node_modules/ol/src/obj","node_modules/ol/src/util"],(function(e,t,s,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getChangeEventType=t.ObjectEvent=void 0;class a extends s.default{constructor(e,t,s){super(e),this.key=t,this.oldValue=s}}t.ObjectEvent=a;class l extends i.default{constructor(e){super(),r.getUid(this),this.values_=null,void 0!==e&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&o.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(e,t){let s;s=u(e),this.dispatchEvent(new a(s,e,t)),s=n.default.PROPERTYCHANGE,this.dispatchEvent(new a(s,e,t))}set(e,t,s){const n=this.values_||(this.values_={});if(s)n[e]=t;else{const s=n[e];n[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const s in e)this.set(s,e[s],t)}unset(e,t){if(this.values_&&e in this.values_){const s=this.values_[e];delete this.values_[e],o.isEmpty(this.values_)&&(this.values_=null),t||this.notify(e,s)}}}const d={};function u(e){return d.hasOwnProperty(e)?d[e]:d[e]="change:"+e}t.getChangeEventType=u,t.default=l})),define("node_modules/ol/src/proj/Units",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.METERS_PER_UNIT=void 0;const s={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"};t.METERS_PER_UNIT={},t.METERS_PER_UNIT[s.DEGREES]=2*Math.PI*6370997/360,t.METERS_PER_UNIT[s.FEET]=.3048,t.METERS_PER_UNIT[s.METERS]=1,t.METERS_PER_UNIT[s.USFEET]=1200/3937,t.default=s})),define("node_modules/ol/src/pixel",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nothing=void 0})),define("node_modules/ol/src/transform",["require","exports","node_modules/ol/src/asserts"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toString=t.determinant=t.makeInverse=t.invert=t.composeCssTransform=t.compose=t.translate=t.makeScale=t.scale=t.rotate=t.apply=t.setFromArray=t.set=t.multiply=t.reset=t.create=void 0;const n=new Array(6);function i(){return[1,0,0,1,0,0]}function o(e,t){const s=e[0],n=e[1],i=e[2],o=e[3],r=e[4],a=e[5],l=t[0],d=t[1],u=t[2],c=t[3],h=t[4],f=t[5];return e[0]=s*l+i*d,e[1]=n*l+o*d,e[2]=s*u+i*c,e[3]=n*u+o*c,e[4]=s*h+i*f+r,e[5]=n*h+o*f+a,e}function r(e,t,s,n,i,o,r){return e[0]=t,e[1]=s,e[2]=n,e[3]=i,e[4]=o,e[5]=r,e}function a(e,t,s,n,i,o,r,a){const l=Math.sin(o),d=Math.cos(o);return e[0]=n*d,e[1]=i*l,e[2]=-n*l,e[3]=i*d,e[4]=r*n*d-a*n*l+t,e[5]=r*i*l+a*i*d+s,e}function l(e,t){const n=d(t);s.assert(0!==n,32);const i=t[0],o=t[1],r=t[2],a=t[3],l=t[4],u=t[5];return e[0]=a/n,e[1]=-o/n,e[2]=-r/n,e[3]=i/n,e[4]=(r*u-a*l)/n,e[5]=-(i*u-o*l)/n,e}function d(e){return e[0]*e[3]-e[1]*e[2]}function u(e){return"matrix("+e.join(", ")+")"}t.create=i,t.reset=function(e){return r(e,1,0,0,1,0,0)},t.multiply=o,t.set=r,t.setFromArray=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},t.apply=function(e,t){const s=t[0],n=t[1];return t[0]=e[0]*s+e[2]*n+e[4],t[1]=e[1]*s+e[3]*n+e[5],t},t.rotate=function(e,t){const s=Math.cos(t),i=Math.sin(t);return o(e,r(n,s,i,-i,s,0,0))},t.scale=function(e,t,s){return o(e,r(n,t,0,0,s,0,0))},t.makeScale=function(e,t,s){return r(e,t,0,0,s,0,0)},t.translate=function(e,t,s){return o(e,r(n,1,0,0,1,t,s))},t.compose=a,t.composeCssTransform=function(e,t,s,n,i,o,r){return u(a([1,0,0,1,0,0],e,t,s,n,i,o,r))},t.invert=function(e){return l(e,e)},t.makeInverse=l,t.determinant=d,t.toString=u})),define("node_modules/ol/src/tilecoord",["require","exports"],(function(e,t){"use strict";function s(e,t,s){return e+"/"+t+"/"+s}Object.defineProperty(t,"__esModule",{value:!0}),t.withinExtentAndZ=t.hash=t.fromKey=t.getKey=t.getKeyZXY=t.createOrUpdate=void 0,t.createOrUpdate=function(e,t,s,n){return void 0!==n?(n[0]=e,n[1]=t,n[2]=s,n):[e,t,s]},t.getKeyZXY=s,t.getKey=function(e){return s(e[0],e[1],e[2])},t.fromKey=function(e){return e.split("/").map(Number)},t.hash=function(e){return(e[1]<<e[0])+e[2]},t.withinExtentAndZ=function(e,t){const s=e[0],n=e[1],i=e[2];if(t.getMinZoom()>s||s>t.getMaxZoom())return!1;const o=t.getExtent();let r;return r=o?t.getTileRangeForExtentAndZ(o,s):t.getFullTileRange(s),!r||r.containsXY(n,i)}})),define("node_modules/ol/src/size",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toSize=t.scale=t.hasArea=t.buffer=void 0,t.buffer=function(e,t,s){return void 0===s&&(s=[0,0]),s[0]=e[0]+2*t,s[1]=e[1]+2*t,s},t.hasArea=function(e){return e[0]>0&&e[1]>0},t.scale=function(e,t,s){return void 0===s&&(s=[0,0]),s[0]=e[0]*t+.5|0,s[1]=e[1]*t+.5|0,s},t.toSize=function(e,t){return Array.isArray(e)?e:(void 0===t?t=[e,e]:(t[0]=e,t[1]=e),t)}})),define("node_modules/ol/src/TileRange",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createOrUpdate=void 0;class s{constructor(e,t,s,n){this.minX=e,this.maxX=t,this.minY=s,this.maxY=n}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}t.createOrUpdate=function(e,t,n,i,o){return void 0!==o?(o.minX=e,o.maxX=t,o.minY=n,o.maxY=i,o):new s(e,t,n,i)},t.default=s})),define("node_modules/ol/src/tilegrid/common",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_TILE_SIZE=t.DEFAULT_MAX_ZOOM=void 0,t.DEFAULT_MAX_ZOOM=42,t.DEFAULT_TILE_SIZE=256})),define("node_modules/ol/src/tilegrid/TileGrid",["require","exports","node_modules/ol/src/TileRange","node_modules/ol/src/tilegrid/common","node_modules/ol/src/asserts","node_modules/ol/src/math","node_modules/ol/src/extent","node_modules/ol/src/tilecoord","node_modules/ol/src/array","node_modules/ol/src/size"],(function(e,t,s,n,i,o,r,a,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const u=[0,0,0];t.default=class{constructor(e){let t;if(this.minZoom=void 0!==e.minZoom?e.minZoom:0,this.resolutions_=e.resolutions,i.assert(l.isSorted(this.resolutions_,(function(e,t){return t-e}),!0),17),!e.origins)for(let e=0,s=this.resolutions_.length-1;e<s;++e)if(t){if(this.resolutions_[e]/this.resolutions_[e+1]!==t){t=void 0;break}}else t=this.resolutions_[e]/this.resolutions_[e+1];this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==e.origin?e.origin:null,this.origins_=null,void 0!==e.origins&&(this.origins_=e.origins,i.assert(this.origins_.length==this.resolutions_.length,20));const o=e.extent;void 0===o||this.origin_||this.origins_||(this.origin_=r.getTopLeft(o)),i.assert(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==e.tileSizes&&(this.tileSizes_=e.tileSizes,i.assert(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==e.tileSize?e.tileSize:this.tileSizes_?null:n.DEFAULT_TILE_SIZE,i.assert(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==o?o:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==e.sizes?this.fullTileRanges_=e.sizes.map((function(e,t){return new s.default(Math.min(0,e[0]),Math.max(e[0]-1,-1),Math.min(0,e[1]),Math.max(e[1]-1,-1))}),this):o&&this.calculateTileRanges_(o)}forEachTileCoord(e,t,s){const n=this.getTileRangeForExtentAndZ(e,t);for(let e=n.minX,i=n.maxX;e<=i;++e)for(let i=n.minY,o=n.maxY;i<=o;++i)s([t,e,i])}forEachTileCoordParentTileRange(e,t,n,i){let o,r,a,l=null,d=e[0]-1;for(2===this.zoomFactor_?(r=e[1],a=e[2]):l=this.getTileCoordExtent(e,i);d>=this.minZoom;){if(2===this.zoomFactor_?(r=Math.floor(r/2),a=Math.floor(a/2),o=s.createOrUpdate(r,r,a,a,n)):o=this.getTileRangeForExtentAndZ(l,d,n),t(d,o))return!0;--d}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,n){if(e[0]<this.maxZoom){if(2===this.zoomFactor_){const n=2*e[1],i=2*e[2];return s.createOrUpdate(n,n+1,i,i+1,t)}const i=this.getTileCoordExtent(e,n);return this.getTileRangeForExtentAndZ(i,e[0]+1,t)}return null}getTileRangeExtent(e,t,s){const n=this.getOrigin(e),i=this.getResolution(e),o=d.toSize(this.getTileSize(e),this.tmpSize_),a=n[0]+t.minX*o[0]*i,l=n[0]+(t.maxX+1)*o[0]*i,u=n[1]+t.minY*o[1]*i,c=n[1]+(t.maxY+1)*o[1]*i;return r.createOrUpdate(a,u,l,c,s)}getTileRangeForExtentAndZ(e,t,n){const i=u;this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,i);const o=i[1],r=i[2];return this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,i),s.createOrUpdate(o,i[1],r,i[2],n)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),s=this.getResolution(e[0]),n=d.toSize(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*n[0]*s,t[1]-(e[2]+.5)*n[1]*s]}getTileCoordExtent(e,t){const s=this.getOrigin(e[0]),n=this.getResolution(e[0]),i=d.toSize(this.getTileSize(e[0]),this.tmpSize_),o=s[0]+e[1]*i[0]*n,a=s[1]-(e[2]+1)*i[1]*n,l=o+i[0]*n,u=a+i[1]*n;return r.createOrUpdate(o,a,l,u,t)}getTileCoordForCoordAndResolution(e,t,s){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,s)}getTileCoordForXYAndResolution_(e,t,s,n,i){const o=this.getZForResolution(s),r=s/this.getResolution(o),l=this.getOrigin(o),u=d.toSize(this.getTileSize(o),this.tmpSize_),c=n?.5:0,h=n?.5:0,f=Math.floor((e-l[0])/s+c),_=Math.floor((l[1]-t)/s+h);let g=r*f/u[0],m=r*_/u[1];return n?(g=Math.ceil(g)-1,m=Math.ceil(m)-1):(g=Math.floor(g),m=Math.floor(m)),a.createOrUpdate(o,g,m,i)}getTileCoordForXYAndZ_(e,t,s,n,i){const o=this.getOrigin(s),r=this.getResolution(s),l=d.toSize(this.getTileSize(s),this.tmpSize_),u=n?.5:0,c=n?.5:0,h=Math.floor((e-o[0])/r+u),f=Math.floor((o[1]-t)/r+c);let _=h/l[0],g=f/l[1];return n?(_=Math.ceil(_)-1,g=Math.ceil(g)-1):(_=Math.floor(_),g=Math.floor(g)),a.createOrUpdate(s,_,g,i)}getTileCoordForCoordAndZ(e,t,s){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,s)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:null}getZForResolution(e,t){const s=l.linearFindNearest(this.resolutions_,e,t||0);return o.clamp(s,this.minZoom,this.maxZoom)}calculateTileRanges_(e){const t=this.resolutions_.length,s=new Array(t);for(let n=this.minZoom;n<t;++n)s[n]=this.getTileRangeForExtentAndZ(e,n);this.fullTileRanges_=s}}})),define("node_modules/ol/src/proj/Projection",["require","exports","node_modules/ol/src/proj/Units"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=void 0!==e.extent?e.extent:null,this.worldExtent_=void 0!==e.worldExtent?e.worldExtent:null,this.axisOrientation_=void 0!==e.axisOrientation?e.axisOrientation:"enu",this.global_=void 0!==e.global&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||s.METERS_PER_UNIT[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!(!e||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!(!this.global_||!e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}})),define("node_modules/ol/src/proj/epsg3857",["require","exports","node_modules/ol/src/proj/Projection","node_modules/ol/src/proj/Units","node_modules/ol/src/math"],(function(e,t,s,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toEPSG4326=t.fromEPSG4326=t.PROJECTIONS=t.WORLD_EXTENT=t.EXTENT=t.HALF_SIZE=t.RADIUS=void 0,t.RADIUS=6378137,t.HALF_SIZE=Math.PI*t.RADIUS,t.EXTENT=[-t.HALF_SIZE,-t.HALF_SIZE,t.HALF_SIZE,t.HALF_SIZE],t.WORLD_EXTENT=[-180,-85,180,85];class o extends s.default{constructor(e){super({code:e,units:n.default.METERS,extent:t.EXTENT,global:!0,worldExtent:t.WORLD_EXTENT,getPointResolution:function(e,s){return e/i.cosh(s[1]/t.RADIUS)}})}}t.PROJECTIONS=[new o("EPSG:3857"),new o("EPSG:102100"),new o("EPSG:102113"),new o("EPSG:900913"),new o("urn:ogc:def:crs:EPSG:6.18:3:3857"),new o("urn:ogc:def:crs:EPSG::3857"),new o("http://www.opengis.net/gml/srs/epsg.xml#3857")],t.fromEPSG4326=function(e,s,n){const i=e.length,o=n>1?n:2;let r=s;void 0===r&&(r=o>2?e.slice():new Array(i));const a=t.HALF_SIZE;for(let s=0;s<i;s+=o){r[s]=a*e[s]/180;let n=t.RADIUS*Math.log(Math.tan(Math.PI*(+e[s+1]+90)/360));n>a?n=a:n<-a&&(n=-a),r[s+1]=n}return r},t.toEPSG4326=function(e,s,n){const i=e.length,o=n>1?n:2;let r=s;void 0===r&&(r=o>2?e.slice():new Array(i));for(let s=0;s<i;s+=o)r[s]=180*e[s]/t.HALF_SIZE,r[s+1]=360*Math.atan(Math.exp(e[s+1]/t.RADIUS))/Math.PI-90;return r}})),define("node_modules/ol/src/proj/epsg4326",["require","exports","node_modules/ol/src/proj/Projection","node_modules/ol/src/proj/Units"],(function(e,t,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PROJECTIONS=t.METERS_PER_UNIT=t.EXTENT=t.RADIUS=void 0,t.RADIUS=6378137,t.EXTENT=[-180,-90,180,90],t.METERS_PER_UNIT=Math.PI*t.RADIUS/180;class i extends s.default{constructor(e,s){super({code:e,units:n.default.DEGREES,extent:t.EXTENT,axisOrientation:s,global:!0,metersPerUnit:t.METERS_PER_UNIT,worldExtent:t.EXTENT})}}t.PROJECTIONS=[new i("CRS:84"),new i("EPSG:4326","neu"),new i("urn:ogc:def:crs:EPSG::4326","neu"),new i("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new i("urn:ogc:def:crs:OGC:1.3:CRS84"),new i("urn:ogc:def:crs:OGC:2:84"),new i("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new i("urn:x-ogc:def:crs:EPSG:4326","neu")]})),define("node_modules/ol/src/proj/projections",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.add=t.get=t.clear=void 0;let s={};t.clear=function(){s={}},t.get=function(e){return s[e]||null},t.add=function(e,t){s[e]=t}})),define("node_modules/ol/src/proj/transforms",["require","exports","node_modules/ol/src/obj"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=t.remove=t.add=t.clear=void 0;let n={};t.clear=function(){n={}},t.add=function(e,t,s){const i=e.getCode(),o=t.getCode();i in n||(n[i]={}),n[i][o]=s},t.remove=function(e,t){const i=e.getCode(),o=t.getCode(),r=n[i][o];return delete n[i][o],s.isEmpty(n[i])&&delete n[i],r},t.get=function(e,t){let s;return e in n&&t in n[e]&&(s=n[e][t]),s}})),define("node_modules/ol/src/geom/GeometryCollection",["require","exports","node_modules/ol/src/events/EventType","node_modules/ol/src/geom/Geometry","node_modules/ol/src/geom/GeometryType","node_modules/ol/src/extent","node_modules/ol/src/events"],(function(e,t,s,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class a extends n.default{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(r.unlistenByKey),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push(r.listen(this.geometries_[e],s.default.CHANGE,this.changed,this))}clone(){const e=new a(null);return e.setGeometries(this.geometries_),e}closestPointXY(e,t,s,n){if(n<o.closestSquaredDistanceXY(this.getExtent(),e,t))return n;const i=this.geometries_;for(let o=0,r=i.length;o<r;++o)n=i[o].closestPointXY(e,t,s,n);return n}containsXY(e,t){const s=this.geometries_;for(let n=0,i=s.length;n<i;++n)if(s[n].containsXY(e,t))return!0;return!1}computeExtent(e){o.createOrUpdateEmpty(e);const t=this.geometries_;for(let s=0,n=t.length;s<n;++s)o.extend(e,t[s].getExtent());return e}getGeometries(){return l(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let s=0,n=t.length;s<n;++s)t[s].getType()===this.getType()?e=e.concat(t[s].getGeometriesArrayRecursive()):e.push(t[s]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],s=this.geometries_;let n=!1;for(let i=0,o=s.length;i<o;++i){const o=s[i],r=o.getSimplifiedGeometry(e);t.push(r),r!==o&&(n=!0)}if(n){const e=new a(null);return e.setGeometriesArray(t),e}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return i.default.GEOMETRY_COLLECTION}intersectsExtent(e){const t=this.geometries_;for(let s=0,n=t.length;s<n;++s)if(t[s].intersectsExtent(e))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(e,t){const s=this.geometries_;for(let n=0,i=s.length;n<i;++n)s[n].rotate(e,t);this.changed()}scale(e,t,s){let n=s;n||(n=o.getCenter(this.getExtent()));const i=this.geometries_;for(let s=0,o=i.length;s<o;++s)i[s].scale(e,t,n);this.changed()}setGeometries(e){this.setGeometriesArray(l(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let s=0,n=t.length;s<n;++s)t[s].applyTransform(e);this.changed()}translate(e,t){const s=this.geometries_;for(let n=0,i=s.length;n<i;++n)s[n].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function l(e){const t=[];for(let s=0,n=e.length;s<n;++s)t.push(e[s].clone());return t}t.default=a})),define("node_modules/ol/src/geom/GeometryLayout",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"}})),define("node_modules/ol/src/geom/flat/closest",["require","exports","node_modules/ol/src/math"],(function(e,t,s){"use strict";function n(e,t,n,i,o,r,a){const l=e[t],d=e[t+1],u=e[n]-l,c=e[n+1]-d;let h;if(0===u&&0===c)h=t;else{const f=((o-l)*u+(r-d)*c)/(u*u+c*c);if(f>1)h=n;else{if(f>0){for(let o=0;o<i;++o)a[o]=s.lerp(e[t+o],e[n+o],f);return void(a.length=i)}h=t}}for(let t=0;t<i;++t)a[t]=e[h+t];a.length=i}function i(e,t,n,i,o){let r=e[t],a=e[t+1];for(t+=i;t<n;t+=i){const n=e[t],i=e[t+1],l=s.squaredDistance(r,a,n,i);l>o&&(o=l),r=n,a=i}return o}function o(e,t,s,n,o){for(let r=0,a=s.length;r<a;++r){const a=s[r];o=i(e,t,a,n,o),t=a}return o}function r(e,t,i,o,r,a,l,d,u,c,h){if(t==i)return c;let f,_;if(0===r){if(_=s.squaredDistance(l,d,e[t],e[t+1]),_<c){for(f=0;f<o;++f)u[f]=e[t+f];return u.length=o,_}return c}const g=h||[NaN,NaN];let m=t+o;for(;m<i;)if(n(e,m-o,m,o,l,d,g),_=s.squaredDistance(l,d,g[0],g[1]),_<c){for(c=_,f=0;f<o;++f)u[f]=g[f];u.length=o,m+=o}else m+=o*Math.max((Math.sqrt(_)-Math.sqrt(c))/r|0,1);if(a&&(n(e,i-o,t,o,l,d,g),_=s.squaredDistance(l,d,g[0],g[1]),_<c)){for(c=_,f=0;f<o;++f)u[f]=g[f];u.length=o}return c}function a(e,t,s,n,i,o,a,l,d,u,c){const h=c||[NaN,NaN];for(let c=0,f=s.length;c<f;++c){const f=s[c];u=r(e,t,f,n,i,o,a,l,d,u,h),t=f}return u}Object.defineProperty(t,"__esModule",{value:!0}),t.assignClosestMultiArrayPoint=t.assignClosestArrayPoint=t.assignClosestPoint=t.multiArrayMaxSquaredDelta=t.arrayMaxSquaredDelta=t.maxSquaredDelta=void 0,t.maxSquaredDelta=i,t.arrayMaxSquaredDelta=o,t.multiArrayMaxSquaredDelta=function(e,t,s,n,i){for(let r=0,a=s.length;r<a;++r){const a=s[r];i=o(e,t,a,n,i),t=a[a.length-1]}return i},t.assignClosestPoint=r,t.assignClosestArrayPoint=a,t.assignClosestMultiArrayPoint=function(e,t,s,n,i,o,r,l,d,u,c){const h=c||[NaN,NaN];for(let c=0,f=s.length;c<f;++c){const f=s[c];u=a(e,t,f,n,i,o,r,l,d,u,h),t=f[f.length-1]}return u}})),define("node_modules/ol/src/geom/flat/deflate",["require","exports"],(function(e,t){"use strict";function s(e,t,s,n){for(let i=0,o=s.length;i<o;++i){const o=s[i];for(let s=0;s<n;++s)e[t++]=o[s]}return t}function n(e,t,n,i,o){const r=o||[];let a=0;for(let o=0,l=n.length;o<l;++o){const l=s(e,t,n[o],i);r[a++]=l,t=l}return r.length=a,r}Object.defineProperty(t,"__esModule",{value:!0}),t.deflateMultiCoordinatesArray=t.deflateCoordinatesArray=t.deflateCoordinates=t.deflateCoordinate=void 0,t.deflateCoordinate=function(e,t,s,n){for(let n=0,i=s.length;n<i;++n)e[t++]=s[n];return t},t.deflateCoordinates=s,t.deflateCoordinatesArray=n,t.deflateMultiCoordinatesArray=function(e,t,s,i,o){const r=o||[];let a=0;for(let o=0,l=s.length;o<l;++o){const l=n(e,t,s[o],i,r[a]);r[a++]=l,t=l[l.length-1]}return r.length=a,r}})),define("node_modules/ol/src/geom/flat/simplify",["require","exports","node_modules/ol/src/math"],(function(e,t,s){"use strict";function n(e,t,n,i,o,r,a){const l=(n-t)/i;if(l<3){for(;t<n;t+=i)r[a++]=e[t],r[a++]=e[t+1];return a}const d=new Array(l);d[0]=1,d[l-1]=1;const u=[t,n-i];let c=0;for(;u.length>0;){const n=u.pop(),r=u.pop();let a=0;const l=e[r],h=e[r+1],f=e[n],_=e[n+1];for(let t=r+i;t<n;t+=i){const n=e[t],i=e[t+1],o=s.squaredSegmentDistance(n,i,l,h,f,_);o>a&&(c=t,a=o)}a>o&&(d[(c-t)/i]=1,r+i<c&&u.push(r,c),c+i<n&&u.push(c,n))}for(let s=0;s<l;++s)d[s]&&(r[a++]=e[t+s*i],r[a++]=e[t+s*i+1]);return a}function i(e,t,s,i,o,r,a,l){for(let d=0,u=s.length;d<u;++d){const u=s[d];a=n(e,t,u,i,o,r,a),l.push(a),t=u}return a}function o(e,t,n,i,o,r,a){if(n<=t+i){for(;t<n;t+=i)r[a++]=e[t],r[a++]=e[t+1];return a}let l=e[t],d=e[t+1];r[a++]=l,r[a++]=d;let u=l,c=d;for(t+=i;t<n;t+=i)u=e[t],c=e[t+1],s.squaredDistance(l,d,u,c)>o&&(r[a++]=u,r[a++]=c,l=u,d=c);return u==l&&c==d||(r[a++]=u,r[a++]=c),a}function r(e,t){return t*Math.round(e/t)}function a(e,t,s,n,i,o,a){if(t==s)return a;let l,d,u=r(e[t],i),c=r(e[t+1],i);t+=n,o[a++]=u,o[a++]=c;do{if(l=r(e[t],i),d=r(e[t+1],i),(t+=n)==s)return o[a++]=l,o[a++]=d,a}while(l==u&&d==c);for(;t<s;){const s=r(e[t],i),h=r(e[t+1],i);if(t+=n,s==l&&h==d)continue;const f=l-u,_=d-c,g=s-u,m=h-c;f*m==_*g&&(f<0&&g<f||f==g||f>0&&g>f)&&(_<0&&m<_||_==m||_>0&&m>_)?(l=s,d=h):(o[a++]=l,o[a++]=d,u=l,c=d,l=s,d=h)}return o[a++]=l,o[a++]=d,a}function l(e,t,s,n,i,o,r,l){for(let d=0,u=s.length;d<u;++d){const u=s[d];r=a(e,t,u,n,i,o,r),l.push(r),t=u}return r}Object.defineProperty(t,"__esModule",{value:!0}),t.quantizeMultiArray=t.quantizeArray=t.quantize=t.snap=t.radialDistance=t.douglasPeuckerMultiArray=t.douglasPeuckerArray=t.douglasPeucker=t.simplifyLineString=void 0,t.simplifyLineString=function(e,t,s,i,r,a,l){const d=void 0!==l?l:[];return a||(s=o(e,t,s,i,r,d,0),e=d,t=0,i=2),d.length=n(e,t,s,i,r,d,0),d},t.douglasPeucker=n,t.douglasPeuckerArray=i,t.douglasPeuckerMultiArray=function(e,t,s,n,o,r,a,l){for(let d=0,u=s.length;d<u;++d){const u=s[d],c=[];a=i(e,t,u,n,o,r,a,c),l.push(c),t=u[u.length-1]}return a},t.radialDistance=o,t.snap=r,t.quantize=a,t.quantizeArray=l,t.quantizeMultiArray=function(e,t,s,n,i,o,r,a){for(let d=0,u=s.length;d<u;++d){const u=s[d],c=[];r=l(e,t,u,n,i,o,r,c),a.push(c),t=u[u.length-1]}return r}})),define("node_modules/ol/src/geom/flat/inflate",["require","exports"],(function(e,t){"use strict";function s(e,t,s,n,i){const o=void 0!==i?i:[];let r=0;for(let i=t;i<s;i+=n)o[r++]=e.slice(i,i+n);return o.length=r,o}function n(e,t,n,i,o){const r=void 0!==o?o:[];let a=0;for(let o=0,l=n.length;o<l;++o){const l=n[o];r[a++]=s(e,t,l,i,r[a]),t=l}return r.length=a,r}Object.defineProperty(t,"__esModule",{value:!0}),t.inflateMultiCoordinatesArray=t.inflateCoordinatesArray=t.inflateCoordinates=void 0,t.inflateCoordinates=s,t.inflateCoordinatesArray=n,t.inflateMultiCoordinatesArray=function(e,t,s,i,o){const r=void 0!==o?o:[];let a=0;for(let o=0,l=s.length;o<l;++o){const l=s[o];r[a++]=n(e,t,l,i,r[a]),t=l[l.length-1]}return r.length=a,r}})),define("node_modules/ol/src/geom/flat/area",["require","exports"],(function(e,t){"use strict";function s(e,t,s,n){let i=0,o=e[s-n],r=e[s-n+1];for(;t<s;t+=n){const s=e[t],n=e[t+1];i+=r*s-o*n,o=s,r=n}return i/2}function n(e,t,n,i){let o=0;for(let r=0,a=n.length;r<a;++r){const a=n[r];o+=s(e,t,a,i),t=a}return o}Object.defineProperty(t,"__esModule",{value:!0}),t.linearRingss=t.linearRings=t.linearRing=void 0,t.linearRing=s,t.linearRings=n,t.linearRingss=function(e,t,s,i){let o=0;for(let r=0,a=s.length;r<a;++r){const a=s[r];o+=n(e,t,a,i),t=a[a.length-1]}return o}})),define("node_modules/ol/src/geom/LinearRing",["require","exports","node_modules/ol/src/geom/GeometryLayout","node_modules/ol/src/geom/GeometryType","node_modules/ol/src/geom/SimpleGeometry","node_modules/ol/src/geom/flat/closest","node_modules/ol/src/extent","node_modules/ol/src/geom/flat/deflate","node_modules/ol/src/geom/flat/simplify","node_modules/ol/src/geom/flat/inflate","node_modules/ol/src/geom/flat/area"],(function(e,t,s,n,i,o,r,a,l,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class c extends i.default{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===t||Array.isArray(e[0])?this.setCoordinates(e,t):this.setFlatCoordinates(t,e)}clone(){return new c(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,s,n){return n<r.closestSquaredDistanceXY(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(o.maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),o.assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,s,n))}getArea(){return u.linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return d.inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=l.douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new c(t,s.default.XY)}getType(){return n.default.LINEAR_RING}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=a.deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}t.default=c})),define("node_modules/ol/src/geom/Point",["require","exports","node_modules/ol/src/geom/GeometryType","node_modules/ol/src/geom/SimpleGeometry","node_modules/ol/src/extent","node_modules/ol/src/geom/flat/deflate","node_modules/ol/src/math"],(function(e,t,s,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class a extends n.default{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){return new a(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,s,n){const i=this.flatCoordinates,o=r.squaredDistance(e,t,i[0],i[1]);if(o<n){const e=this.stride;for(let t=0;t<e;++t)s[t]=i[t];return s.length=e,o}return n}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(e){return i.createOrUpdateFromCoordinate(this.flatCoordinates,e)}getType(){return s.default.POINT}intersectsExtent(e){return i.containsXY(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=o.deflateCoordinate(this.flatCoordinates,0,e,this.stride),this.changed()}}t.default=a})),define("node_modules/ol/src/geom/flat/contains",["require","exports","node_modules/ol/src/extent"],(function(e,t,s){"use strict";function n(e,t,s,n,i,o){let r=0,a=e[s-n],l=e[s-n+1];for(;t<s;t+=n){const s=e[t],n=e[t+1];l<=o?n>o&&(s-a)*(o-l)-(i-a)*(n-l)>0&&r++:n<=o&&(s-a)*(o-l)-(i-a)*(n-l)<0&&r--,a=s,l=n}return 0!==r}function i(e,t,s,i,o,r){if(0===s.length)return!1;if(!n(e,t,s[0],i,o,r))return!1;for(let t=1,a=s.length;t<a;++t)if(n(e,s[t-1],s[t],i,o,r))return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.linearRingssContainsXY=t.linearRingsContainsXY=t.linearRingContainsXY=t.linearRingContainsExtent=void 0,t.linearRingContainsExtent=function(e,t,i,o,r){return!s.forEachCorner(r,(function(s){return!n(e,t,i,o,s[0],s[1])}))},t.linearRingContainsXY=n,t.linearRingsContainsXY=i,t.linearRingssContainsXY=function(e,t,s,n,o,r){if(0===s.length)return!1;for(let a=0,l=s.length;a<l;++a){const l=s[a];if(i(e,t,l,n,o,r))return!0;t=l[l.length-1]}return!1}})),define("node_modules/ol/src/geom/flat/interiorpoint",["require","exports","node_modules/ol/src/geom/flat/contains","node_modules/ol/src/array"],(function(e,t,s,n){"use strict";function i(e,t,i,o,r,a,l){let d,u,c,h,f,_,g;const m=r[a+1],p=[];for(let s=0,n=i.length;s<n;++s){const n=i[s];for(h=e[n-o],_=e[n-o+1],d=t;d<n;d+=o)f=e[d],g=e[d+1],(m<=_&&g<=m||_<=m&&m<=g)&&(c=(m-_)/(g-_)*(f-h)+h,p.push(c)),h=f,_=g}let y=NaN,v=-1/0;for(p.sort(n.numberSafeCompareFunction),h=p[0],d=1,u=p.length;d<u;++d){f=p[d];const n=Math.abs(f-h);n>v&&(c=(h+f)/2,s.linearRingsContainsXY(e,t,i,o,c,m)&&(y=c,v=n)),h=f}return isNaN(y)&&(y=r[a]),l?(l.push(y,m,v),l):[y,m,v]}Object.defineProperty(t,"__esModule",{value:!0}),t.getInteriorPointsOfMultiArray=t.getInteriorPointOfArray=void 0,t.getInteriorPointOfArray=i,t.getInteriorPointsOfMultiArray=function(e,t,s,n,o){let r=[];for(let a=0,l=s.length;a<l;++a){const l=s[a];r=i(e,t,l,n,o,2*a,r),t=l[l.length-1]}return r}})),define("node_modules/ol/src/geom/flat/segments",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=void 0,t.forEach=function(e,t,s,n,i){const o=[e[t],e[t+1]],r=[];let a;for(;t+n<s;t+=n){if(r[0]=e[t+n],r[1]=e[t+n+1],a=i(o,r),a)return a;o[0]=r[0],o[1]=r[1]}return!1}})),define("node_modules/ol/src/geom/flat/intersectsextent",["require","exports","node_modules/ol/src/extent","node_modules/ol/src/geom/flat/segments","node_modules/ol/src/geom/flat/contains"],(function(e,t,s,n,i){"use strict";function o(e,t,i,o,r){const a=s.extendFlatCoordinates(s.createEmpty(),e,t,i,o);return!!s.intersects(r,a)&&(!!s.containsExtent(r,a)||(a[0]>=r[0]&&a[2]<=r[2]||(a[1]>=r[1]&&a[3]<=r[3]||n.forEach(e,t,i,o,(function(e,t){return s.intersectsSegment(r,e,t)})))))}function r(e,t,s,n,r){return!!o(e,t,s,n,r)||(!!i.linearRingContainsXY(e,t,s,n,r[0],r[1])||(!!i.linearRingContainsXY(e,t,s,n,r[0],r[3])||(!!i.linearRingContainsXY(e,t,s,n,r[2],r[1])||!!i.linearRingContainsXY(e,t,s,n,r[2],r[3]))))}function a(e,t,s,n,a){if(!r(e,t,s[0],n,a))return!1;if(1===s.length)return!0;for(let t=1,r=s.length;t<r;++t)if(i.linearRingContainsExtent(e,s[t-1],s[t],n,a)&&!o(e,s[t-1],s[t],n,a))return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.intersectsLinearRingMultiArray=t.intersectsLinearRingArray=t.intersectsLinearRing=t.intersectsLineStringArray=t.intersectsLineString=void 0,t.intersectsLineString=o,t.intersectsLineStringArray=function(e,t,s,n,i){for(let r=0,a=s.length;r<a;++r){if(o(e,t,s[r],n,i))return!0;t=s[r]}return!1},t.intersectsLinearRing=r,t.intersectsLinearRingArray=a,t.intersectsLinearRingMultiArray=function(e,t,s,n,i){for(let o=0,r=s.length;o<r;++o){const r=s[o];if(a(e,t,r,n,i))return!0;t=r[r.length-1]}return!1}})),define("node_modules/ol/src/geom/flat/reverse",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.coordinates=void 0,t.coordinates=function(e,t,s,n){for(;t<s-n;){for(let i=0;i<n;++i){const o=e[t+i];e[t+i]=e[s-n+i],e[s-n+i]=o}t+=n,s-=n}}})),define("node_modules/ol/src/geom/flat/orient",["require","exports","node_modules/ol/src/geom/flat/reverse"],(function(e,t,s){"use strict";function n(e,t,s,n){let i=!0;for(let o=0;o<n;++o)if(e[t+o]!==e[s-n+o]){i=!1;break}i&&(s-=n);const o=function(e,t,s,n){let i=-1,o=1/0,r=1/0;for(let a=t;a<s;a+=n){const t=e[a],s=e[a+1];s>o||(s==o&&t>=r||(i=a,o=s,r=t))}return i}(e,t,s,n);let r=o-n;r<t&&(r=s-n);let a=o+n;a>=s&&(a=t);const l=e[r],d=e[r+1],u=e[o],c=e[o+1],h=e[a],f=e[a+1];return u*f+l*c+d*h-(d*u+c*h+l*f)<0}function i(e,t,s,i,o){const r=void 0!==o&&o;for(let o=0,a=s.length;o<a;++o){const a=s[o],l=n(e,t,a,i);if(0===o){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;t=a}return!0}function o(e,t,i,o,r){const a=void 0!==r&&r;for(let r=0,l=i.length;r<l;++r){const l=i[r],d=n(e,t,l,o);(0===r?a&&d||!a&&!d:a&&!d||!a&&d)&&s.coordinates(e,t,l,o),t=l}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.orientLinearRingsArray=t.orientLinearRings=t.linearRingssAreOriented=t.linearRingsAreOriented=t.linearRingIsClockwise=void 0,t.linearRingIsClockwise=n,t.linearRingsAreOriented=i,t.linearRingssAreOriented=function(e,t,s,n,o){for(let r=0,a=s.length;r<a;++r){const a=s[r];if(!i(e,t,a,n,o))return!1;a.length&&(t=a[a.length-1])}return!0},t.orientLinearRings=o,t.orientLinearRingsArray=function(e,t,s,n,i){for(let r=0,a=s.length;r<a;++r)t=o(e,t,s[r],n,i);return t}})),define("node_modules/ol/src/geom/Polygon",["require","exports","node_modules/ol/src/geom/GeometryLayout","node_modules/ol/src/geom/GeometryType","node_modules/ol/src/geom/LinearRing","node_modules/ol/src/geom/Point","node_modules/ol/src/geom/SimpleGeometry","node_modules/ol/src/geom/flat/closest","node_modules/ol/src/extent","node_modules/ol/src/geom/flat/deflate","node_modules/ol/src/array","node_modules/ol/src/geom/flat/interiorpoint","node_modules/ol/src/geom/flat/inflate","node_modules/ol/src/geom/flat/intersectsextent","node_modules/ol/src/geom/flat/orient","node_modules/ol/src/geom/flat/area","node_modules/ol/src/geom/flat/contains","node_modules/ol/src/math","node_modules/ol/src/geom/flat/simplify","node_modules/ol/src/sphere"],(function(e,t,s,n,i,o,r,a,l,d,u,c,h,f,_,g,m,p,y,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeRegular=t.fromCircle=t.fromExtent=t.circular=void 0;class x extends r.default{constructor(e,t,s){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==t&&s?(this.setFlatCoordinates(t,e),this.ends_=s):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?u.extend(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){return new x(this.flatCoordinates.slice(),this.layout,this.ends_.slice())}closestPointXY(e,t,s,n){return n<l.closestSquaredDistanceXY(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(a.arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),a.assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,s,n))}containsXY(e,t){return m.linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return g.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),_.orientLinearRings(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,h.inflateCoordinatesArray(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=l.getCenter(this.getExtent());this.flatInteriorPoint_=c.getInteriorPointOfArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new o.default(this.getFlatInteriorPoint(),s.default.XYM)}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new i.default(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,s=this.ends_,n=[];let o=0;for(let r=0,a=s.length;r<a;++r){const a=s[r],l=new i.default(t.slice(o,a),e);n.push(l),o=a}return n}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;_.linearRingsAreOriented(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=_.orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=y.quantizeArray(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,n),new x(t,s.default.XY,n)}getType(){return n.default.POLYGON}intersectsExtent(e){return f.intersectsLinearRingArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const s=d.deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===s.length?0:s[s.length-1],this.changed()}}function E(e,t,s,n){const i=e.getFlatCoordinates(),o=e.getStride(),r=i.length/o-1,a=n||0;for(let e=0;e<=r;++e){const n=e*o,l=a+2*p.modulo(e,r)*Math.PI/r;i[n]=t[0]+s*Math.cos(l),i[n+1]=t[1]+s*Math.sin(l)}e.changed()}t.default=x,t.circular=function(e,t,n,i){const o=n||32,r=[];for(let s=0;s<o;++s)u.extend(r,v.offset(e,t,2*Math.PI*s/o,i));return r.push(r[0],r[1]),new x(r,s.default.XY,[r.length])},t.fromExtent=function(e){const t=e[0],n=e[1],i=e[2],o=e[3],r=[t,n,t,o,i,o,i,n,t,n];return new x(r,s.default.XY,[r.length])},t.fromCircle=function(e,t,s){const n=t||32,i=e.getStride(),o=e.getLayout(),r=e.getCenter(),a=i*(n+1),l=new Array(a);for(let e=0;e<a;e+=i){l[e]=0,l[e+1]=0;for(let t=2;t<i;t++)l[e+t]=r[t]}const d=[l.length],u=new x(l,o,d);return E(u,r,e.getRadius(),s),u},t.makeRegular=E})),define("node_modules/ol/src/sphere",["require","exports","node_modules/ol/src/geom/GeometryType","node_modules/ol/src/math"],(function(e,t,s,n){"use strict";function i(e,s,i){const o=i||t.DEFAULT_RADIUS,r=n.toRadians(e[1]),a=n.toRadians(s[1]),l=(a-r)/2,d=n.toRadians(s[0]-e[0])/2,u=Math.sin(l)*Math.sin(l)+Math.sin(d)*Math.sin(d)*Math.cos(r)*Math.cos(a);return 2*o*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}function o(e,t){let s=0;for(let n=0,o=e.length;n<o-1;++n)s+=i(e[n],e[n+1],t);return s}function r(e,t){let s=0;const i=e.length;let o=e[i-1][0],r=e[i-1][1];for(let t=0;t<i;t++){const i=e[t][0],a=e[t][1];s+=n.toRadians(i-o)*(2+Math.sin(n.toRadians(r))+Math.sin(n.toRadians(a))),o=i,r=a}return s*t*t/2}Object.defineProperty(t,"__esModule",{value:!0}),t.offset=t.getArea=t.getLength=t.getDistance=t.DEFAULT_RADIUS=void 0,t.DEFAULT_RADIUS=6371008.8,t.getDistance=i,t.getLength=function e(n,i){const r=i||{},a=r.radius||t.DEFAULT_RADIUS,l=r.projection||"EPSG:3857",d=n.getType();d!==s.default.GEOMETRY_COLLECTION&&(n=n.clone().transform(l,"EPSG:4326"));let u,c,h,f,_,g,m=0;switch(d){case s.default.POINT:case s.default.MULTI_POINT:break;case s.default.LINE_STRING:case s.default.LINEAR_RING:u=n.getCoordinates(),m=o(u,a);break;case s.default.MULTI_LINE_STRING:case s.default.POLYGON:for(u=n.getCoordinates(),h=0,f=u.length;h<f;++h)m+=o(u[h],a);break;case s.default.MULTI_POLYGON:for(u=n.getCoordinates(),h=0,f=u.length;h<f;++h)for(c=u[h],_=0,g=c.length;_<g;++_)m+=o(c[_],a);break;case s.default.GEOMETRY_COLLECTION:{const t=n.getGeometries();for(h=0,f=t.length;h<f;++h)m+=e(t[h],i);break}default:throw new Error("Unsupported geometry type: "+d)}return m},t.getArea=function e(n,i){const o=i||{},a=o.radius||t.DEFAULT_RADIUS,l=o.projection||"EPSG:3857",d=n.getType();d!==s.default.GEOMETRY_COLLECTION&&(n=n.clone().transform(l,"EPSG:4326"));let u,c,h,f,_,g,m=0;switch(d){case s.default.POINT:case s.default.MULTI_POINT:case s.default.LINE_STRING:case s.default.MULTI_LINE_STRING:case s.default.LINEAR_RING:break;case s.default.POLYGON:for(u=n.getCoordinates(),m=Math.abs(r(u[0],a)),h=1,f=u.length;h<f;++h)m-=Math.abs(r(u[h],a));break;case s.default.MULTI_POLYGON:for(u=n.getCoordinates(),h=0,f=u.length;h<f;++h)for(c=u[h],m+=Math.abs(r(c[0],a)),_=1,g=c.length;_<g;++_)m-=Math.abs(r(c[_],a));break;case s.default.GEOMETRY_COLLECTION:{const t=n.getGeometries();for(h=0,f=t.length;h<f;++h)m+=e(t[h],i);break}default:throw new Error("Unsupported geometry type: "+d)}return m},t.offset=function(e,s,i,o){const r=o||t.DEFAULT_RADIUS,a=n.toRadians(e[1]),l=n.toRadians(e[0]),d=s/r,u=Math.asin(Math.sin(a)*Math.cos(d)+Math.cos(a)*Math.sin(d)*Math.cos(i)),c=l+Math.atan2(Math.sin(i)*Math.sin(d)*Math.cos(a),Math.cos(d)-Math.sin(a)*Math.sin(u));return[n.toDegrees(c),n.toDegrees(u)]}})),define("node_modules/ol/src/proj",["require","exports","node_modules/ol/src/proj/Projection","node_modules/ol/src/proj/Units","node_modules/ol/src/proj/epsg3857","node_modules/ol/src/proj/epsg4326","node_modules/ol/src/proj/projections","node_modules/ol/src/proj/transforms","node_modules/ol/src/extent","node_modules/ol/src/math","node_modules/ol/src/sphere","node_modules/ol/src/coordinate"],(function(e,t,s,n,i,o,r,a,l,d,u,c){"use strict";function h(e,t,s){let n;if(void 0!==t){for(let s=0,n=e.length;s<n;++s)t[s]=e[s];n=t}else n=e.slice();return n}function f(e,t,s){if(void 0!==t&&e!==t){for(let s=0,n=e.length;s<n;++s)t[s]=e[s];e=t}return e}function _(e){r.add(e.getCode(),e),a.add(e,e,h)}function g(e){e.forEach(_)}function m(e){return"string"==typeof e?r.get(e):e||null}function p(e){g(e),e.forEach((function(t){e.forEach((function(e){t!==e&&a.add(t,e,h)}))}))}function y(e,t,s,n){e.forEach((function(e){t.forEach((function(t){a.add(e,t,s),a.add(t,e,n)}))}))}function v(e){return function(t,s,n){const i=t.length,o=void 0!==n?n:2,r=void 0!==s?s:new Array(i);for(let s=0;s<i;s+=o){const n=e([t[s],t[s+1]]);r[s]=n[0],r[s+1]=n[1];for(let e=o-1;e>=2;--e)r[s+e]=t[s+e]}return r}}function x(e,t){const s=e.getCode(),n=t.getCode();let i=a.get(s,n);return i||(i=f),i}function E(e,t){return x(m(e),m(t))}function C(e,t,s){return E(t,s)(e,void 0,e.length)}function T(e,t,s,n){const i=E(t,s);return l.applyTransform(e,i,void 0,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.addCommon=t.createSafeCoordinateTransform=t.fromUserExtent=t.toUserExtent=t.fromUserCoordinate=t.toUserCoordinate=t.useGeographic=t.getUserProjection=t.clearUserProjection=t.setUserProjection=t.transformWithProjections=t.transformExtent=t.transform=t.getTransform=t.getTransformFromProjections=t.equivalent=t.toLonLat=t.fromLonLat=t.addCoordinateTransforms=t.createTransformFromCoordinateTransform=t.createProjection=t.clearAllProjections=t.addEquivalentTransforms=t.addEquivalentProjections=t.getPointResolution=t.get=t.addProjections=t.addProjection=t.identityTransform=t.cloneTransform=t.Projection=t.METERS_PER_UNIT=void 0,t.Projection=s.default,Object.defineProperty(t,"METERS_PER_UNIT",{enumerable:!0,get:function(){return n.METERS_PER_UNIT}}),t.cloneTransform=h,t.identityTransform=f,t.addProjection=_,t.addProjections=g,t.get=m,t.getPointResolution=function(e,t,s,i){let o;const r=(e=m(e)).getPointResolutionFunc();if(r){if(o=r(t,s),i&&i!==e.getUnits()){const t=e.getMetersPerUnit();t&&(o=o*t/n.METERS_PER_UNIT[i])}}else{if(e.getUnits()==n.default.DEGREES&&!i||i==n.default.DEGREES)o=t;else{const r=x(e,m("EPSG:4326"));let a=[s[0]-t/2,s[1],s[0]+t/2,s[1],s[0],s[1]-t/2,s[0],s[1]+t/2];a=r(a,a,2);o=(u.getDistance(a.slice(0,2),a.slice(2,4))+u.getDistance(a.slice(4,6),a.slice(6,8)))/2;const l=i?n.METERS_PER_UNIT[i]:e.getMetersPerUnit();void 0!==l&&(o/=l)}}return o},t.addEquivalentProjections=p,t.addEquivalentTransforms=y,t.clearAllProjections=function(){r.clear(),a.clear()},t.createProjection=function(e,t){return e?"string"==typeof e?m(e):e:m(t)},t.createTransformFromCoordinateTransform=v,t.addCoordinateTransforms=function(e,t,s,n){const i=m(e),o=m(t);a.add(i,o,v(s)),a.add(o,i,v(n))},t.fromLonLat=function(e,t){return C(e,"EPSG:4326",void 0!==t?t:"EPSG:3857")},t.toLonLat=function(e,t){const s=C(e,void 0!==t?t:"EPSG:3857","EPSG:4326"),n=s[0];return(n<-180||n>180)&&(s[0]=d.modulo(n+180,360)-180),s},t.equivalent=function(e,t){if(e===t)return!0;const s=e.getUnits()===t.getUnits();return(e.getCode()===t.getCode()||x(e,t)===h)&&s},t.getTransformFromProjections=x,t.getTransform=E,t.transform=C,t.transformExtent=T,t.transformWithProjections=function(e,t,s){return x(t,s)(e)};let S=null;function M(e){S=m(e)}function P(){p(i.PROJECTIONS),p(o.PROJECTIONS),y(o.PROJECTIONS,i.PROJECTIONS,i.fromEPSG4326,i.toEPSG4326)}t.setUserProjection=M,t.clearUserProjection=function(){S=null},t.getUserProjection=function(){return S},t.useGeographic=function(){M("EPSG:4326")},t.toUserCoordinate=function(e,t){return S?C(e,t,S):e},t.fromUserCoordinate=function(e,t){return S?C(e,S,t):e},t.toUserExtent=function(e,t){return S?T(e,t,S):e},t.fromUserExtent=function(e,t){return S?T(e,S,t):e},t.createSafeCoordinateTransform=function(e,t,s){return function(n){let i,o,r=n[0],a=n[1];if(e.canWrapX()){const t=e.getExtent(),u=l.getWidth(t);o=c.getWorldsAway(n,e,u),o&&(r-=o*u),r=d.clamp(r,t[0],t[2]),a=d.clamp(a,t[1],t[3]),i=s([r,a])}else i=s(n);return o&&t.canWrapX()&&(i[0]+=o*l.getWidth(t.getExtent())),i}},t.addCommon=P,P()})),define("node_modules/ol/src/geom/flat/transform",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.translate=t.scale=t.rotate=t.transform2D=void 0,t.transform2D=function(e,t,s,n,i,o){const r=o||[];let a=0;for(let o=t;o<s;o+=n){const t=e[o],s=e[o+1];r[a++]=i[0]*t+i[2]*s+i[4],r[a++]=i[1]*t+i[3]*s+i[5]}return o&&r.length!=a&&(r.length=a),r},t.rotate=function(e,t,s,n,i,o,r){const a=r||[],l=Math.cos(i),d=Math.sin(i),u=o[0],c=o[1];let h=0;for(let i=t;i<s;i+=n){const t=e[i]-u,s=e[i+1]-c;a[h++]=u+t*l-s*d,a[h++]=c+t*d+s*l;for(let t=i+2;t<i+n;++t)a[h++]=e[t]}return r&&a.length!=h&&(a.length=h),a},t.scale=function(e,t,s,n,i,o,r,a){const l=a||[],d=r[0],u=r[1];let c=0;for(let r=t;r<s;r+=n){const t=e[r]-d,s=e[r+1]-u;l[c++]=d+i*t,l[c++]=u+o*s;for(let t=r+2;t<r+n;++t)l[c++]=e[t]}return a&&l.length!=c&&(l.length=c),l},t.translate=function(e,t,s,n,i,o,r){const a=r||[];let l=0;for(let r=t;r<s;r+=n){a[l++]=e[r]+i,a[l++]=e[r+1]+o;for(let t=r+2;t<r+n;++t)a[l++]=e[t]}return r&&a.length!=l&&(a.length=l),a}})),define("node_modules/ol/src/geom/Geometry",["require","exports","node_modules/ol/src/Object","node_modules/ol/src/proj/Units","node_modules/ol/src/util","node_modules/ol/src/transform","node_modules/ol/src/extent","node_modules/ol/src/proj","node_modules/ol/src/functions","node_modules/ol/src/geom/flat/transform"],(function(e,t,s,n,i,o,r,a,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const u=o.create();class c extends s.default{constructor(){super(),this.extent_=r.createEmpty(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=l.memoizeOne((function(e,t,s){if(!s)return this.getSimplifiedGeometry(t);const n=this.clone();return n.applyTransform(s),n.getSimplifiedGeometry(t)}))}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return i.abstract()}closestPointXY(e,t,s,n){return i.abstract()}containsXY(e,t){const s=this.getClosestPoint([e,t]);return s[0]===e&&s[1]===t}getClosestPoint(e,t){const s=t||[NaN,NaN];return this.closestPointXY(e[0],e[1],s,1/0),s}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return i.abstract()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&r.createOrUpdateEmpty(e),this.extentRevision_=this.getRevision()}return r.returnOrUpdate(this.extent_,e)}rotate(e,t){i.abstract()}scale(e,t,s){i.abstract()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return i.abstract()}getType(){return i.abstract()}applyTransform(e){i.abstract()}intersectsExtent(e){return i.abstract()}translate(e,t){i.abstract()}transform(e,t){const s=a.get(e),i=s.getUnits()==n.default.TILE_PIXELS?function(e,n,i){const l=s.getExtent(),c=s.getWorldExtent(),h=r.getHeight(c)/r.getHeight(l);return o.compose(u,c[0],c[3],h,-h,0,0,0),d.transform2D(e,0,e.length,i,u,n),a.getTransform(s,t)(e,n,i)}:a.getTransform(s,t);return this.applyTransform(i),this}}t.default=c})),define("node_modules/ol/src/geom/SimpleGeometry",["require","exports","node_modules/ol/src/geom/Geometry","node_modules/ol/src/geom/GeometryLayout","node_modules/ol/src/util","node_modules/ol/src/extent","node_modules/ol/src/geom/flat/transform"],(function(e,t,s,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformGeom2D=t.getStrideForLayout=void 0;class a extends s.default{constructor(){super(),this.layout=n.default.XY,this.stride=2,this.flatCoordinates=null}computeExtent(e){return o.createOrUpdateFromFlatCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return i.abstract()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=l(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){i.abstract()}setLayout(e,t,s){let i;if(e)i=l(e);else{for(let e=0;e<s;++e){if(0===t.length)return this.layout=n.default.XY,void(this.stride=2);t=t[0]}i=t.length,e=function(e){let t;2==e?t=n.default.XY:3==e?t=n.default.XYZ:4==e&&(t=n.default.XYZM);return t}(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const s=this.getFlatCoordinates();if(s){const n=this.getStride();r.rotate(s,0,s.length,n,e,t,s),this.changed()}}scale(e,t,s){let n=t;void 0===n&&(n=e);let i=s;i||(i=o.getCenter(this.getExtent()));const a=this.getFlatCoordinates();if(a){const t=this.getStride();r.scale(a,0,a.length,t,e,n,i,a),this.changed()}}translate(e,t){const s=this.getFlatCoordinates();if(s){const n=this.getStride();r.translate(s,0,s.length,n,e,t,s),this.changed()}}}function l(e){let t;return e==n.default.XY?t=2:e==n.default.XYZ||e==n.default.XYM?t=3:e==n.default.XYZM&&(t=4),t}t.getStrideForLayout=l,t.transformGeom2D=function(e,t,s){const n=e.getFlatCoordinates();if(n){const i=e.getStride();return r.transform2D(n,0,n.length,i,t,s)}return null},t.default=a})),define("node_modules/ol/src/geom/Circle",["require","exports","node_modules/ol/src/geom/GeometryType","node_modules/ol/src/geom/SimpleGeometry","node_modules/ol/src/extent","node_modules/ol/src/geom/flat/deflate","node_modules/ol/src/geom/flat/transform"],(function(e,t,s,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class a extends n.default{constructor(e,t,s){if(super(),void 0!==s&&void 0===t)this.setFlatCoordinates(s,e);else{const n=t||0;this.setCenterAndRadius(e,n,s)}}clone(){return new a(this.flatCoordinates.slice(),void 0,this.layout)}closestPointXY(e,t,s,n){const i=this.flatCoordinates,o=e-i[0],r=t-i[1],a=o*o+r*r;if(a<n){if(0===a)for(let e=0;e<this.stride;++e)s[e]=i[e];else{const e=this.getRadius()/Math.sqrt(a);s[0]=i[0]+e*o,s[1]=i[1]+e*r;for(let e=2;e<this.stride;++e)s[e]=i[e]}return s.length=this.stride,a}return n}containsXY(e,t){const s=this.flatCoordinates,n=e-s[0],i=t-s[1];return n*n+i*i<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,s=t[this.stride]-t[0];return i.createOrUpdate(t[0]-s,t[1]-s,t[0]+s,t[1]+s,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return s.default.CIRCLE}intersectsExtent(e){const t=this.getExtent();if(i.intersects(e,t)){const t=this.getCenter();return e[0]<=t[0]&&e[2]>=t[0]||(e[1]<=t[1]&&e[3]>=t[1]||i.forEachCorner(e,this.intersectsCoordinate.bind(this)))}return!1}setCenter(e){const t=this.stride,s=this.flatCoordinates[t]-this.flatCoordinates[0],n=e.slice();n[t]=n[0]+s;for(let s=1;s<t;++s)n[t+s]=e[s];this.setFlatCoordinates(this.layout,n),this.changed()}setCenterAndRadius(e,t,s){this.setLayout(s,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const n=this.flatCoordinates;let i=o.deflateCoordinate(n,0,e,this.stride);n[i++]=n[0]+t;for(let e=1,t=this.stride;e<t;++e)n[i++]=n[e];n.length=i,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const s=this.getCenter(),n=this.getStride();this.setCenter(r.rotate(s,0,s.length,n,e,t,s)),this.changed()}translate(e,t){const s=this.getCenter(),n=this.getStride();this.setCenter(r.translate(s,0,s.length,n,e,t,s)),this.changed()}}a.prototype.transform,t.default=a})),define("node_modules/ol/src/coordinate",["require","exports","node_modules/ol/src/extent","node_modules/ol/src/math","node_modules/ol/src/string"],(function(e,t,s,n,i){"use strict";function o(e,t){const s=e[0],n=e[1],i=t[0],o=t[1],r=i[0],a=i[1],l=o[0],d=o[1],u=l-r,c=d-a,h=0===u&&0===c?0:(u*(s-r)+c*(n-a))/(u*u+c*c||0);let f,_;return h<=0?(f=r,_=a):h>=1?(f=l,_=d):(f=r+h*u,_=a+h*c),[f,_]}function r(e,t,s){const o=n.modulo(t+180,360)-180,r=Math.abs(3600*o),a=s||0,l=Math.pow(10,a);let d=Math.floor(r/3600),u=Math.floor((r-3600*d)/60),c=r-3600*d-60*u;return c=Math.ceil(c*l)/l,c>=60&&(c=0,u+=1),u>=60&&(u=0,d+=1),d+"° "+i.padNumber(u,2)+"′ "+i.padNumber(c,2,a)+"″"+(0==o?"":" "+e.charAt(o<0?1:0))}function a(e,t,s){return e?t.replace("{x}",e[0].toFixed(s)).replace("{y}",e[1].toFixed(s)):""}function l(e,t){const s=e[0]-t[0],n=e[1]-t[1];return s*s+n*n}function d(e,t){return a(e,"{x}, {y}",t)}function u(e,t,n){const i=t.getExtent();let o=0;if(t.canWrapX()&&(e[0]<i[0]||e[0]>i[2])){const t=n||s.getWidth(i);o=Math.floor((e[0]-i[0])/t)}return o}Object.defineProperty(t,"__esModule",{value:!0}),t.getWorldsAway=t.wrapX=t.toStringXY=t.toStringHDMS=t.squaredDistanceToSegment=t.distance=t.squaredDistance=t.scale=t.rotate=t.equals=t.format=t.degreesToStringHDMS=t.createStringXY=t.closestOnSegment=t.closestOnCircle=t.add=void 0,t.add=function(e,t){return e[0]+=+t[0],e[1]+=+t[1],e},t.closestOnCircle=function(e,t){const s=t.getRadius(),n=t.getCenter(),i=n[0],o=n[1];let r=e[0]-i;const a=e[1]-o;0===r&&0===a&&(r=1);const l=Math.sqrt(r*r+a*a);return[i+s*r/l,o+s*a/l]},t.closestOnSegment=o,t.createStringXY=function(e){return function(t){return d(t,e)}},t.degreesToStringHDMS=r,t.format=a,t.equals=function(e,t){let s=!0;for(let n=e.length-1;n>=0;--n)if(e[n]!=t[n]){s=!1;break}return s},t.rotate=function(e,t){const s=Math.cos(t),n=Math.sin(t),i=e[0]*s-e[1]*n,o=e[1]*s+e[0]*n;return e[0]=i,e[1]=o,e},t.scale=function(e,t){return e[0]*=t,e[1]*=t,e},t.squaredDistance=l,t.distance=function(e,t){return Math.sqrt(l(e,t))},t.squaredDistanceToSegment=function(e,t){return l(e,o(e,t))},t.toStringHDMS=function(e,t){return e?r("NS",e[1],t)+" "+r("EW",e[0],t):""},t.toStringXY=d,t.wrapX=function(e,t){if(t.canWrapX()){const n=s.getWidth(t.getExtent()),i=u(e,t,n);i&&(e[0]-=i*n)}return e},t.getWorldsAway=u})),define("node_modules/ol/src/extent",["require","exports","node_modules/ol/src/extent/Corner","node_modules/ol/src/extent/Relationship","node_modules/ol/src/asserts"],(function(e,t,s,n,i){"use strict";function o(e,t,s){return e[0]<=t&&t<=e[2]&&e[1]<=s&&s<=e[3]}function r(e,t){const s=e[0],i=e[1],o=e[2],r=e[3],a=t[0],l=t[1];let d=n.default.UNKNOWN;return a<s?d|=n.default.LEFT:a>o&&(d|=n.default.RIGHT),l<i?d|=n.default.BELOW:l>r&&(d|=n.default.ABOVE),d===n.default.UNKNOWN&&(d=n.default.INTERSECTING),d}function a(){return[1/0,1/0,-1/0,-1/0]}function l(e,t,s,n,i){return i?(i[0]=e,i[1]=t,i[2]=s,i[3]=n,i):[e,t,s,n]}function d(e){return l(1/0,1/0,-1/0,-1/0,e)}function u(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function c(e,t){for(let s=0,n=t.length;s<n;++s)u(e,t[s]);return e}function h(e,t,s,n,i){for(;s<n;s+=i)_(e,t[s],t[s+1]);return e}function f(e,t){for(let s=0,n=t.length;s<n;++s)c(e,t[s]);return e}function _(e,t,s){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],s),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],s)}function g(e){let t=0;return M(e)||(t=T(e)*v(e)),t}function m(e){return[e[0],e[1]]}function p(e){return[e[2],e[1]]}function y(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function v(e){return e[3]-e[1]}function x(e,t,s){const n=s||[1/0,1/0,-1/0,-1/0];return S(e,t)?(e[0]>t[0]?n[0]=e[0]:n[0]=t[0],e[1]>t[1]?n[1]=e[1]:n[1]=t[1],e[2]<t[2]?n[2]=e[2]:n[2]=t[2],e[3]<t[3]?n[3]=e[3]:n[3]=t[3]):d(n),n}function E(e){return[e[0],e[3]]}function C(e){return[e[2],e[3]]}function T(e){return e[2]-e[0]}function S(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function M(e){return e[2]<e[0]||e[3]<e[1]}Object.defineProperty(t,"__esModule",{value:!0}),t.wrapX=t.applyTransform=t.intersectsSegment=t.scaleFromCenter=t.returnOrUpdate=t.isEmpty=t.intersects=t.getWidth=t.getTopRight=t.getTopLeft=t.getSize=t.getMargin=t.getIntersection=t.getIntersectionArea=t.getHeight=t.getForViewAndSize=t.getEnlargedArea=t.getCorner=t.getCenter=t.getBottomRight=t.getBottomLeft=t.getArea=t.forEachCorner=t.extendXY=t.extendRings=t.extendFlatCoordinates=t.extendCoordinates=t.extendCoordinate=t.extend=t.approximatelyEquals=t.equals=t.createOrUpdateFromRings=t.createOrUpdateFromFlatCoordinates=t.createOrUpdateFromCoordinates=t.createOrUpdateFromCoordinate=t.createOrUpdateEmpty=t.createOrUpdate=t.createEmpty=t.coordinateRelationship=t.containsXY=t.containsExtent=t.containsCoordinate=t.closestSquaredDistanceXY=t.clone=t.buffer=t.boundingExtent=void 0,t.boundingExtent=function(e){const t=a();for(let s=0,n=e.length;s<n;++s)u(t,e[s]);return t},t.buffer=function(e,t,s){return s?(s[0]=e[0]-t,s[1]=e[1]-t,s[2]=e[2]+t,s[3]=e[3]+t,s):[e[0]-t,e[1]-t,e[2]+t,e[3]+t]},t.clone=function(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()},t.closestSquaredDistanceXY=function(e,t,s){let n,i;return n=t<e[0]?e[0]-t:e[2]<t?t-e[2]:0,i=s<e[1]?e[1]-s:e[3]<s?s-e[3]:0,n*n+i*i},t.containsCoordinate=function(e,t){return o(e,t[0],t[1])},t.containsExtent=function(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]},t.containsXY=o,t.coordinateRelationship=r,t.createEmpty=a,t.createOrUpdate=l,t.createOrUpdateEmpty=d,t.createOrUpdateFromCoordinate=function(e,t){const s=e[0],n=e[1];return l(s,n,s,n,t)},t.createOrUpdateFromCoordinates=function(e,t){return c(d(t),e)},t.createOrUpdateFromFlatCoordinates=function(e,t,s,n,i){return h(d(i),e,t,s,n)},t.createOrUpdateFromRings=function(e,t){return f(d(t),e)},t.equals=function(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]},t.approximatelyEquals=function(e,t,s){return Math.abs(e[0]-t[0])<s&&Math.abs(e[2]-t[2])<s&&Math.abs(e[1]-t[1])<s&&Math.abs(e[3]-t[3])<s},t.extend=function(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e},t.extendCoordinate=u,t.extendCoordinates=c,t.extendFlatCoordinates=h,t.extendRings=f,t.extendXY=_,t.forEachCorner=function(e,t){let s;return s=t(m(e)),s||(s=t(p(e)),s||(s=t(C(e)),s||(s=t(E(e)),s||!1)))},t.getArea=g,t.getBottomLeft=m,t.getBottomRight=p,t.getCenter=y,t.getCorner=function(e,t){let n;return t===s.default.BOTTOM_LEFT?n=m(e):t===s.default.BOTTOM_RIGHT?n=p(e):t===s.default.TOP_LEFT?n=E(e):t===s.default.TOP_RIGHT?n=C(e):i.assert(!1,13),n},t.getEnlargedArea=function(e,t){const s=Math.min(e[0],t[0]),n=Math.min(e[1],t[1]);return(Math.max(e[2],t[2])-s)*(Math.max(e[3],t[3])-n)},t.getForViewAndSize=function(e,t,s,n,i){const o=t*n[0]/2,r=t*n[1]/2,a=Math.cos(s),d=Math.sin(s),u=o*a,c=o*d,h=r*a,f=r*d,_=e[0],g=e[1],m=_-u+f,p=_-u-f,y=_+u-f,v=_+u+f,x=g-c-h,E=g-c+h,C=g+c+h,T=g+c-h;return l(Math.min(m,p,y,v),Math.min(x,E,C,T),Math.max(m,p,y,v),Math.max(x,E,C,T),i)},t.getHeight=v,t.getIntersectionArea=function(e,t){return g(x(e,t))},t.getIntersection=x,t.getMargin=function(e){return T(e)+v(e)},t.getSize=function(e){return[e[2]-e[0],e[3]-e[1]]},t.getTopLeft=E,t.getTopRight=C,t.getWidth=T,t.intersects=S,t.isEmpty=M,t.returnOrUpdate=function(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e},t.scaleFromCenter=function(e,t){const s=(e[2]-e[0])/2*(t-1),n=(e[3]-e[1])/2*(t-1);e[0]-=s,e[2]+=s,e[1]-=n,e[3]+=n},t.intersectsSegment=function(e,t,s){let i=!1;const o=r(e,t),a=r(e,s);if(o===n.default.INTERSECTING||a===n.default.INTERSECTING)i=!0;else{const r=e[0],l=e[1],d=e[2],u=e[3],c=t[0],h=t[1],f=s[0],_=s[1],g=(_-h)/(f-c);let m,p;a&n.default.ABOVE&&!(o&n.default.ABOVE)&&(m=f-(_-u)/g,i=m>=r&&m<=d),i||!(a&n.default.RIGHT)||o&n.default.RIGHT||(p=_-(f-d)*g,i=p>=l&&p<=u),i||!(a&n.default.BELOW)||o&n.default.BELOW||(m=f-(_-l)/g,i=m>=r&&m<=d),i||!(a&n.default.LEFT)||o&n.default.LEFT||(p=_-(f-r)*g,i=p>=l&&p<=u)}return i},t.applyTransform=function(e,t,s,n){let i=[];if(n>1){const t=e[2]-e[0],s=e[3]-e[1];for(let o=0;o<n;++o)i.push(e[0]+t*o/n,e[1],e[2],e[1]+s*o/n,e[2]-t*o/n,e[3],e[0],e[3]-s*o/n)}else i=[e[0],e[1],e[2],e[1],e[2],e[3],e[0],e[3]];t(i,i,2);const o=[],r=[];for(let e=0,t=i.length;e<t;e+=2)o.push(i[e]),r.push(i[e+1]);return function(e,t,s){return l(Math.min.apply(null,e),Math.min.apply(null,t),Math.max.apply(null,e),Math.max.apply(null,t),s)}(o,r,s)},t.wrapX=function(e,t){const s=t.getExtent(),n=y(e);if(t.canWrapX()&&(n[0]<s[0]||n[0]>=s[2])){const t=T(s),i=Math.floor((n[0]-s[0])/t)*t;e[0]-=i,e[2]-=i}return e}})),define("poc/types/XYZ",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})),define("poc/fun/explode",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.explode=void 0,t.explode=function(e){const[t,s,n,i]=e,[o,r]=[n-t,i-s],[a,l]=[t+o/2,s+r/2];return{xmin:t,ymin:s,xmax:n,ymax:i,w:o,h:r,xmid:a,ymid:l}}})),define("poc/fun/asXYZ",["require","exports","poc/fun/explode","poc/fun/tiny"],(function(e,t,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asXYZ=void 0,t.asXYZ=function(e,t){const i=s.explode(e),o=s.explode(t),r=Math.log2(i.w/o.w),a=Math.round(r),l=Math.pow(2,a)*(o.xmin-i.xmin)/i.w,d=Math.pow(2,a)*(o.ymin-i.ymin)/i.h,u=Math.round(l),c=Math.round(d),h=Math.pow(2,-10);if(!n.isEq(a-r,0,h))throw"invalid extent: zoom";if(!n.isEq(u-l,0,h))throw"invalid extent: xmin";if(!n.isEq(c-d,0,h))throw"invalid extent: ymin";if(!n.isEq(o.h/o.w,i.h/i.w,h))throw"invalid extent: width::height";return{X:u,Y:c,Z:a}}})),define("poc/fun/asExtent",["require","exports","poc/fun/explode"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asExtent=void 0,t.asExtent=function(e,{X:t,Y:n,Z:i}){const o=Math.pow(2,-i),r=s.explode(e),a=r.w*o,l=r.h*o,d=r.xmin+a*t,u=r.ymin+l*n;return[d,u,d+a,u+l]}})),define("poc/types/TileNode",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})),define("poc/TileTreeState",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})),define("poc/TileTree",["require","exports","node_modules/ol/src/extent","node_modules/ol/src/extent","poc/fun/explode","poc/fun/asXYZ","poc/fun/asExtent"],(function(e,t,s,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileTree=void 0;class a{constructor(e){this.extent=e.extent,this.root={X:0,Y:0,Z:0},this.tileCache=[[[this.asTileNode()]]]}static create({extent:e,data:t}){const s=new a({extent:e});return s.load({extent:e,data:t}),s}asCenter(e){return s.getCenter(this.asExtent(e))}decorate(e,t){const s=this.findByXYZ(e,{force:!0}).data;return t&&Object.assign(s,t),s}load({extent:e,data:t}){const s=this.asExtent({X:0,Y:0,Z:0});if(e.some((e,t)=>e!=s[t]))throw`extent mismatch: ${e}, ${s}`;t.forEach(([e,t,s,n])=>{Object.assign(this.findByXYZ({X:e,Y:t,Z:s},{force:!0}).data,n)})}save(){return{extent:this.asExtent({X:0,Y:0,Z:0}),data:this.descendants({X:0,Y:0,Z:0}).map(e=>[e.X,e.Y,e.Z,this.findByXYZ(e).data])}}asXyz(e){return o.asXYZ(this.asExtent({X:0,Y:0,Z:0}),e)}asTileNode(){return{data:{}}}asExtent(e={X:0,Y:0,Z:0}){return r.asExtent(this.extent,e)}parent({X:e,Y:t,Z:s},n=1){const i=Math.pow(2,-n);return{X:Math.floor(e*i),Y:Math.floor(t*i),Z:s-n}}findByXYZ(e,t){const{X:s,Y:n,Z:i}=e;if(i<0)throw"invalid Z";if(s<0)throw"invalid X";if(n<0)throw"invalid Y";const o=Math.pow(2,i);if(s>=o)throw"invalid X";if(n>=o)throw"invalid Y";return this.tileCache[i]=this.tileCache[i]||[],this.tileCache[i][s]=this.tileCache[i][s]||[],!this.tileCache[i][s][n]&&(null==t?void 0:t.force)&&(this.tileCache[i][s][n]=this.asTileNode()),this.tileCache[i][s][n]||null}findByPoint(e){const{point:t,zoom:s}=e,[o,r]=t;if(s<0)throw"invalid depth";if(!n.containsXY(this.extent,o,r))throw"point is outside of extent";if(0===s)return this.root;const a=i.explode(this.extent),l=s;return{X:Math.floor(Math.pow(2,l)*(o-a.xmin)/a.w),Y:Math.floor(Math.pow(2,l)*(r-a.ymin)/a.h),Z:l}}quads({X:e,Y:t,Z:s}){const n=2*e,i=2*t,o=s+1;return[{X:n,Y:i,Z:o},{X:n,Y:i+1,Z:o},{X:n+1,Y:i+1,Z:o},{X:n+1,Y:i,Z:o}]}children(e){return this.quads(e).filter(e=>!!this.findByXYZ(e,{force:!1}))}descendants(e=this.root){const t=[];return Object.keys(this.tileCache).map(e=>parseInt(e)).filter(t=>t>e.Z).forEach(s=>{const n=Math.pow(2,s-e.Z),i=e.X*n,o=(e.X+1)*n-1,r=e.Y*n,a=(e.Y+1)*n-1;Object.keys(this.tileCache[s]).map(e=>parseInt(e)).filter(e=>i<=e&&e<=o).forEach(e=>{Object.keys(this.tileCache[s][e]).map(e=>parseInt(e)).filter(e=>r<=e&&e<=a).forEach(n=>{t.push({X:e,Y:n,Z:s})})})}),t}ensureQuads(e){return this.quads(e).map(e=>this.findByXYZ(e,{force:!0}))}visit(e,t){let s=t;return Object.keys(this.tileCache).forEach(t=>{Object.keys(this.tileCache[t]).forEach(n=>{Object.keys(this.tileCache[t][n]).forEach(i=>{s=e(s,{X:n,Y:i,Z:t})})})}),s}findByExtent(e){const t=this.asXyz(e);return this.findByXYZ(t,{force:!0}),t}}t.TileTree=a})),define("node_modules/ol/src/geom/flat/interpolate",["require","exports","node_modules/ol/src/array","node_modules/ol/src/math"],(function(e,t,s,n){"use strict";function i(e,t,s,i,o,r){if(s==t)return null;let a;if(o<e[t+i-1])return r?(a=e.slice(t,t+i),a[i-1]=o,a):null;if(e[s-1]<o)return r?(a=e.slice(s-i,s),a[i-1]=o,a):null;if(o==e[t+i-1])return e.slice(t,t+i);let l=t/i,d=s/i;for(;l<d;){const t=l+d>>1;o<e[(t+1)*i-1]?d=t:l=t+1}const u=e[l*i-1];if(o==u)return e.slice((l-1)*i,(l-1)*i+i);const c=(o-u)/(e[(l+1)*i-1]-u);a=[];for(let t=0;t<i-1;++t)a.push(n.lerp(e[(l-1)*i+t],e[l*i+t],c));return a.push(o),a}Object.defineProperty(t,"__esModule",{value:!0}),t.lineStringsCoordinateAtM=t.lineStringCoordinateAtM=t.interpolatePoint=void 0,t.interpolatePoint=function(e,t,i,o,r,a,l){let d,u;const c=(i-t)/o;if(1===c)d=t;else if(2===c)d=t,u=r;else if(0!==c){let n=e[t],a=e[t+1],l=0;const c=[0];for(let s=t+o;s<i;s+=o){const t=e[s],i=e[s+1];l+=Math.sqrt((t-n)*(t-n)+(i-a)*(i-a)),c.push(l),n=t,a=i}const h=r*l,f=s.binarySearch(c,h);f<0?(u=(h-c[-f-2])/(c[-f-1]-c[-f-2]),d=t+(-f-2)*o):d=t+f*o}const h=l>1?l:2,f=a||new Array(h);for(let t=0;t<h;++t)f[t]=void 0===d?NaN:void 0===u?e[d+t]:n.lerp(e[d+t],e[d+o+t],u);return f},t.lineStringCoordinateAtM=i,t.lineStringsCoordinateAtM=function(e,t,s,n,o,r,a){if(a)return i(e,t,s[s.length-1],n,o,r);let l;if(o<e[n-1])return r?(l=e.slice(0,n),l[n-1]=o,l):null;if(e[e.length-1]<o)return r?(l=e.slice(e.length-n),l[n-1]=o,l):null;for(let r=0,a=s.length;r<a;++r){const a=s[r];if(t!=a){if(o<e[t+n-1])return null;if(o<=e[a-1])return i(e,t,a,n,o,!1);t=a}}return null}})),define("node_modules/ol/src/geom/flat/center",["require","exports","node_modules/ol/src/extent"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linearRingss=void 0,t.linearRingss=function(e,t,n,i){const o=[];let r=s.createEmpty();for(let a=0,l=n.length;a<l;++a){const l=n[a];r=s.createOrUpdateFromFlatCoordinates(e,t,l[0],i),o.push((r[0]+r[2])/2,(r[1]+r[3])/2),t=l[l.length-1]}return o}})),define("node_modules/ol/src/render/Feature",["require","exports","node_modules/ol/src/geom/GeometryType","node_modules/ol/src/transform","node_modules/ol/src/extent","node_modules/ol/src/array","node_modules/ol/src/geom/flat/interiorpoint","node_modules/ol/src/proj","node_modules/ol/src/geom/flat/interpolate","node_modules/ol/src/geom/flat/center","node_modules/ol/src/geom/flat/transform"],(function(e,t,s,n,i,o,r,a,l,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const c=n.create();class h{constructor(e,t,s,n,i){this.extent_,this.id_=i,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=s,this.properties_=n}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_===s.default.POINT?i.createOrUpdateFromCoordinate(this.flatCoordinates_):i.createOrUpdateFromFlatCoordinates(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=i.getCenter(this.getExtent());this.flatInteriorPoints_=r.getInteriorPointOfArray(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=d.linearRingss(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=r.getInteriorPointsOfMultiArray(this.flatCoordinates_,0,this.ends_,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=l.interpolatePoint(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const s=this.ends_;for(let n=0,i=s.length;n<i;++n){const i=s[n],r=l.interpolatePoint(e,t,i,2,.5);o.extend(this.flatMidpoints_,r),t=i}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getStride(){return 2}getStyleFunction(){}getType(){return this.type_}transform(e,t){const s=(e=a.get(e)).getExtent(),o=e.getWorldExtent(),r=i.getHeight(o)/i.getHeight(s);n.compose(c,o[0],o[3],r,-r,0,0,0),u.transform2D(this.flatCoordinates_,0,this.flatCoordinates_.length,2,c,this.flatCoordinates_)}getEnds(){return this.ends_}}h.prototype.getEndss=h.prototype.getEnds,h.prototype.getFlatCoordinates=h.prototype.getOrientedFlatCoordinates,t.default=h})),define("node_modules/ol/src/ImageState",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}})),define("node_modules/ol/src/style/Image",["require","exports","node_modules/ol/src/util","node_modules/ol/src/size"],(function(e,t,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=n.toSize(e.scale),this.displacement_=e.displacement}clone(){const e=this.getScale();return new i({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getAnchor(){return s.abstract()}getImage(e){return s.abstract()}getHitDetectionImage(){return s.abstract()}getPixelRatio(e){return 1}getImageState(){return s.abstract()}getImageSize(){return s.abstract()}getHitDetectionImageSize(){return s.abstract()}getOrigin(){return s.abstract()}getSize(){return s.abstract()}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=n.toSize(e)}listenImageChange(e){s.abstract()}load(){s.abstract()}unlistenImageChange(e){s.abstract()}}t.default=i})),define("node_modules/ol/src/color",["require","exports","node_modules/ol/src/asserts","node_modules/ol/src/math"],(function(e,t,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isStringColor=t.toString=t.normalize=t.asArray=t.fromString=t.asString=void 0;const i=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,o=/^([a-z]*)$|^hsla?\(.*\)$/i;function r(e){const t=document.createElement("div");if(t.style.color=e,""!==t.style.color){document.body.appendChild(t);const e=getComputedStyle(t).color;return document.body.removeChild(t),e}return""}function a(e){return e[0]=n.clamp(e[0]+.5|0,0,255),e[1]=n.clamp(e[1]+.5|0,0,255),e[2]=n.clamp(e[2]+.5|0,0,255),e[3]=n.clamp(e[3],0,1),e}function l(e){let t=e[0];t!=(0|t)&&(t=t+.5|0);let s=e[1];s!=(0|s)&&(s=s+.5|0);let n=e[2];n!=(0|n)&&(n=n+.5|0);return"rgba("+t+","+s+","+n+","+(void 0===e[3]?1:e[3])+")"}t.asString=function(e){return"string"==typeof e?e:l(e)},t.fromString=function(){const e={};let t=0;return function(n){let l;if(e.hasOwnProperty(n))l=e[n];else{if(t>=1024){let s=0;for(const n in e)0==(3&s++)&&(delete e[n],--t)}l=function(e){let t,n,l,d,u;o.exec(e)&&(e=r(e));if(i.exec(e)){const s=e.length-1;let i;i=s<=4?1:2;const o=4===s||8===s;t=parseInt(e.substr(1+0*i,i),16),n=parseInt(e.substr(1+1*i,i),16),l=parseInt(e.substr(1+2*i,i),16),d=o?parseInt(e.substr(1+3*i,i),16):255,1==i&&(t=(t<<4)+t,n=(n<<4)+n,l=(l<<4)+l,o&&(d=(d<<4)+d)),u=[t,n,l,d/255]}else 0==e.indexOf("rgba(")?(u=e.slice(5,-1).split(",").map(Number),a(u)):0==e.indexOf("rgb(")?(u=e.slice(4,-1).split(",").map(Number),u.push(1),a(u)):s.assert(!1,14);return u}(n),e[n]=l,++t}return l}}(),t.asArray=function(e){return Array.isArray(e)?e:t.fromString(e)},t.normalize=a,t.toString=l,t.isStringColor=function(e){return o.test(e)&&(e=r(e)),i.test(e)||0===e.indexOf("rgba(")||0===e.indexOf("rgb(")}})),define("node_modules/ol/src/colorlike",["require","exports","node_modules/ol/src/color"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asColorLike=void 0,t.asColorLike=function(e){return Array.isArray(e)?s.toString(e):e}})),define("node_modules/ol/src/has",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PASSIVE_EVENT_LISTENERS=t.IMAGE_DECODE=t.WORKER_OFFSCREEN_CANVAS=t.DEVICE_PIXEL_RATIO=t.MAC=t.WEBKIT=t.SAFARI=t.FIREFOX=void 0;const s="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"";t.FIREFOX=-1!==s.indexOf("firefox"),t.SAFARI=-1!==s.indexOf("safari")&&-1==s.indexOf("chrom"),t.WEBKIT=-1!==s.indexOf("webkit")&&-1==s.indexOf("edge"),t.MAC=-1!==s.indexOf("macintosh"),t.DEVICE_PIXEL_RATIO="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,t.WORKER_OFFSCREEN_CANVAS="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,t.IMAGE_DECODE="undefined"!=typeof Image&&Image.prototype.decode,t.PASSIVE_EVENT_LISTENERS=function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(e){}return e}()})),define("node_modules/ol/src/dom",["require","exports","node_modules/ol/src/has"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.replaceChildren=t.removeChildren=t.removeNode=t.replaceNode=t.outerHeight=t.outerWidth=t.createCanvasContext2D=void 0,t.createCanvasContext2D=function(e,t,n){const i=n&&n.length?n.shift():s.WORKER_OFFSCREEN_CANVAS?new OffscreenCanvas(e||300,t||300):document.createElement("canvas");return e&&(i.width=e),t&&(i.height=t),i.getContext("2d")},t.outerWidth=function(e){let t=e.offsetWidth;const s=getComputedStyle(e);return t+=parseInt(s.marginLeft,10)+parseInt(s.marginRight,10),t},t.outerHeight=function(e){let t=e.offsetHeight;const s=getComputedStyle(e);return t+=parseInt(s.marginTop,10)+parseInt(s.marginBottom,10),t},t.replaceNode=function(e,t){const s=t.parentNode;s&&s.replaceChild(e,t)},t.removeNode=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},t.removeChildren=function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},t.replaceChildren=function(e,t){const s=e.childNodes;for(let n=0;;++n){const i=s[n],o=t[n];if(!i&&!o)break;i!==o&&(i?o?e.insertBefore(o,i):(e.removeChild(i),--n):e.appendChild(o))}}})),define("node_modules/ol/src/css",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFontParameters=t.CLASS_COLLAPSED=t.CLASS_CONTROL=t.CLASS_UNSUPPORTED=t.CLASS_UNSELECTABLE=t.CLASS_SELECTABLE=t.CLASS_HIDDEN=void 0,t.CLASS_HIDDEN="ol-hidden",t.CLASS_SELECTABLE="ol-selectable",t.CLASS_UNSELECTABLE="ol-unselectable",t.CLASS_UNSUPPORTED="ol-unsupported",t.CLASS_CONTROL="ol-control",t.CLASS_COLLAPSED="ol-collapsed";const s=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),n=["style","variant","weight","size","lineHeight","family"];t.getFontParameters=function(e){const t=e.match(s);if(!t)return null;const i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let e=0,s=n.length;e<s;++e){const s=t[e+1];void 0!==s&&(i[n[e]]=s)}return i.families=i.family.split(/,\s?/),i}})),define("node_modules/ol/src/style/Fill",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class s{constructor(e){const t=e||{};this.color_=void 0!==t.color?t.color:null}clone(){const e=this.getColor();return new s({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}t.default=s})),define("node_modules/ol/src/style/Stroke",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class s{constructor(e){const t=e||{};this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const e=this.getColor();return new s({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}t.default=s})),define("node_modules/ol/src/render/canvas",["require","exports","node_modules/ol/src/Object","node_modules/ol/src/events/Target","node_modules/ol/src/has","node_modules/ol/src/obj","node_modules/ol/src/dom","node_modules/ol/src/css","node_modules/ol/src/transform"],(function(e,t,s,n,i,o,r,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTransformString=t.drawImageOrLabel=t.rotateAtOffset=t.measureTextWidths=t.measureAndCacheTextWidth=t.measureTextWidth=t.measureTextHeight=t.registerFont=t.textHeights=t.labelCache=t.checkedFonts=t.defaultLineWidth=t.defaultPadding=t.defaultTextBaseline=t.defaultTextAlign=t.defaultStrokeStyle=t.defaultMiterLimit=t.defaultLineJoin=t.defaultLineDashOffset=t.defaultLineDash=t.defaultLineCap=t.defaultFillStyle=t.defaultFont=void 0,t.defaultFont="10px sans-serif",t.defaultFillStyle="#000",t.defaultLineCap="round",t.defaultLineDash=[],t.defaultLineDashOffset=0,t.defaultLineJoin="round",t.defaultMiterLimit=10,t.defaultStrokeStyle="#000",t.defaultTextAlign="center",t.defaultTextBaseline="middle",t.defaultPadding=[0,0,0,0],t.defaultLineWidth=1,t.checkedFonts=new s.default,t.labelCache=new n.default,t.labelCache.setSize=function(){console.warn("labelCache is deprecated.")};let d,u=null;function c(e,t){return u||(u=r.createCanvasContext2D(1,1)),e!=d&&(u.font=e,d=u.font),u.measureText(t)}function h(e,t){return c(e,t).width}t.textHeights={},t.registerFont=function(){const e="32px ",s=["monospace","serif"],n=s.length,i="wmytzilWMYTZIL@#/&?$%10";let r,l;function c(t,o,r){let a=!0;for(let d=0;d<n;++d){const n=s[d];if(l=h(t+" "+o+" "+e+n,i),r!=n){const s=h(t+" "+o+" "+e+r+","+n,i);a=a&&s!=l}}return!!a}function f(){let e=!0;const s=t.checkedFonts.getKeys();for(let n=0,i=s.length;n<i;++n){const i=s[n];t.checkedFonts.get(i)<100&&(c.apply(this,i.split("\n"))?(o.clear(t.textHeights),u=null,d=void 0,t.checkedFonts.set(i,100)):(t.checkedFonts.set(i,t.checkedFonts.get(i)+1,!0),e=!1))}e&&(clearInterval(r),r=void 0)}return function(e){const s=a.getFontParameters(e);if(!s)return;const n=s.families;for(let e=0,i=n.length;e<i;++e){const i=n[e],o=s.style+"\n"+s.weight+"\n"+i;void 0===t.checkedFonts.get(o)&&(t.checkedFonts.set(o,100,!0),c(s.style,s.weight,i)||(t.checkedFonts.set(o,0,!0),void 0===r&&(r=setInterval(f,32))))}}}(),t.measureTextHeight=function(){let e;const s=t.textHeights;return function(n){let o=s[n];if(null==o)if(i.WORKER_OFFSCREEN_CANVAS){const e=a.getFontParameters(n),s=c(n,"Žg"),i=isNaN(Number(e.lineHeight))?1.2:Number(e.lineHeight);t.textHeights[n]=i*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else e||(e=document.createElement("div"),e.innerHTML="M",e.style.margin="0 !important",e.style.padding="0 !important",e.style.position="absolute !important",e.style.left="-99999px !important"),e.style.font=n,document.body.appendChild(e),o=e.offsetHeight,s[n]=o,document.body.removeChild(e);return o}}(),t.measureTextWidth=h,t.measureAndCacheTextWidth=function(e,t,s){if(t in s)return s[t];const n=h(e,t);return s[t]=n,n},t.measureTextWidths=function(e,t,s){const n=t.length;let i=0;for(let o=0;o<n;++o){const n=h(e,t[o]);i=Math.max(i,n),s.push(n)}return i},t.rotateAtOffset=function(e,t,s,n){0!==t&&(e.translate(s,n),e.rotate(t),e.translate(-s,-n))},t.drawImageOrLabel=function(e,t,s,n,i,o,r,a,l,d,u){e.save(),1!==s&&(e.globalAlpha*=s),t&&e.setTransform.apply(e,t),n.contextInstructions?(e.translate(l,d),e.scale(u[0],u[1]),function(e,t){const s=e.contextInstructions;for(let e=0,n=s.length;e<n;e+=2)Array.isArray(s[e+1])?t[s[e]].apply(t,s[e+1]):t[s[e]]=s[e+1]}(n,e)):u[0]<0||u[1]<0?(e.translate(l,d),e.scale(u[0],u[1]),e.drawImage(n,i,o,r,a,0,0,r,a)):e.drawImage(n,i,o,r,a,l,d,r*u[0],a*u[1]),e.restore()};let f=null;t.createTransformString=function(e){return i.WORKER_OFFSCREEN_CANVAS?l.toString(e):(f||(f=r.createCanvasContext2D(1,1).canvas),f.style.transform=l.toString(e),f.style.transform)}})),define("node_modules/ol/src/style/RegularShape",["require","exports","node_modules/ol/src/ImageState","node_modules/ol/src/style/Image","node_modules/ol/src/color","node_modules/ol/src/colorlike","node_modules/ol/src/dom","node_modules/ol/src/render/canvas"],(function(e,t,s,n,i,o,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class l extends n.default{constructor(e){super({opacity:1,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,rotation:void 0!==e.rotation?e.rotation:0,scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0]}),this.canvas_={},this.hitDetectionCanvas_=null,this.fill_=void 0!==e.fill?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=void 0!==e.radius?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=void 0!==e.angle?e.angle:0,this.stroke_=void 0!==e.stroke?e.stroke:null,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.render()}clone(){const e=new l({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return e.setOpacity(this.getOpacity()),e.setScale(this.getScale()),e}getAnchor(){return this.anchor_}getAngle(){return this.angle_}getFill(){return this.fill_}getHitDetectionImage(){if(!this.hitDetectionCanvas_){const e=this.createRenderOptions();this.createHitDetectionCanvas_(e)}return this.hitDetectionCanvas_}getImage(e){if(!this.canvas_[e||1]){const t=this.createRenderOptions(),s=r.createCanvasContext2D(t.size*e||1,t.size*e||1);this.draw_(t,s,0,0,e||1),this.canvas_[e||1]=s.canvas}return this.canvas_[e||1]}getPixelRatio(e){return e}getImageSize(){return this.imageSize_}getHitDetectionImageSize(){return this.hitDetectionImageSize_}getImageState(){return s.default.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}listenImageChange(e){}load(){}unlistenImageChange(e){}createRenderOptions(){let e,t=a.defaultLineCap,s=a.defaultLineJoin,n=0,i=null,r=0,l=0;this.stroke_&&(e=this.stroke_.getColor(),null===e&&(e=a.defaultStrokeStyle),e=o.asColorLike(e),l=this.stroke_.getWidth(),void 0===l&&(l=a.defaultLineWidth),i=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),s=this.stroke_.getLineJoin(),void 0===s&&(s=a.defaultLineJoin),t=this.stroke_.getLineCap(),void 0===t&&(t=a.defaultLineCap),n=this.stroke_.getMiterLimit(),void 0===n&&(n=a.defaultMiterLimit));return{strokeStyle:e,strokeWidth:l,size:2*(this.radius_+l)+1,lineCap:t,lineDash:i,lineDashOffset:r,lineJoin:s,miterLimit:n}}render(){const e=this.createRenderOptions(),t=r.createCanvasContext2D(e.size,e.size);this.draw_(e,t,0,0,1),this.canvas_[1]=t.canvas;const s=t.canvas.width,n=s,i=this.getDisplacement();this.hitDetectionImageSize_=[e.size,e.size],this.createHitDetectionCanvas_(e),this.anchor_=[s/2-i[0],s/2+i[1]],this.size_=[s,s],this.imageSize_=[n,n]}draw_(e,t,s,n,i){let r,l,d;t.setTransform(i,0,0,i,0,0),t.translate(s,n),t.beginPath();let u=this.points_;if(u===1/0)t.arc(e.size/2,e.size/2,this.radius_,0,2*Math.PI,!0);else{const s=void 0!==this.radius2_?this.radius2_:this.radius_;for(s!==this.radius_&&(u*=2),r=0;r<=u;r++)l=2*r*Math.PI/u-Math.PI/2+this.angle_,d=r%2==0?this.radius_:s,t.lineTo(e.size/2+d*Math.cos(l),e.size/2+d*Math.sin(l))}if(this.fill_){let e=this.fill_.getColor();null===e&&(e=a.defaultFillStyle),t.fillStyle=o.asColorLike(e),t.fill()}this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,t.setLineDash&&e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke()),t.closePath()}createHitDetectionCanvas_(e){if(this.hitDetectionCanvas_=this.getImage(1),this.fill_){let t=this.fill_.getColor(),s=0;if("string"==typeof t&&(t=i.asArray(t)),null===t?s=1:Array.isArray(t)&&(s=4===t.length?t[3]:1),0===s){const t=r.createCanvasContext2D(e.size,e.size);this.hitDetectionCanvas_=t.canvas,this.drawHitDetectionCanvas_(e,t,0,0)}}}drawHitDetectionCanvas_(e,t,s,n){t.translate(s,n),t.beginPath();let i=this.points_;if(i===1/0)t.arc(e.size/2,e.size/2,this.radius_,0,2*Math.PI,!0);else{const s=void 0!==this.radius2_?this.radius2_:this.radius_;let n,o,r;for(s!==this.radius_&&(i*=2),n=0;n<=i;n++)r=2*n*Math.PI/i-Math.PI/2+this.angle_,o=n%2==0?this.radius_:s,t.lineTo(e.size/2+o*Math.cos(r),e.size/2+o*Math.sin(r))}t.fillStyle=a.defaultFillStyle,t.fill(),this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.stroke()),t.closePath()}}t.default=l})),define("node_modules/ol/src/style/Circle",["require","exports","node_modules/ol/src/style/RegularShape"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends s.default{constructor(e){const t=e||{};super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,displacement:void 0!==t.displacement?t.displacement:[0,0]})}clone(){const e=new n({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),displacement:this.getDisplacement().slice()});return e.setOpacity(this.getOpacity()),e.setScale(this.getScale()),e}setRadius(e){this.radius_=e,this.render()}}t.default=n})),define("node_modules/ol/src/geom/flat/length",["require","exports"],(function(e,t){"use strict";function s(e,t,s,n){let i=e[t],o=e[t+1],r=0;for(let a=t+n;a<s;a+=n){const t=e[a],s=e[a+1];r+=Math.sqrt((t-i)*(t-i)+(s-o)*(s-o)),i=t,o=s}return r}Object.defineProperty(t,"__esModule",{value:!0}),t.linearRingLength=t.lineStringLength=void 0,t.lineStringLength=s,t.linearRingLength=function(e,t,n,i){let o=s(e,t,n,i);const r=e[n-i]-e[t],a=e[n-i+1]-e[t+1];return o+=Math.sqrt(r*r+a*a),o}})),define("node_modules/ol/src/geom/LineString",["require","exports","node_modules/ol/src/geom/GeometryLayout","node_modules/ol/src/geom/GeometryType","node_modules/ol/src/geom/SimpleGeometry","node_modules/ol/src/geom/flat/closest","node_modules/ol/src/extent","node_modules/ol/src/geom/flat/deflate","node_modules/ol/src/geom/flat/simplify","node_modules/ol/src/array","node_modules/ol/src/geom/flat/segments","node_modules/ol/src/geom/flat/inflate","node_modules/ol/src/geom/flat/interpolate","node_modules/ol/src/geom/flat/intersectsextent","node_modules/ol/src/geom/flat/length"],(function(e,t,s,n,i,o,r,a,l,d,u,c,h,f,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class g extends i.default{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===t||Array.isArray(e[0])?this.setCoordinates(e,t):this.setFlatCoordinates(t,e)}appendCoordinate(e){this.flatCoordinates?d.extend(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()}clone(){return new g(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,s,n){return n<r.closestSquaredDistanceXY(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(o.maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),o.assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,s,n))}forEachSegment(e){return u.forEach(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){if(this.layout!=s.default.XYM&&this.layout!=s.default.XYZM)return null;const n=void 0!==t&&t;return h.lineStringCoordinateAtM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n)}getCoordinates(){return c.inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return h.interpolatePoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return _.lineStringLength(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=l.douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new g(t,s.default.XY)}getType(){return n.default.LINE_STRING}intersectsExtent(e){return f.intersectsLineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=a.deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}t.default=g})),define("node_modules/ol/src/geom/MultiLineString",["require","exports","node_modules/ol/src/geom/GeometryLayout","node_modules/ol/src/geom/GeometryType","node_modules/ol/src/geom/LineString","node_modules/ol/src/geom/SimpleGeometry","node_modules/ol/src/geom/flat/closest","node_modules/ol/src/extent","node_modules/ol/src/geom/flat/deflate","node_modules/ol/src/geom/flat/simplify","node_modules/ol/src/array","node_modules/ol/src/geom/flat/inflate","node_modules/ol/src/geom/flat/interpolate","node_modules/ol/src/geom/flat/intersectsextent"],(function(e,t,s,n,i,o,r,a,l,d,u,c,h,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class _ extends o.default{constructor(e,t,s){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(void 0!==t&&s)this.setFlatCoordinates(t,e),this.ends_=s;else{let t=this.getLayout();const s=e,n=[],i=[];for(let e=0,o=s.length;e<o;++e){const o=s[e];0===e&&(t=o.getLayout()),u.extend(n,o.getFlatCoordinates()),i.push(n.length)}this.setFlatCoordinates(t,n),this.ends_=i}}appendLineString(e){this.flatCoordinates?u.extend(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){return new _(this.flatCoordinates.slice(),this.layout,this.ends_.slice())}closestPointXY(e,t,s,n){return n<a.closestSquaredDistanceXY(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(r.arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),r.assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,s,n))}getCoordinateAtM(e,t,n){if(this.layout!=s.default.XYM&&this.layout!=s.default.XYZM||0===this.flatCoordinates.length)return null;const i=void 0!==t&&t,o=void 0!==n&&n;return h.lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,e,i,o)}getCoordinates(){return c.inflateCoordinatesArray(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new i.default(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,s=this.layout,n=[];let o=0;for(let r=0,a=t.length;r<a;++r){const a=t[r],l=new i.default(e.slice(o,a),s);n.push(l),o=a}return n}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let s=0;const n=this.ends_,i=this.stride;for(let o=0,r=n.length;o<r;++o){const r=n[o],a=h.interpolatePoint(t,s,r,i,.5);u.extend(e,a),s=r}return e}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=d.douglasPeuckerArray(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,n),new _(t,s.default.XY,n)}getType(){return n.default.MULTI_LINE_STRING}intersectsExtent(e){return f.intersectsLineStringArray(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const s=l.deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===s.length?0:s[s.length-1],this.changed()}}t.default=_})),define("node_modules/ol/src/geom/MultiPoint",["require","exports","node_modules/ol/src/geom/GeometryType","node_modules/ol/src/geom/Point","node_modules/ol/src/geom/SimpleGeometry","node_modules/ol/src/extent","node_modules/ol/src/geom/flat/deflate","node_modules/ol/src/array","node_modules/ol/src/geom/flat/inflate","node_modules/ol/src/math"],(function(e,t,s,n,i,o,r,a,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class u extends i.default{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){this.flatCoordinates?a.extend(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()}clone(){return new u(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,s,n){if(n<o.closestSquaredDistanceXY(this.getExtent(),e,t))return n;const i=this.flatCoordinates,r=this.stride;for(let o=0,a=i.length;o<a;o+=r){const a=d.squaredDistance(e,t,i[o],i[o+1]);if(a<n){n=a;for(let e=0;e<r;++e)s[e]=i[o+e];s.length=r}}return n}getCoordinates(){return l.inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return e<0||t<=e?null:new n.default(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,s=this.stride,i=[];for(let o=0,r=e.length;o<r;o+=s){const r=new n.default(e.slice(o,o+s),t);i.push(r)}return i}getType(){return s.default.MULTI_POINT}intersectsExtent(e){const t=this.flatCoordinates,s=this.stride;for(let n=0,i=t.length;n<i;n+=s){const s=t[n],i=t[n+1];if(o.containsXY(e,s,i))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=r.deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}t.default=u})),define("node_modules/ol/src/geom/MultiPolygon",["require","exports","node_modules/ol/src/geom/GeometryLayout","node_modules/ol/src/geom/GeometryType","node_modules/ol/src/geom/MultiPoint","node_modules/ol/src/geom/Polygon","node_modules/ol/src/geom/SimpleGeometry","node_modules/ol/src/geom/flat/closest","node_modules/ol/src/extent","node_modules/ol/src/geom/flat/deflate","node_modules/ol/src/array","node_modules/ol/src/geom/flat/interiorpoint","node_modules/ol/src/geom/flat/inflate","node_modules/ol/src/geom/flat/intersectsextent","node_modules/ol/src/geom/flat/orient","node_modules/ol/src/geom/flat/area","node_modules/ol/src/geom/flat/center","node_modules/ol/src/geom/flat/contains","node_modules/ol/src/geom/flat/simplify"],(function(e,t,s,n,i,o,r,a,l,d,u,c,h,f,_,g,m,p,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class v extends r.default{constructor(e,t,s){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!s&&!Array.isArray(e[0])){let n=this.getLayout();const i=e,o=[],r=[];for(let e=0,t=i.length;e<t;++e){const t=i[e];0===e&&(n=t.getLayout());const s=o.length,a=t.getEnds();for(let e=0,t=a.length;e<t;++e)a[e]+=s;u.extend(o,t.getFlatCoordinates()),r.push(a)}t=n,e=o,s=r}void 0!==t&&s?(this.setFlatCoordinates(t,e),this.endss_=s):this.setCoordinates(e,t)}appendPolygon(e){let t;if(this.flatCoordinates){const s=this.flatCoordinates.length;u.extend(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let e=0,n=t.length;e<n;++e)t[e]+=s}else this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let s=0;s<e;++s)t[s]=this.endss_[s].slice();return new v(this.flatCoordinates.slice(),this.layout,t)}closestPointXY(e,t,s,n){return n<l.closestSquaredDistanceXY(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(a.multiArrayMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),a.assignClosestMultiArrayPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,s,n))}containsXY(e,t){return p.linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return g.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),_.orientLinearRingsArray(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,h.inflateMultiCoordinatesArray(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=m.linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=c.getInteriorPointsOfMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new i.default(this.getFlatInteriorPoints().slice(),s.default.XYM)}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;_.linearRingssAreOriented(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=_.orientLinearRingsArray(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=y.quantizeMultiArray(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,n),new v(t,s.default.XY,n)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(0===e)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const s=this.endss_[e].slice(),n=s[s.length-1];if(0!==t)for(let e=0,n=s.length;e<n;++e)s[e]-=t;return new o.default(this.flatCoordinates.slice(t,n),this.layout,s)}getPolygons(){const e=this.layout,t=this.flatCoordinates,s=this.endss_,n=[];let i=0;for(let r=0,a=s.length;r<a;++r){const a=s[r].slice(),l=a[a.length-1];if(0!==i)for(let e=0,t=a.length;e<t;++e)a[e]-=i;const d=new o.default(t.slice(i,l),e,a);n.push(d),i=l}return n}getType(){return n.default.MULTI_POLYGON}intersectsExtent(e){return f.intersectsLinearRingMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const s=d.deflateMultiCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.endss_);if(0===s.length)this.flatCoordinates.length=0;else{const e=s[s.length-1];this.flatCoordinates.length=0===e.length?0:e[e.length-1]}this.changed()}}t.default=v})),define("node_modules/ol/src/style/TextPlacement",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={POINT:"point",LINE:"line"}})),define("node_modules/ol/src/style/Text",["require","exports","node_modules/ol/src/style/Fill","node_modules/ol/src/style/TextPlacement","node_modules/ol/src/size"],(function(e,t,s,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class o{constructor(e){const t=e||{};this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=i.toSize(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new s.default({color:"#333"}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:n.default.POINT,this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding}clone(){const e=this.getScale();return new o({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=i.toSize(void 0!==e?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}t.default=o})),define("node_modules/ol/src/render/VectorContext",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{drawCustom(e,t,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t){}drawFeature(e,t){}drawGeometryCollection(e,t){}drawLineString(e,t){}drawMultiLineString(e,t){}drawMultiPoint(e,t){}drawMultiPolygon(e,t){}drawPoint(e,t){}drawPolygon(e,t){}drawText(e,t){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}})),define("node_modules/ol/src/render/canvas/Immediate",["require","exports","node_modules/ol/src/geom/GeometryType","node_modules/ol/src/render/VectorContext","node_modules/ol/src/colorlike","node_modules/ol/src/transform","node_modules/ol/src/render/canvas","node_modules/ol/src/array","node_modules/ol/src/extent","node_modules/ol/src/geom/flat/transform","node_modules/ol/src/geom/SimpleGeometry"],(function(e,t,s,n,i,o,r,a,l,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class c extends n.default{constructor(e,t,s,n,i,r,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=s,this.transform_=n,this.viewRotation_=i,this.squaredTolerance_=r,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=o.create()}drawImages_(e,t,s,n){if(!this.image_)return;const i=d.transform2D(e,t,s,2,this.transform_,this.pixelCoordinates_),r=this.context_,a=this.tmpLocalTransform_,l=r.globalAlpha;1!=this.imageOpacity_&&(r.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.imageRotateWithView_&&(u+=this.viewRotation_);for(let e=0,t=i.length;e<t;e+=2){const t=i[e]-this.imageAnchorX_,s=i[e+1]-this.imageAnchorY_;if(0!==u||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const e=t+this.imageAnchorX_,n=s+this.imageAnchorY_;o.compose(a,e,n,1,1,u,-e,-n),r.setTransform.apply(r,a),r.translate(e,n),r.scale(this.imageScale_[0],this.imageScale_[1]),r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),r.setTransform(1,0,0,1,0,0)}else r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,t,s,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(r.globalAlpha=l)}drawText_(e,t,s,n){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const i=d.transform2D(e,t,s,n,this.transform_,this.pixelCoordinates_),r=this.context_;let a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);t<s;t+=n){const e=i[t]+this.textOffsetX_,s=i[t+1]+this.textOffsetY_;if(0!==a||1!=this.textScale_[0]||1!=this.textScale_[1]){const t=o.compose(this.tmpLocalTransform_,e,s,1,1,a,-e,-s);r.setTransform.apply(r,t),r.translate(e,s),r.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&r.strokeText(this.text_,0,0),this.textFillState_&&r.fillText(this.text_,0,0),r.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&r.strokeText(this.text_,e,s),this.textFillState_&&r.fillText(this.text_,e,s)}}moveToLineTo_(e,t,s,n,i){const o=this.context_,r=d.transform2D(e,t,s,n,this.transform_,this.pixelCoordinates_);o.moveTo(r[0],r[1]);let a=r.length;i&&(a-=2);for(let e=2;e<a;e+=2)o.lineTo(r[e],r[e+1]);return i&&o.closePath(),s}drawRings_(e,t,s,n){for(let i=0,o=s.length;i<o;++i)t=this.moveToLineTo_(e,t,s[i],n,!0);return t}drawCircle(e){if(l.intersects(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=u.transformGeom2D(e,this.transform_,this.pixelCoordinates_),s=t[2]-t[0],n=t[3]-t[1],i=Math.sqrt(s*s+n*n),o=this.context_;o.beginPath(),o.arc(t[0],t[1],i,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case s.default.POINT:this.drawPoint(e);break;case s.default.LINE_STRING:this.drawLineString(e);break;case s.default.POLYGON:this.drawPolygon(e);break;case s.default.MULTI_POINT:this.drawMultiPoint(e);break;case s.default.MULTI_LINE_STRING:this.drawMultiLineString(e);break;case s.default.MULTI_POLYGON:this.drawMultiPolygon(e);break;case s.default.GEOMETRY_COLLECTION:this.drawGeometryCollection(e);break;case s.default.CIRCLE:this.drawCircle(e)}}drawFeature(e,t){const s=t.getGeometryFunction()(e);s&&l.intersects(this.extent_,s.getExtent())&&(this.setStyle(t),this.drawGeometry(s))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let e=0,s=t.length;e<s;++e)this.drawGeometry(t[e])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),s=e.getStride();this.image_&&this.drawImages_(t,0,t.length,s),""!==this.text_&&this.drawText_(t,0,t.length,s)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),s=e.getStride();this.image_&&this.drawImages_(t,0,t.length,s),""!==this.text_&&this.drawText_(t,0,t.length,s)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),l.intersects(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,s=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(s,0,s.length,e.getStride(),!1),t.stroke()}if(""!==this.text_){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(l.intersects(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,s=e.getFlatCoordinates();let n=0;const i=e.getEnds(),o=e.getStride();t.beginPath();for(let e=0,t=i.length;e<t;++e)n=this.moveToLineTo_(s,n,i[e],o,!1);t.stroke()}if(""!==this.text_){const t=e.getFlatMidpoints();this.drawText_(t,0,t.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),l.intersects(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),l.intersects(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,s=e.getOrientedFlatCoordinates();let n=0;const i=e.getEndss(),o=e.getStride();t.beginPath();for(let e=0,t=i.length;e<t;++e){const t=i[e];n=this.drawRings_(s,n,t,o)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,s=this.contextFillState_;s?s.fillStyle!=e.fillStyle&&(s.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,s=this.contextStrokeState_;s?(s.lineCap!=e.lineCap&&(s.lineCap=e.lineCap,t.lineCap=e.lineCap),t.setLineDash&&(a.equals(s.lineDash,e.lineDash)||t.setLineDash(s.lineDash=e.lineDash),s.lineDashOffset!=e.lineDashOffset&&(s.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset)),s.lineJoin!=e.lineJoin&&(s.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),s.lineWidth!=e.lineWidth&&(s.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),s.miterLimit!=e.miterLimit&&(s.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),s.strokeStyle!=e.strokeStyle&&(s.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,s=this.contextTextState_,n=e.textAlign?e.textAlign:r.defaultTextAlign;s?(s.font!=e.font&&(s.font=e.font,t.font=e.font),s.textAlign!=n&&(s.textAlign=n,t.textAlign=n),s.textBaseline!=e.textBaseline&&(s.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=n,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:n,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(e){const t=e.getColor();this.fillState_={fillStyle:i.asColorLike(t||r.defaultFillStyle)}}else this.fillState_=null;if(t){const e=t.getColor(),s=t.getLineCap(),n=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),l=t.getWidth(),d=t.getMiterLimit();this.strokeState_={lineCap:void 0!==s?s:r.defaultLineCap,lineDash:n||r.defaultLineDash,lineDashOffset:o||r.defaultLineDashOffset,lineJoin:void 0!==a?a:r.defaultLineJoin,lineWidth:this.pixelRatio_*(void 0!==l?l:r.defaultLineWidth),miterLimit:void 0!==d?d:r.defaultMiterLimit,strokeStyle:i.asColorLike(e||r.defaultStrokeStyle)}}else this.strokeState_=null}setImageStyle(e){if(e){const t=e.getSize();if(t){const s=e.getAnchor(),n=e.getImage(1),i=e.getOrigin(),o=e.getScaleArray();this.imageAnchorX_=s[0],this.imageAnchorY_=s[1],this.imageHeight_=t[1],this.image_=n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=i[0],this.imageOriginY_=i[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation(),this.imageScale_=[this.pixelRatio_*o[0],this.pixelRatio_*o[1]],this.imageWidth_=t[0]}else this.image_=null}else this.image_=null}setTextStyle(e){if(e){const t=e.getFill();if(t){const e=t.getColor();this.textFillState_={fillStyle:i.asColorLike(e||r.defaultFillStyle)}}else this.textFillState_=null;const s=e.getStroke();if(s){const e=s.getColor(),t=s.getLineCap(),n=s.getLineDash(),o=s.getLineDashOffset(),a=s.getLineJoin(),l=s.getWidth(),d=s.getMiterLimit();this.textStrokeState_={lineCap:void 0!==t?t:r.defaultLineCap,lineDash:n||r.defaultLineDash,lineDashOffset:o||r.defaultLineDashOffset,lineJoin:void 0!==a?a:r.defaultLineJoin,lineWidth:void 0!==l?l:r.defaultLineWidth,miterLimit:void 0!==d?d:r.defaultMiterLimit,strokeStyle:i.asColorLike(e||r.defaultStrokeStyle)}}else this.textStrokeState_=null;const n=e.getFont(),o=e.getOffsetX(),a=e.getOffsetY(),l=e.getRotateWithView(),d=e.getRotation(),u=e.getScaleArray(),c=e.getText(),h=e.getTextAlign(),f=e.getTextBaseline();this.textState_={font:void 0!==n?n:r.defaultFont,textAlign:void 0!==h?h:r.defaultTextAlign,textBaseline:void 0!==f?f:r.defaultTextBaseline},this.text_=void 0!==c?c:"",this.textOffsetX_=void 0!==o?this.pixelRatio_*o:0,this.textOffsetY_=void 0!==a?this.pixelRatio_*a:0,this.textRotateWithView_=void 0!==l&&l,this.textRotation_=void 0!==d?d:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}else this.text_=""}}t.default=c})),define("node_modules/ol/src/render/canvas/BuilderType",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"}})),define("node_modules/ol/src/render/canvas/Instruction",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.closePathInstruction=t.beginPathInstruction=t.strokeInstruction=t.fillInstruction=void 0;const s={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12};t.fillInstruction=[s.FILL],t.strokeInstruction=[s.STROKE],t.beginPathInstruction=[s.BEGIN_PATH],t.closePathInstruction=[s.CLOSE_PATH],t.default=s})),define("node_modules/ol/src/render/canvas/Builder",["require","exports","node_modules/ol/src/render/canvas/Instruction","node_modules/ol/src/geom/GeometryType","node_modules/ol/src/extent/Relationship","node_modules/ol/src/render/VectorContext","node_modules/ol/src/colorlike","node_modules/ol/src/extent","node_modules/ol/src/render/canvas","node_modules/ol/src/array","node_modules/ol/src/geom/flat/inflate"],(function(e,t,s,n,i,o,r,a,l,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class c extends o.default{constructor(e,t,s,n){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=s,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return 1==t?e:e.map((function(e){return e*t}))}appendFlatCoordinates(e,t,s,n,o,r){let l=this.coordinates.length;const d=this.getBufferedMaxExtent();r&&(t+=n);let u=e[t],c=e[t+1];const h=this.tmpCoordinate_;let f,_,g,m=!0;for(f=t+n;f<s;f+=n)h[0]=e[f],h[1]=e[f+1],g=a.coordinateRelationship(d,h),g!==_?(m&&(this.coordinates[l++]=u,this.coordinates[l++]=c),this.coordinates[l++]=h[0],this.coordinates[l++]=h[1],m=!1):g===i.default.INTERSECTING?(this.coordinates[l++]=h[0],this.coordinates[l++]=h[1],m=!1):m=!0,u=h[0],c=h[1],_=g;return(o&&m||f===t+n)&&(this.coordinates[l++]=u,this.coordinates[l++]=c),l}drawCustomCoordinates_(e,t,s,n,i){for(let o=0,r=s.length;o<r;++o){const r=s[o],a=this.appendFlatCoordinates(e,t,r,n,!1,!1);i.push(a),t=r}return t}drawCustom(e,t,i){this.beginGeometry(e,t);const o=e.getType(),r=e.getStride(),a=this.coordinates.length;let l,d,c,h,f;if(o==n.default.MULTI_POLYGON){l=e.getOrientedFlatCoordinates(),h=[];const t=e.getEndss();f=0;for(let e=0,s=t.length;e<s;++e){const s=[];f=this.drawCustomCoordinates_(l,f,t[e],r,s),h.push(s)}this.instructions.push([s.default.CUSTOM,a,h,e,i,u.inflateMultiCoordinatesArray])}else o==n.default.POLYGON||o==n.default.MULTI_LINE_STRING?(c=[],l=o==n.default.POLYGON?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),f=this.drawCustomCoordinates_(l,0,e.getEnds(),r,c),this.instructions.push([s.default.CUSTOM,a,c,e,i,u.inflateCoordinatesArray])):o==n.default.LINE_STRING||o==n.default.MULTI_POINT?(l=e.getFlatCoordinates(),d=this.appendFlatCoordinates(l,0,l.length,r,!1,!1),this.instructions.push([s.default.CUSTOM,a,d,e,i,u.inflateCoordinates])):o==n.default.POINT&&(l=e.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),d=this.coordinates.length,this.instructions.push([s.default.CUSTOM,a,d,e,i]));this.endGeometry(t)}beginGeometry(e,t){const n=e.getExtent();this.beginGeometryInstruction1_=[s.default.BEGIN_GEOMETRY,t,0,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[s.default.BEGIN_GEOMETRY,t,0,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;let t;e.reverse();const n=e.length;let i,o,r=-1;for(t=0;t<n;++t)i=e[t],o=i[0],o==s.default.END_GEOMETRY?r=t:o==s.default.BEGIN_GEOMETRY&&(i[2]=t,d.reverseSubArray(this.hitDetectionInstructions,r,t),r=-1)}setFillStrokeStyle(e,t){const s=this.state;if(e){const t=e.getColor();s.fillStyle=r.asColorLike(t||l.defaultFillStyle)}else s.fillStyle=void 0;if(t){const e=t.getColor();s.strokeStyle=r.asColorLike(e||l.defaultStrokeStyle);const n=t.getLineCap();s.lineCap=void 0!==n?n:l.defaultLineCap;const i=t.getLineDash();s.lineDash=i?i.slice():l.defaultLineDash;const o=t.getLineDashOffset();s.lineDashOffset=o||l.defaultLineDashOffset;const a=t.getLineJoin();s.lineJoin=void 0!==a?a:l.defaultLineJoin;const d=t.getWidth();s.lineWidth=void 0!==d?d:l.defaultLineWidth;const u=t.getMiterLimit();s.miterLimit=void 0!==u?u:l.defaultMiterLimit,s.lineWidth>this.maxLineWidth&&(this.maxLineWidth=s.lineWidth,this.bufferedMaxExtent_=null)}else s.strokeStyle=void 0,s.lineCap=void 0,s.lineDash=null,s.lineDashOffset=void 0,s.lineJoin=void 0,s.lineWidth=void 0,s.miterLimit=void 0}createFill(e){const t=e.fillStyle,n=[s.default.SET_FILL_STYLE,t];return"string"!=typeof t&&n.push(!0),n}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[s.default.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const s=e.fillStyle;"string"==typeof s&&e.currentFillStyle==s||(void 0!==s&&this.instructions.push(t.call(this,e)),e.currentFillStyle=s)}updateStrokeStyle(e,t){const s=e.strokeStyle,n=e.lineCap,i=e.lineDash,o=e.lineDashOffset,r=e.lineJoin,a=e.lineWidth,l=e.miterLimit;(e.currentStrokeStyle!=s||e.currentLineCap!=n||i!=e.currentLineDash&&!d.equals(e.currentLineDash,i)||e.currentLineDashOffset!=o||e.currentLineJoin!=r||e.currentLineWidth!=a||e.currentMiterLimit!=l)&&(void 0!==s&&t.call(this,e),e.currentStrokeStyle=s,e.currentLineCap=n,e.currentLineDash=i,e.currentLineDashOffset=o,e.currentLineJoin=r,e.currentLineWidth=a,e.currentMiterLimit=l)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[s.default.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=a.clone(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;a.buffer(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}t.default=c})),define("node_modules/ol/src/render/canvas/ImageBuilder",["require","exports","node_modules/ol/src/render/canvas/Builder","node_modules/ol/src/render/canvas/Instruction"],(function(e,t,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i extends s.default{constructor(e,t,s,n){super(e,t,s,n),this.declutterGroups_=null,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0}drawCoordinates_(e,t,s,n){return this.appendFlatCoordinates(e,t,s,n,!1,!1)}drawPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const s=e.getFlatCoordinates(),i=e.getStride(),o=this.coordinates.length,r=this.drawCoordinates_(s,0,s.length,i);this.instructions.push([n.default.DRAW_IMAGE,o,r,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,this.declutterGroups_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_)]),this.hitDetectionInstructions.push([n.default.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t)}drawMultiPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const s=e.getFlatCoordinates(),i=e.getStride(),o=this.coordinates.length,r=this.drawCoordinates_(s,0,s.length,i);this.instructions.push([n.default.DRAW_IMAGE,o,r,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,this.declutterGroups_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_)]),this.hitDetectionInstructions.push([n.default.DRAW_IMAGE,o,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const s=e.getAnchor(),n=e.getSize(),i=e.getHitDetectionImage(),o=e.getImage(this.pixelRatio),r=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=s[0],this.anchorY_=s[1],this.declutterGroups_=t,this.hitDetectionImage_=i,this.image_=o,this.height_=n[1],this.opacity_=e.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=n[0]}}t.default=i})),define("node_modules/ol/src/render/canvas/LineStringBuilder",["require","exports","node_modules/ol/src/render/canvas/Builder","node_modules/ol/src/render/canvas/Instruction"],(function(e,t,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i extends s.default{constructor(e,t,s,n){super(e,t,s,n)}drawFlatCoordinates_(e,t,s,i){const o=this.coordinates.length,r=this.appendFlatCoordinates(e,t,s,i,!1,!1),a=[n.default.MOVE_TO_LINE_TO,o,r];return this.instructions.push(a),this.hitDetectionInstructions.push(a),s}drawLineString(e,t){const s=this.state,i=s.strokeStyle,o=s.lineWidth;if(void 0===i||void 0===o)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([n.default.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,s.lineDash,s.lineDashOffset],n.beginPathInstruction);const r=e.getFlatCoordinates(),a=e.getStride();this.drawFlatCoordinates_(r,0,r.length,a),this.hitDetectionInstructions.push(n.strokeInstruction),this.endGeometry(t)}drawMultiLineString(e,t){const s=this.state,i=s.strokeStyle,o=s.lineWidth;if(void 0===i||void 0===o)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([n.default.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,s.lineDash,s.lineDashOffset],n.beginPathInstruction);const r=e.getEnds(),a=e.getFlatCoordinates(),l=e.getStride();let d=0;for(let e=0,t=r.length;e<t;++e)d=this.drawFlatCoordinates_(a,d,r[e],l);this.hitDetectionInstructions.push(n.strokeInstruction),this.endGeometry(t)}finish(){const e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(n.strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(n.strokeInstruction),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(n.beginPathInstruction)}}t.default=i})),define("node_modules/ol/src/render/canvas/PolygonBuilder",["require","exports","node_modules/ol/src/render/canvas/Builder","node_modules/ol/src/render/canvas/Instruction","node_modules/ol/src/render/canvas","node_modules/ol/src/geom/flat/simplify"],(function(e,t,s,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends s.default{constructor(e,t,s,n){super(e,t,s,n)}drawFlatCoordinatess_(e,t,s,i){const o=this.state,r=void 0!==o.fillStyle,a=void 0!==o.strokeStyle,l=s.length;this.instructions.push(n.beginPathInstruction),this.hitDetectionInstructions.push(n.beginPathInstruction);for(let o=0;o<l;++o){const r=s[o],l=this.coordinates.length,d=this.appendFlatCoordinates(e,t,r,i,!0,!a),u=[n.default.MOVE_TO_LINE_TO,l,d];this.instructions.push(u),this.hitDetectionInstructions.push(u),a&&(this.instructions.push(n.closePathInstruction),this.hitDetectionInstructions.push(n.closePathInstruction)),t=r}return r&&(this.instructions.push(n.fillInstruction),this.hitDetectionInstructions.push(n.fillInstruction)),a&&(this.instructions.push(n.strokeInstruction),this.hitDetectionInstructions.push(n.strokeInstruction)),t}drawCircle(e,t){const s=this.state,o=s.fillStyle,r=s.strokeStyle;if(void 0===o&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==s.fillStyle&&this.hitDetectionInstructions.push([n.default.SET_FILL_STYLE,i.defaultFillStyle]),void 0!==s.strokeStyle&&this.hitDetectionInstructions.push([n.default.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,s.lineDash,s.lineDashOffset]);const a=e.getFlatCoordinates(),l=e.getStride(),d=this.coordinates.length;this.appendFlatCoordinates(a,0,a.length,l,!1,!1);const u=[n.default.CIRCLE,d];this.instructions.push(n.beginPathInstruction,u),this.hitDetectionInstructions.push(n.beginPathInstruction,u),void 0!==s.fillStyle&&(this.instructions.push(n.fillInstruction),this.hitDetectionInstructions.push(n.fillInstruction)),void 0!==s.strokeStyle&&(this.instructions.push(n.strokeInstruction),this.hitDetectionInstructions.push(n.strokeInstruction)),this.endGeometry(t)}drawPolygon(e,t){const s=this.state,o=s.fillStyle,r=s.strokeStyle;if(void 0===o&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==s.fillStyle&&this.hitDetectionInstructions.push([n.default.SET_FILL_STYLE,i.defaultFillStyle]),void 0!==s.strokeStyle&&this.hitDetectionInstructions.push([n.default.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,s.lineDash,s.lineDashOffset]);const a=e.getEnds(),l=e.getOrientedFlatCoordinates(),d=e.getStride();this.drawFlatCoordinatess_(l,0,a,d),this.endGeometry(t)}drawMultiPolygon(e,t){const s=this.state,o=s.fillStyle,r=s.strokeStyle;if(void 0===o&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==s.fillStyle&&this.hitDetectionInstructions.push([n.default.SET_FILL_STYLE,i.defaultFillStyle]),void 0!==s.strokeStyle&&this.hitDetectionInstructions.push([n.default.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,s.lineDash,s.lineDashOffset]);const a=e.getEndss(),l=e.getOrientedFlatCoordinates(),d=e.getStride();let u=0;for(let e=0,t=a.length;e<t;++e)u=this.drawFlatCoordinatess_(l,u,a[e],d);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(0!==e){const t=this.coordinates;for(let s=0,n=t.length;s<n;++s)t[s]=o.snap(t[s],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)}}t.default=r})),define("node_modules/ol/src/geom/flat/straightchunk",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchingChunk=void 0,t.matchingChunk=function(e,t,s,n,i){let o,r,a,l,d,u,c,h,f,_,g=s,m=s,p=0,y=0,v=s;for(r=s;r<n;r+=i){const s=t[r],n=t[r+1];void 0!==d&&(f=s-d,_=n-u,l=Math.sqrt(f*f+_*_),void 0!==c&&(y+=a,o=Math.acos((c*f+h*_)/(a*l)),o>e&&(y>p&&(p=y,g=v,m=r),y=0,v=r-i)),a=l,c=f,h=_),d=s,u=n}return y+=l,y>p?[v,r]:[g,m]}})),define("node_modules/ol/src/render/canvas/TextBuilder",["require","exports","node_modules/ol/src/render/canvas/Builder","node_modules/ol/src/render/canvas/Instruction","node_modules/ol/src/geom/GeometryType","node_modules/ol/src/style/TextPlacement","node_modules/ol/src/colorlike","node_modules/ol/src/render/canvas","node_modules/ol/src/util","node_modules/ol/src/extent","node_modules/ol/src/geom/flat/straightchunk"],(function(e,t,s,n,i,o,r,a,l,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_ALIGN=void 0,t.TEXT_ALIGN={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class c extends s.default{constructor(e,t,s,n){super(e,t,s,n),this.declutterGroups_,this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_=""}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t){const s=this.textFillState_,r=this.textStrokeState_,l=this.textState_;if(""===this.text_||!l||!s&&!r)return;let c=this.coordinates.length;const h=e.getType();let f,_,g=null,m=2,p=e.getStride();if(l.placement===o.default.LINE){if(!d.intersects(this.getBufferedMaxExtent(),e.getExtent()))return;let s;if(g=e.getFlatCoordinates(),h==i.default.LINE_STRING)s=[g.length];else if(h==i.default.MULTI_LINE_STRING)s=e.getEnds();else if(h==i.default.POLYGON)s=e.getEnds().slice(0,1);else if(h==i.default.MULTI_POLYGON){const t=e.getEndss();for(s=[],f=0,_=t.length;f<_;++f)s.push(t[f][0])}this.beginGeometry(e,t);const n=l.textAlign;let o,r=0;for(let e=0,t=s.length;e<t;++e){if(null==n){const t=u.matchingChunk(l.maxAngle,g,r,s[e],p);r=t[0],o=t[1]}else o=s[e];for(f=r;f<o;f+=p)this.coordinates.push(g[f],g[f+1]);m=this.coordinates.length,r=s[e];const t=this.declutterGroups_?0===e?this.declutterGroups_[0]:[].concat(this.declutterGroups_[0]):null;this.drawChars_(c,m,t),c=m}this.endGeometry(t)}else{let s=null;switch(l.overflow||(s=[]),h){case i.default.POINT:case i.default.MULTI_POINT:g=e.getFlatCoordinates(),m=g.length;break;case i.default.LINE_STRING:g=e.getFlatMidpoint();break;case i.default.CIRCLE:g=e.getCenter();break;case i.default.MULTI_LINE_STRING:g=e.getFlatMidpoints(),p=2,m=g.length;break;case i.default.POLYGON:g=e.getFlatInteriorPoint(),l.overflow||s.push(g[2]/this.resolution),p=3;break;case i.default.MULTI_POLYGON:const t=e.getFlatInteriorPoints();for(g=[],f=0,_=t.length;f<_;f+=3)l.overflow||s.push(t[f+2]/this.resolution),g.push(t[f],t[f+1]);if(p=2,m=g.length,0==m)return}m=this.appendFlatCoordinates(g,0,m,p,!1,!1),this.saveTextStates_(),(l.backgroundFill||l.backgroundStroke)&&(this.setFillStrokeStyle(l.backgroundFill,l.backgroundStroke),l.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),l.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t);let o=l.padding;if(o!=a.defaultPadding&&(l.scale[0]<0||l.scale[1]<0)){let e=l.padding[0],t=l.padding[1],s=l.padding[2],n=l.padding[3];l.scale[0]<0&&(t=-t,n=-n),l.scale[1]<0&&(e=-e,s=-s),o=[e,t,s,n]}const r=this.pixelRatio;this.instructions.push([n.default.DRAW_IMAGE,c,m,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,o==a.defaultPadding?a.defaultPadding:o.map((function(e){return e*r})),!!l.backgroundFill,!!l.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,s]);const d=1/r;this.hitDetectionInstructions.push([n.default.DRAW_IMAGE,c,m,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[d,d],NaN,o,!!l.backgroundFill,!!l.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,s]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,s=this.textFillState_,n=this.strokeKey_;e&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const i=this.textKey_;i in this.textStates||(this.textStates[i]={font:t.font,textAlign:t.textAlign||a.defaultTextAlign,textBaseline:t.textBaseline||a.defaultTextBaseline,scale:t.scale});const o=this.fillKey_;s&&(o in this.fillStates||(this.fillStates[o]={fillStyle:s.fillStyle}))}drawChars_(e,s,i){const o=this.textStrokeState_,r=this.textState_,a=this.strokeKey_,l=this.textKey_,d=this.fillKey_;this.saveTextStates_();const u=this.pixelRatio,c=t.TEXT_ALIGN[r.textBaseline],h=this.textOffsetY_*u,f=this.text_,_=o?o.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([n.default.DRAW_CHARS,e,s,c,i,r.overflow,d,r.maxAngle,u,h,a,_*u,f,l,1]),this.hitDetectionInstructions.push([n.default.DRAW_CHARS,e,s,c,i,r.overflow,d,r.maxAngle,1,h,a,_,f,l,1/u])}setTextStyle(e,t){let s,n,i;if(e){this.declutterGroups_=t;const o=e.getFill();o?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=r.asColorLike(o.getColor()||a.defaultFillStyle)):(n=null,this.textFillState_=n);const d=e.getStroke();if(d){i=this.textStrokeState_,i||(i={},this.textStrokeState_=i);const e=d.getLineDash(),t=d.getLineDashOffset(),s=d.getWidth(),n=d.getMiterLimit();i.lineCap=d.getLineCap()||a.defaultLineCap,i.lineDash=e?e.slice():a.defaultLineDash,i.lineDashOffset=void 0===t?a.defaultLineDashOffset:t,i.lineJoin=d.getLineJoin()||a.defaultLineJoin,i.lineWidth=void 0===s?a.defaultLineWidth:s,i.miterLimit=void 0===n?a.defaultMiterLimit:n,i.strokeStyle=r.asColorLike(d.getColor()||a.defaultStrokeStyle)}else i=null,this.textStrokeState_=i;s=this.textState_;const u=e.getFont()||a.defaultFont;a.registerFont(u);const c=e.getScaleArray();s.overflow=e.getOverflow(),s.font=u,s.maxAngle=e.getMaxAngle(),s.placement=e.getPlacement(),s.textAlign=e.getTextAlign(),s.textBaseline=e.getTextBaseline()||a.defaultTextBaseline,s.backgroundFill=e.getBackgroundFill(),s.backgroundStroke=e.getBackgroundStroke(),s.padding=e.getPadding()||a.defaultPadding,s.scale=void 0===c?[1,1]:c;const h=e.getOffsetX(),f=e.getOffsetY(),_=e.getRotateWithView(),g=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=void 0===h?0:h,this.textOffsetY_=void 0===f?0:f,this.textRotateWithView_=void 0!==_&&_,this.textRotation_=void 0===g?0:g,this.strokeKey_=i?("string"==typeof i.strokeStyle?i.strokeStyle:l.getUid(i.strokeStyle))+i.lineCap+i.lineDashOffset+"|"+i.lineWidth+i.lineJoin+i.miterLimit+"["+i.lineDash.join()+"]":"",this.textKey_=s.font+s.scale+(s.textAlign||"?")+(s.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+l.getUid(n.fillStyle):""}else this.text_=""}}t.default=c})),define("node_modules/ol/src/render/canvas/BuilderGroup",["require","exports","node_modules/ol/src/render/canvas/Builder","node_modules/ol/src/render/canvas/ImageBuilder","node_modules/ol/src/render/canvas/LineStringBuilder","node_modules/ol/src/render/canvas/PolygonBuilder","node_modules/ol/src/render/canvas/TextBuilder"],(function(e,t,s,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a={Circle:o.default,Default:s.default,Image:n.default,LineString:i.default,Polygon:o.default,Text:r.default};t.default=class{constructor(e,t,s,n,i){this.declutter_=i,this.declutterGroups_=null,this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=n,this.resolution_=s,this.buildersByZIndex_={}}addDeclutter(e){let t=null;return this.declutter_&&(e?(t=this.declutterGroups_,t[0][0]++):(t=[[1]],this.declutterGroups_=t)),t}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const s=this.buildersByZIndex_[t];for(const n in s){const i=s[n].finish();e[t][n]=i}}return e}getBuilder(e,t){const s=void 0!==e?e.toString():"0";let n=this.buildersByZIndex_[s];void 0===n&&(n={},this.buildersByZIndex_[s]=n);let i=n[t];if(void 0===i){i=new(0,a[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[t]=i}return i}}})),define("node_modules/ol/src/renderer/vector",["require","exports","node_modules/ol/src/render/canvas/BuilderType","node_modules/ol/src/geom/GeometryType","node_modules/ol/src/ImageState","node_modules/ol/src/util"],(function(e,t,s,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderFeature=t.getTolerance=t.getSquaredTolerance=t.defaultOrder=void 0;const r={Point:function(e,t,n,o){const r=n.getImage();if(r){if(r.getImageState()!=i.default.LOADED)return;const a=e.getBuilder(n.getZIndex(),s.default.IMAGE);a.setImageStyle(r,e.addDeclutter(!1)),a.drawPoint(t,o)}const a=n.getText();if(a){const i=e.getBuilder(n.getZIndex(),s.default.TEXT);i.setTextStyle(a,e.addDeclutter(!!r)),i.drawText(t,o)}},LineString:function(e,t,n,i){const o=n.getStroke();if(o){const r=e.getBuilder(n.getZIndex(),s.default.LINE_STRING);r.setFillStrokeStyle(null,o),r.drawLineString(t,i)}const r=n.getText();if(r){const o=e.getBuilder(n.getZIndex(),s.default.TEXT);o.setTextStyle(r,e.addDeclutter(!1)),o.drawText(t,i)}},Polygon:function(e,t,n,i){const o=n.getFill(),r=n.getStroke();if(o||r){const a=e.getBuilder(n.getZIndex(),s.default.POLYGON);a.setFillStrokeStyle(o,r),a.drawPolygon(t,i)}const a=n.getText();if(a){const o=e.getBuilder(n.getZIndex(),s.default.TEXT);o.setTextStyle(a,e.addDeclutter(!1)),o.drawText(t,i)}},MultiPoint:function(e,t,n,o){const r=n.getImage();if(r){if(r.getImageState()!=i.default.LOADED)return;const a=e.getBuilder(n.getZIndex(),s.default.IMAGE);a.setImageStyle(r,e.addDeclutter(!1)),a.drawMultiPoint(t,o)}const a=n.getText();if(a){const i=e.getBuilder(n.getZIndex(),s.default.TEXT);i.setTextStyle(a,e.addDeclutter(!!r)),i.drawText(t,o)}},MultiLineString:function(e,t,n,i){const o=n.getStroke();if(o){const r=e.getBuilder(n.getZIndex(),s.default.LINE_STRING);r.setFillStrokeStyle(null,o),r.drawMultiLineString(t,i)}const r=n.getText();if(r){const o=e.getBuilder(n.getZIndex(),s.default.TEXT);o.setTextStyle(r,e.addDeclutter(!1)),o.drawText(t,i)}},MultiPolygon:function(e,t,n,i){const o=n.getFill(),r=n.getStroke();if(r||o){const a=e.getBuilder(n.getZIndex(),s.default.POLYGON);a.setFillStrokeStyle(o,r),a.drawMultiPolygon(t,i)}const a=n.getText();if(a){const o=e.getBuilder(n.getZIndex(),s.default.TEXT);o.setTextStyle(a,e.addDeclutter(!1)),o.drawText(t,i)}},GeometryCollection:function(e,t,s,n){const i=t.getGeometriesArray();let o,a;for(o=0,a=i.length;o<a;++o){(0,r[i[o].getType()])(e,i[o],s,n)}},Circle:function(e,t,n,i){const o=n.getFill(),r=n.getStroke();if(o||r){const a=e.getBuilder(n.getZIndex(),s.default.CIRCLE);a.setFillStrokeStyle(o,r),a.drawCircle(t,i)}const a=n.getText();if(a){const o=e.getBuilder(n.getZIndex(),s.default.TEXT);o.setTextStyle(a,e.addDeclutter(!1)),o.drawText(t,i)}}};function a(e,t){return.5*e/t}function l(e,t,i,o){if(t.getType()==n.default.GEOMETRY_COLLECTION){const s=t.getGeometries();for(let t=0,n=s.length;t<n;++t)l(e,s[t],i,o);return}e.getBuilder(i.getZIndex(),s.default.DEFAULT).drawCustom(t,o,i.getRenderer())}t.defaultOrder=function(e,t){return parseInt(o.getUid(e),10)-parseInt(o.getUid(t),10)},t.getSquaredTolerance=function(e,t){const s=a(e,t);return s*s},t.getTolerance=a,t.renderFeature=function(e,t,s,n,o,a){let d=!1;const u=s.getImage();if(u){let e=u.getImageState();e==i.default.LOADED||e==i.default.ERROR?u.unlistenImageChange(o):(e==i.default.IDLE&&u.load(),e=u.getImageState(),u.listenImageChange(o),d=!0)}return function(e,t,s,n,i){const o=s.getGeometryFunction()(t);if(!o)return;const a=o.simplifyTransformed(n,i);if(s.getRenderer())l(e,a,s,t);else{(0,r[a.getType()])(e,a,s,t)}}(e,t,s,n,a),d}})),define("node_modules/ol/src/render/EventType",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}})),define("node_modules/ol/src/CollectionEventType",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={ADD:"add",REMOVE:"remove"}})),define("node_modules/ol/src/Collection",["require","exports","node_modules/ol/src/AssertionError","node_modules/ol/src/Object","node_modules/ol/src/CollectionEventType","node_modules/ol/src/events/Event"],(function(e,t,s,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionEvent=void 0;const r="length";class a extends o.default{constructor(e,t,s){super(e),this.element=t,this.index=s}}t.CollectionEvent=a;class l extends n.default{constructor(e,t){super();const s=t||{};if(this.unique_=!!s.unique,this.array_=e||[],this.unique_)for(let e=0,t=this.array_.length;e<t;++e)this.assertUnique_(this.array_[e],e);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,s=e.length;t<s;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let s=0,n=t.length;s<n;++s)e(t[s],s,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(r)}insertAt(e,t){this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new a(i.default.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let s=0,n=t.length;s<n;++s)if(t[s]===e)return this.removeAt(s)}removeAt(e){const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new a(i.default.REMOVE,t,e)),t}setAt(e,t){const s=this.getLength();if(e<s){this.unique_&&this.assertUnique_(t,e);const s=this.array_[e];this.array_[e]=t,this.dispatchEvent(new a(i.default.REMOVE,s,e)),this.dispatchEvent(new a(i.default.ADD,t,e))}else{for(let t=s;t<e;++t)this.insertAt(t,void 0);this.insertAt(e,t)}}updateLength_(){this.set(r,this.array_.length)}assertUnique_(e,t){for(let n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===e&&n!==t)throw new s.default(58)}}t.default=l})),define("node_modules/ol/src/layer/Property",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source"}})),define("node_modules/ol/src/source/State",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"}})),define("node_modules/ol/src/source/Source",["require","exports","node_modules/ol/src/Object","node_modules/ol/src/source/State","node_modules/ol/src/util","node_modules/ol/src/proj"],(function(e,t,s,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends s.default{constructor(e){super(),this.projection_=o.get(e.projection),this.attributions_=a(e.attributions),this.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,this.loading=!1,this.state_=void 0!==e.state?e.state:n.default.READY,this.wrapX_=void 0!==e.wrapX&&e.wrapX}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection_}getResolutions(){return i.abstract()}getState(){return this.state_}getWrapX(){return this.wrapX_}getContextOptions(){}refresh(){this.changed()}setAttributions(e){this.attributions_=a(e),this.changed()}setState(e){this.state_=e,this.changed()}}function a(e){return e?Array.isArray(e)?function(t){return e}:"function"==typeof e?e:function(t){return[e]}:null}t.default=r})),define("node_modules/ol/src/TileState",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}})),define("node_modules/ol/src/easing",["require","exports"],(function(e,t){"use strict";function s(e){return Math.pow(e,3)}function n(e){return 3*e*e-2*e*e*e}Object.defineProperty(t,"__esModule",{value:!0}),t.upAndDown=t.linear=t.inAndOut=t.easeOut=t.easeIn=void 0,t.easeIn=s,t.easeOut=function(e){return 1-s(1-e)},t.inAndOut=n,t.linear=function(e){return e},t.upAndDown=function(e){return e<.5?n(2*e):1-n(2*(e-.5))}})),define("node_modules/ol/src/Tile",["require","exports","node_modules/ol/src/events/Target","node_modules/ol/src/events/EventType","node_modules/ol/src/TileState","node_modules/ol/src/util","node_modules/ol/src/easing"],(function(e,t,s,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class a extends s.default{constructor(e,t,s){super();const n=s||{};this.tileCoord=e,this.state=t,this.interimTile=null,this.hifi=!0,this.key="",this.transition_=void 0===n.transition?250:n.transition,this.transitionStarts_={}}changed(){this.dispatchEvent(n.default.CHANGE)}release(){}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let e=this.interimTile;do{if(e.getState()==i.default.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){if(!this.interimTile)return;let e=this.interimTile,t=this;do{if(e.getState()==i.default.LOADED){e.interimTile=null;break}e.getState()==i.default.LOADING?t=e:e.getState()==i.default.IDLE?t.interimTile=e.interimTile:t=e,e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==i.default.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){o.abstract()}getAlpha(e,t){if(!this.transition_)return 1;let s=this.transitionStarts_[e];if(s){if(-1===s)return 1}else s=t,this.transitionStarts_[e]=s;const n=t-s+1e3/60;return n>=this.transition_?1:r.easeIn(n/this.transition_)}inTransition(e){return!!this.transition_&&-1!==this.transitionStarts_[e]}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}t.default=a})),define("node_modules/ol/src/structs/LRUCache",["require","exports","node_modules/ol/src/asserts"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const n=this.entries_[e];return s.assert(void 0!==n,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(e){const t=this.entries_[e];return s.assert(void 0!==t,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t,s=0;for(t=this.newest_;t;t=t.older)e[s++]=t.key_;return e}getValues(){const e=new Array(this.count_);let t,s=0;for(t=this.newest_;t;t=t.older)e[s++]=t.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){s.assert(!(e in this.entries_),16);const n={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_}setSize(e){this.highWaterMark=e}}})),define("node_modules/ol/src/TileCache",["require","exports","node_modules/ol/src/structs/LRUCache","node_modules/ol/src/tilecoord"],(function(e,t,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i extends s.default{expireCache(e){for(;this.canExpireCache();){if(this.peekLast().getKey()in e)break;this.pop().release()}}pruneExceptNewestZ(){if(0===this.getCount())return;const e=this.peekFirstKey(),t=n.fromKey(e)[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(n.getKey(e.tileCoord)),e.release())}.bind(this))}}t.default=i})),define("node_modules/ol/src/tilegrid",["require","exports","node_modules/ol/src/extent/Corner","node_modules/ol/src/tilegrid/TileGrid","node_modules/ol/src/proj/Units","node_modules/ol/src/tilegrid/common","node_modules/ol/src/proj","node_modules/ol/src/extent","node_modules/ol/src/size"],(function(e,t,s,n,i,o,r,a,l){"use strict";function d(e,t,i,o){const r=void 0!==o?o:s.default.TOP_LEFT,l=u(e,t,i);return new n.default({extent:e,origin:a.getCorner(e,r),resolutions:l,tileSize:i})}function u(e,t,s,n){const i=void 0!==t?t:o.DEFAULT_MAX_ZOOM,r=a.getHeight(e),d=a.getWidth(e),u=l.toSize(void 0!==s?s:o.DEFAULT_TILE_SIZE),c=n>0?n:Math.max(d/u[0],r/u[1]),h=i+1,f=new Array(h);for(let e=0;e<h;++e)f[e]=c/Math.pow(2,e);return f}function c(e,t,s,n){return d(h(e),t,s,n)}function h(e){let t=(e=r.get(e)).getExtent();if(!t){const s=180*r.METERS_PER_UNIT[i.default.DEGREES]/e.getMetersPerUnit();t=a.createOrUpdate(-s,-s,s,s)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.extentFromProjection=t.createForProjection=t.createXYZ=t.createForExtent=t.wrapX=t.getForProjection=void 0,t.getForProjection=function(e){let t=e.getDefaultTileGrid();return t||(t=c(e),e.setDefaultTileGrid(t)),t},t.wrapX=function(e,t,s){const n=t[0],i=e.getTileCoordCenter(t),o=h(s);if(a.containsCoordinate(o,i))return t;{const t=a.getWidth(o),s=Math.ceil((o[0]-i[0])/t);return i[0]+=t*s,e.getTileCoordForCoordAndZ(i,n)}},t.createForExtent=d,t.createXYZ=function(e){const t=e||{},s=t.extent||r.get("EPSG:3857").getExtent(),i={extent:s,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:u(s,t.maxZoom,t.tileSize,t.maxResolution)};return new n.default(i)},t.createForProjection=c,t.extentFromProjection=h})),define("node_modules/ol/src/source/Tile",["require","exports","node_modules/ol/src/events/Event","node_modules/ol/src/source/Source","node_modules/ol/src/TileCache","node_modules/ol/src/TileState","node_modules/ol/src/util","node_modules/ol/src/proj","node_modules/ol/src/tilecoord","node_modules/ol/src/tilegrid","node_modules/ol/src/size"],(function(e,t,s,n,i,o,r,a,l,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileSourceEvent=void 0;class c extends n.default{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX}),this.opaque_=void 0!==e.opaque&&e.opaque,this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;const t=[256,256],s=e.tileGrid;s&&u.toSize(s.getTileSize(s.getMinZoom()),t),this.tileCache=new i.default(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const s=this.getTileCacheForProjection(e);s&&s.expireCache(t)}forEachLoadedTile(e,t,s,n){const i=this.getTileCacheForProjection(e);if(!i)return!1;let r,a,d,u=!0;for(let e=s.minX;e<=s.maxX;++e)for(let c=s.minY;c<=s.maxY;++c)a=l.getKeyZXY(t,e,c),d=!1,i.containsKey(a)&&(r=i.get(a),d=r.getState()===o.default.LOADED,d&&(d=!1!==n(r))),d||(u=!1);return u}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(){return this.tileGrid.getResolutions()}getTile(e,t,s,n,i){return r.abstract()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:d.getForProjection(e)}getTileCacheForProjection(e){const t=this.getProjection();return t&&!a.equivalent(t,e)?null:this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,s){const n=this.getTileGridForProjection(s),i=this.getTilePixelRatio(t),o=u.toSize(n.getTileSize(e),this.tmpSize);return 1==i?o:u.scale(o,i,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const s=void 0!==t?t:this.getProjection(),n=this.getTileGridForProjection(s);return this.getWrapX()&&s.isGlobal()&&(e=d.wrapX(n,e,s)),l.withinExtentAndZ(e,n)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const s=this.getTileCacheForProjection(t);e>s.highWaterMark&&(s.highWaterMark=e)}useTile(e,t,s,n){}}class h extends s.default{constructor(e,t){super(e),this.tile=t}}t.TileSourceEvent=h,t.default=c})),define("node_modules/ol/src/ImageBase",["require","exports","node_modules/ol/src/events/Target","node_modules/ol/src/events/EventType","node_modules/ol/src/util"],(function(e,t,s,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class o extends s.default{constructor(e,t,s,n){super(),this.extent=e,this.pixelRatio_=s,this.resolution=t,this.state=n}changed(){this.dispatchEvent(n.default.CHANGE)}getExtent(){return this.extent}getImage(){return i.abstract()}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){i.abstract()}}t.default=o})),define("node_modules/ol/src/Image",["require","exports","node_modules/ol/src/events/EventType","node_modules/ol/src/ImageBase","node_modules/ol/src/ImageState","node_modules/ol/src/has","node_modules/ol/src/extent","node_modules/ol/src/events"],(function(e,t,s,n,i,o,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listenImage=void 0;class l extends n.default{constructor(e,t,s,n,o,r){super(e,t,s,i.default.IDLE),this.src_=n,this.image_=new Image,null!==o&&(this.image_.crossOrigin=o),this.unlisten_=null,this.state=i.default.IDLE,this.imageLoadFunction_=r}getImage(){return this.image_}handleImageError_(){this.state=i.default.ERROR,this.unlistenImage_(),this.changed()}handleImageLoad_(){void 0===this.resolution&&(this.resolution=r.getHeight(this.extent)/this.image_.height),this.state=i.default.LOADED,this.unlistenImage_(),this.changed()}load(){this.state!=i.default.IDLE&&this.state!=i.default.ERROR||(this.state=i.default.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=d(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}setImage(e){this.image_=e}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function d(e,t,n){const i=e;if(i.src&&o.IMAGE_DECODE){const e=i.decode();let s=!0;const o=function(){s=!1};return e.then((function(){s&&t()})).catch((function(e){s&&("EncodingError"===e.name&&"Invalid image type."===e.message?t():n())})),o}const r=[a.listenOnce(i,s.default.LOAD,t),a.listenOnce(i,s.default.ERROR,n)];return function(){r.forEach(a.unlistenByKey)}}t.listenImage=d,t.default=l})),define("node_modules/ol/src/renderer/Layer",["require","exports","node_modules/ol/src/events/EventType","node_modules/ol/src/ImageState","node_modules/ol/src/Observable","node_modules/ol/src/source/State","node_modules/ol/src/util"],(function(e,t,s,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class a extends i.default{constructor(e){super(),this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e}getFeatures(e){return r.abstract()}prepareFrame(e){return r.abstract()}renderFrame(e,t){return r.abstract()}loadedTileCallback(e,t,s){e[t]||(e[t]={}),e[t][s.tileCoord.toString()]=s}createLoadedTileFinder(e,t,s){return function(n,i){const o=this.loadedTileCallback.bind(this,s,n);return e.forEachLoadedTile(t,n,i,o)}.bind(this)}forEachFeatureAtCoordinate(e,t,s,n,i){}getDataAtPixel(e,t,s){return r.abstract()}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){e.target.getState()===n.default.LOADED&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=n.default.LOADED&&t!=n.default.ERROR&&e.addEventListener(s.default.CHANGE,this.boundHandleImageChange_),t==n.default.IDLE&&(e.load(),t=e.getState()),t==n.default.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e.getVisible()&&e.getSourceState()==o.default.READY&&e.changed()}}t.default=a})),define("node_modules/ol/src/ViewHint",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={ANIMATING:0,INTERACTING:1}})),define("node_modules/ol/src/ViewProperty",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}})),define("node_modules/ol/src/centerconstraint",["require","exports","node_modules/ol/src/math"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.none=t.createExtent=void 0,t.createExtent=function(e,t,n){return function(i,o,r,a){if(i){const l=t?0:r[0]*o,d=t?0:r[1]*o;let u=e[0]+l/2,c=e[2]-l/2,h=e[1]+d/2,f=e[3]-d/2;u>c&&(u=(c+u)/2,c=u),h>f&&(h=(f+h)/2,f=h);let _=s.clamp(i[0],u,c),g=s.clamp(i[1],h,f);const m=30*o;return a&&n&&(_+=-m*Math.log(1+Math.max(0,u-i[0])/m)+m*Math.log(1+Math.max(0,i[0]-c)/m),g+=-m*Math.log(1+Math.max(0,h-i[1])/m)+m*Math.log(1+Math.max(0,i[1]-f)/m)),[_,g]}}},t.none=function(e){return e}})),define("node_modules/ol/src/resolutionconstraint",["require","exports","node_modules/ol/src/math","node_modules/ol/src/extent","node_modules/ol/src/array"],(function(e,t,s,n,i){"use strict";function o(e,t,s,i){const o=n.getWidth(t)/s[0],r=n.getHeight(t)/s[1];return i?Math.min(e,Math.max(o,r)):Math.min(e,Math.min(o,r))}function r(e,t,n){let i=Math.min(e,t);return i*=Math.log(1+50*Math.max(0,e/t-1))/50+1,n&&(i=Math.max(i,n),i/=Math.log(1+50*Math.max(0,n/e-1))/50+1),s.clamp(i,n/2,2*t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createMinMaxResolution=t.createSnapToPower=t.createSnapToResolutions=void 0,t.createSnapToResolutions=function(e,t,n,a){return function(l,d,u,c){if(void 0!==l){const h=e[0],f=e[e.length-1],_=n?o(h,n,u,a):h;if(c){return void 0===t||t?r(l,_,f):s.clamp(l,f,_)}const g=Math.min(_,l),m=Math.floor(i.linearFindNearest(e,g,d));return e[m]>_&&m<e.length-1?e[m+1]:e[m]}}},t.createSnapToPower=function(e,t,n,i,a,l){return function(d,u,c,h){if(void 0!==d){const f=a?o(t,a,c,l):t,_=void 0!==n?n:0;if(h){return void 0===i||i?r(d,f,_):s.clamp(d,_,f)}const g=1e-9,m=Math.ceil(Math.log(t/f)/Math.log(e)-g),p=-u*(.5-g)+.5,y=Math.min(f,d),v=Math.floor(Math.log(t/y)/Math.log(e)+p),x=Math.max(m,v),E=t/Math.pow(e,x);return s.clamp(E,_,f)}}},t.createMinMaxResolution=function(e,t,n,i,a){return function(l,d,u,c){if(void 0!==l){const d=i?o(e,i,u,a):e;return(void 0===n||n)&&c?r(l,d,t):s.clamp(l,t,d)}}}})),define("node_modules/ol/src/rotationconstraint",["require","exports","node_modules/ol/src/math"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSnapToZero=t.createSnapToN=t.none=t.disable=void 0,t.disable=function(e){return void 0!==e?0:void 0},t.none=function(e){return void 0!==e?e:void 0},t.createSnapToN=function(e){const t=2*Math.PI/e;return function(e,s){return s?e:void 0!==e?e=Math.floor(e/t+.5)*t:void 0}},t.createSnapToZero=function(e){const t=e||s.toRadians(5);return function(e,s){return s?e:void 0!==e?Math.abs(e)<=t?0:e:void 0}}})),define("node_modules/ol/src/View",["require","exports","node_modules/ol/src/Object","node_modules/ol/src/geom/GeometryType","node_modules/ol/src/proj/Units","node_modules/ol/src/ViewHint","node_modules/ol/src/ViewProperty","node_modules/ol/src/tilegrid/common","node_modules/ol/src/proj","node_modules/ol/src/functions","node_modules/ol/src/coordinate","node_modules/ol/src/asserts","node_modules/ol/src/obj","node_modules/ol/src/centerconstraint","node_modules/ol/src/math","node_modules/ol/src/resolutionconstraint","node_modules/ol/src/rotationconstraint","node_modules/ol/src/resolutionconstraint","node_modules/ol/src/easing","node_modules/ol/src/coordinate","node_modules/ol/src/extent","node_modules/ol/src/easing","node_modules/ol/src/array","node_modules/ol/src/geom/Polygon"],(function(e,t,s,n,i,o,r,a,l,d,u,c,h,f,_,g,m,p,y,v,x,E,C,T){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNoopAnimation=t.createRotationConstraint=t.createResolutionConstraint=t.createCenterConstraint=void 0;class S extends s.default{constructor(e){super();const t=h.assign({},e);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=l.createProjection(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.cancelAnchor_=void 0,t.center&&(t.center=l.fromUserCoordinate(t.center,this.projection_)),t.extent&&(t.extent=l.fromUserExtent(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(e){const t=O(e);this.maxResolution_=t.maxResolution,this.minResolution_=t.minResolution,this.zoomFactor_=t.zoomFactor,this.resolutions_=e.resolutions,this.minZoom_=t.minZoom;const s=P(e),n=t.constraint,i=R(e);this.constraints_={center:s,resolution:n,rotation:i},this.setRotation(void 0!==e.rotation?e.rotation:0),this.setCenterInternal(void 0!==e.center?e.center:null),void 0!==e.resolution?this.setResolution(e.resolution):void 0!==e.zoom&&this.setZoom(e.zoom),this.setProperties({}),this.options_=e}getUpdatedOptions_(e){const t=h.assign({},this.options_);return void 0!==t.resolution?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),h.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let e=0;e<t.length;++e){let s=arguments[e];s.center&&(s=h.assign({},s),s.center=l.fromUserCoordinate(s.center,this.getProjection())),s.anchor&&(s=h.assign({},s),s.anchor=l.fromUserCoordinate(s.anchor,this.getProjection())),t[e]=s}this.animateInternal.apply(this,t)}animateInternal(e){let t,s=arguments.length;if(s>1&&"function"==typeof arguments[s-1]&&(t=arguments[s-1],--s),!this.isDef()){const e=arguments[s-1];return e.center&&this.setCenterInternal(e.center),void 0!==e.zoom&&this.setZoom(e.zoom),void 0!==e.rotation&&this.setRotation(e.rotation),void(t&&M(t,!0))}let n=Date.now(),i=this.targetCenter_.slice(),r=this.targetResolution_,a=this.targetRotation_;const l=[];for(let e=0;e<s;++e){const s=arguments[e],o={start:n,complete:!1,anchor:s.anchor,duration:void 0!==s.duration?s.duration:1e3,easing:s.easing||E.inAndOut,callback:t};if(s.center&&(o.sourceCenter=i,o.targetCenter=s.center.slice(),i=o.targetCenter),void 0!==s.zoom?(o.sourceResolution=r,o.targetResolution=this.getResolutionForZoom(s.zoom),r=o.targetResolution):s.resolution&&(o.sourceResolution=r,o.targetResolution=s.resolution,r=o.targetResolution),void 0!==s.rotation){o.sourceRotation=a;const e=_.modulo(s.rotation-a+Math.PI,2*Math.PI)-Math.PI;o.targetRotation=a+e,a=o.targetRotation}I(o)?o.complete=!0:n+=o.duration,l.push(o)}this.animations_.push(l),this.setHint(o.default.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[o.default.ANIMATING]>0}getInteracting(){return this.hints_[o.default.INTERACTING]>0}cancelAnimations(){let e;this.setHint(o.default.ANIMATING,-this.hints_[o.default.ANIMATING]);for(let t=0,s=this.animations_.length;t<s;++t){const s=this.animations_[t];if(s[0].callback&&M(s[0].callback,!1),!e)for(let t=0,n=s.length;t<n;++t){const n=s[t];if(!n.complete){e=n.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let s=this.animations_.length-1;s>=0;--s){const n=this.animations_[s];let i=!0;for(let s=0,o=n.length;s<o;++s){const o=n[s];if(o.complete)continue;const r=e-o.start;let a=o.duration>0?r/o.duration:1;a>=1?(o.complete=!0,a=1):i=!1;const l=o.easing(a);if(o.sourceCenter){const e=o.sourceCenter[0],t=o.sourceCenter[1],s=e+l*(o.targetCenter[0]-e),n=t+l*(o.targetCenter[1]-t);this.targetCenter_=[s,n]}if(o.sourceResolution&&o.targetResolution){const e=1===l?o.targetResolution:o.sourceResolution+l*(o.targetResolution-o.sourceResolution);if(o.anchor){const t=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(e,0,t,!0);this.targetCenter_=this.calculateCenterZoom(s,o.anchor)}this.targetResolution_=e,this.applyTargetState_(!0)}if(void 0!==o.sourceRotation&&void 0!==o.targetRotation){const e=1===l?_.modulo(o.targetRotation+Math.PI,2*Math.PI)-Math.PI:o.sourceRotation+l*(o.targetRotation-o.sourceRotation);if(o.anchor){const t=this.constraints_.rotation(e,!0);this.targetCenter_=this.calculateCenterRotate(t,o.anchor)}this.targetRotation_=e}if(this.applyTargetState_(!0),t=!0,!o.complete)break}if(i){this.animations_[s]=null,this.setHint(o.default.ANIMATING,-1);const e=n[0].callback;e&&M(e,!0)}}this.animations_=this.animations_.filter(Boolean),t&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let s;const n=this.getCenterInternal();return void 0!==n&&(s=[n[0]-t[0],n[1]-t[1]],u.rotate(s,e-this.getRotation()),u.add(s,t)),s}calculateCenterZoom(e,t){let s;const n=this.getCenterInternal(),i=this.getResolution();if(void 0!==n&&void 0!==i){s=[t[0]-e*(t[0]-n[0])/i,t[1]-e*(t[1]-n[1])/i]}return s}getViewportSize_(e){const t=this.viewportSize_;if(e){const s=t[0],n=t[1];return[Math.abs(s*Math.cos(e))+Math.abs(n*Math.sin(e)),Math.abs(s*Math.sin(e))+Math.abs(n*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e?l.toUserCoordinate(e,this.getProjection()):e}getCenterInternal(){return this.get(r.default.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.options_.constrainResolution}getHints(e){return void 0!==e?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return l.toUserExtent(t,this.getProjection())}calculateExtentInternal(e){const t=e||this.getViewportSize_(),s=this.getCenterInternal();c.assert(s,1);const n=this.getResolution();c.assert(void 0!==n,2);const i=this.getRotation();return c.assert(void 0!==i,3),x.getForViewAndSize(s,n,i,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(r.default.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(l.fromUserExtent(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){const s=t||this.getViewportSize_(),n=x.getWidth(e)/s[0],i=x.getHeight(e)/s[1];return Math.max(n,i)}getResolutionForValueFunction(e){const t=e||2,s=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(s/n)/Math.log(t);return function(e){return s/Math.pow(t,e*i)}}getRotation(){return this.get(r.default.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),s=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(s/n)/t;return function(e){return Math.log(s/e)/t/i}}getState(){const e=this.getCenterInternal(),t=this.getProjection(),s=this.getResolution(),n=this.getRotation();return{center:e.slice(0),projection:void 0!==t?t:null,resolution:s,rotation:n,zoom:this.getZoom()}}getZoom(){let e;const t=this.getResolution();return void 0!==t&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t,s,n=this.minZoom_||0;if(this.resolutions_){const i=C.linearFindNearest(this.resolutions_,e,1);n=i,t=this.resolutions_[i],s=i==this.resolutions_.length-1?2:t/this.resolutions_[i+1]}else t=this.maxResolution_,s=this.zoomFactor_;return n+Math.log(t/e)/Math.log(s)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=_.clamp(Math.floor(e),0,this.resolutions_.length-2),s=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(s,_.clamp(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){const s=h.assign({size:this.getViewportSize_()},t||{});let i;if(c.assert(Array.isArray(e)||"function"==typeof e.getSimplifiedGeometry,24),Array.isArray(e)){c.assert(!x.isEmpty(e),25);const t=l.fromUserExtent(e,this.getProjection());i=T.fromExtent(t)}else if(e.getType()===n.default.CIRCLE){const t=l.fromUserExtent(e.getExtent(),this.getProjection());i=T.fromExtent(t),i.rotate(this.getRotation(),x.getCenter(t))}else{const t=l.getUserProjection();i=t?e.clone().transform(t,this.getProjection()):e}this.fitInternal(i,s)}fitInternal(e,t){const s=t||{};let n=s.size;n||(n=this.getViewportSize_());const i=void 0!==s.padding?s.padding:[0,0,0,0],o=void 0!==s.nearest&&s.nearest;let r;r=void 0!==s.minResolution?s.minResolution:void 0!==s.maxZoom?this.getResolutionForZoom(s.maxZoom):0;const a=e.getFlatCoordinates(),l=this.getRotation(),u=Math.cos(-l);let c=Math.sin(-l),h=1/0,f=1/0,_=-1/0,g=-1/0;const m=e.getStride();for(let e=0,t=a.length;e<t;e+=m){const t=a[e]*u-a[e+1]*c,s=a[e]*c+a[e+1]*u;h=Math.min(h,t),f=Math.min(f,s),_=Math.max(_,t),g=Math.max(g,s)}let p=this.getResolutionForExtentInternal([h,f,_,g],[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);p=isNaN(p)?r:Math.max(p,r),p=this.getConstrainedResolution(p,o?0:1),c=-c;let y=(h+_)/2,v=(f+g)/2;y+=(i[1]-i[3])/2*p,v+=(i[0]-i[2])/2*p;const x=[y*u-v*c,v*u+y*c],E=s.callback?s.callback:d.VOID;void 0!==s.duration?this.animateInternal({resolution:p,center:this.getConstrainedCenter(x,p),duration:s.duration,easing:s.easing},E):(this.targetResolution_=p,this.targetCenter_=x,this.applyTargetState_(!1,!0),M(E,!0))}centerOn(e,t,s){this.centerOnInternal(l.fromUserCoordinate(e,this.getProjection()),t,s)}centerOnInternal(e,t,s){const n=this.getRotation(),i=Math.cos(-n);let o=Math.sin(-n),r=e[0]*i-e[1]*o,a=e[1]*i+e[0]*o;const l=this.getResolution();r+=(t[0]/2-s[0])*l,a+=(s[1]-t[1]/2)*l,o=-o;const d=r*i-a*o,u=a*i+r*o;this.setCenterInternal([d,u])}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(e){const t=l.toUserCoordinate(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){const s=t&&l.fromUserCoordinate(t,this.getProjection());this.adjustResolutionInternal(e,s)}adjustResolutionInternal(e,t){const s=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*e,0,n,s);t&&(this.targetCenter_=this.calculateCenterZoom(i,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=l.fromUserCoordinate(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const s=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+e,s);t&&(this.targetCenter_=this.calculateCenterRotate(n,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(l.fromUserCoordinate(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const s=this.getAnimating()||this.getInteracting()||t,n=this.constraints_.rotation(this.targetRotation_,s),i=this.getViewportSize_(n),o=this.constraints_.resolution(this.targetResolution_,0,i,s),a=this.constraints_.center(this.targetCenter_,o,i,s);this.get(r.default.ROTATION)!==n&&this.set(r.default.ROTATION,n),this.get(r.default.RESOLUTION)!==o&&this.set(r.default.RESOLUTION,o),this.get(r.default.CENTER)&&v.equals(this.get(r.default.CENTER),a)||this.set(r.default.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,s){const n=void 0!==e?e:200,i=t||0,o=this.constraints_.rotation(this.targetRotation_),r=this.getViewportSize_(o),a=this.constraints_.resolution(this.targetResolution_,i,r),l=this.constraints_.center(this.targetCenter_,a,r);if(0===n&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=o,this.targetCenter_=l,void this.applyTargetState_();const d=s||(0===n?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===a&&this.getRotation()===o&&this.getCenterInternal()&&v.equals(this.getCenterInternal(),l)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:l,resolution:a,duration:n,easing:y.easeOut,anchor:d}))}beginInteraction(){this.resolveConstraints(0),this.setHint(o.default.INTERACTING,1)}endInteraction(e,t,s){const n=s&&l.fromUserCoordinate(s,this.getProjection());this.endInteractionInternal(e,t,n)}endInteractionInternal(e,t,s){this.setHint(o.default.INTERACTING,-1),this.resolveConstraints(e,t,s)}getConstrainedCenter(e,t){const s=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),s)}getConstrainedZoom(e,t){const s=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(s,t))}getConstrainedResolution(e,t){const s=t||0,n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,s,n)}}function M(e,t){setTimeout((function(){e(t)}),0)}function P(e){if(void 0!==e.extent){const t=void 0===e.smoothExtentConstraint||e.smoothExtentConstraint;return f.createExtent(e.extent,e.constrainOnlyCenter,t)}const t=l.createProjection(e.projection,"EPSG:3857");if(!0!==e.multiWorld&&t.isGlobal()){const e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,f.createExtent(e,!1,!1)}return f.none}function O(e){let t,s,n;let o=void 0!==e.minZoom?e.minZoom:0,r=void 0!==e.maxZoom?e.maxZoom:28;const d=void 0!==e.zoomFactor?e.zoomFactor:2,u=void 0!==e.multiWorld&&e.multiWorld,c=void 0===e.smoothResolutionConstraint||e.smoothResolutionConstraint,h=void 0!==e.showFullExtent&&e.showFullExtent,f=l.createProjection(e.projection,"EPSG:3857"),_=f.getExtent();let m=e.constrainOnlyCenter,y=e.extent;if(u||y||!f.isGlobal()||(m=!1,y=_),void 0!==e.resolutions){const i=e.resolutions;s=i[o],n=void 0!==i[r]?i[r]:i[i.length-1],t=e.constrainResolution?p.createSnapToResolutions(i,c,!m&&y,h):g.createMinMaxResolution(s,n,c,!m&&y,h)}else{const u=(_?Math.max(x.getWidth(_),x.getHeight(_)):360*l.METERS_PER_UNIT[i.default.DEGREES]/f.getMetersPerUnit())/a.DEFAULT_TILE_SIZE/Math.pow(2,0),v=u/Math.pow(2,28);s=e.maxResolution,void 0!==s?o=0:s=u/Math.pow(d,o),n=e.minResolution,void 0===n&&(n=void 0!==e.maxZoom?void 0!==e.maxResolution?s/Math.pow(d,r):u/Math.pow(d,r):v),r=o+Math.floor(Math.log(s/n)/Math.log(d)),n=s/Math.pow(d,r-o),t=e.constrainResolution?p.createSnapToPower(d,s,n,c,!m&&y,h):g.createMinMaxResolution(s,n,c,!m&&y,h)}return{constraint:t,maxResolution:s,minResolution:n,minZoom:o,zoomFactor:d}}function R(e){if(void 0===e.enableRotation||e.enableRotation){const t=e.constrainRotation;return void 0===t||!0===t?m.createSnapToZero():!1===t?m.none:"number"==typeof t?m.createSnapToN(t):m.none}return m.disable}function I(e){return!(e.sourceCenter&&e.targetCenter&&!u.equals(e.sourceCenter,e.targetCenter))&&(e.sourceResolution===e.targetResolution&&e.sourceRotation===e.targetRotation)}t.createCenterConstraint=P,t.createResolutionConstraint=O,t.createRotationConstraint=R,t.isNoopAnimation=I,t.default=S})),define("node_modules/ol/src/layer/Layer",["require","exports","node_modules/ol/src/layer/Base","node_modules/ol/src/events/EventType","node_modules/ol/src/layer/Property","node_modules/ol/src/render/EventType","node_modules/ol/src/source/State","node_modules/ol/src/asserts","node_modules/ol/src/obj","node_modules/ol/src/Object","node_modules/ol/src/events"],(function(e,t,s,n,i,o,r,a,l,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inView=void 0;class c extends s.default{constructor(e){const t=l.assign({},e);delete t.source,super(t),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addEventListener(d.getChangeEventType(i.default.SOURCE),this.handleSourcePropertyChange_);const s=e.source?e.source:null;this.setSource(s)}getLayersArray(e){const t=e||[];return t.push(this),t}getLayerStatesArray(e){const t=e||[];return t.push(this.getLayerState()),t}getSource(){return this.get(i.default.SOURCE)||null}getSourceState(){const e=this.getSource();return e?e.getState():r.default.UNDEFINED}handleSourceChange_(){this.changed()}handleSourcePropertyChange_(){this.sourceChangeKey_&&(u.unlistenByKey(this.sourceChangeKey_),this.sourceChangeKey_=null);const e=this.getSource();e&&(this.sourceChangeKey_=u.listen(e,n.default.CHANGE,this.handleSourceChange_,this)),this.changed()}getFeatures(e){return this.renderer_.getFeatures(e)}render(e,t){const s=this.getRenderer();if(s.prepareFrame(e))return s.renderFrame(e,t)}setMap(e){this.mapPrecomposeKey_&&(u.unlistenByKey(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(u.unlistenByKey(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=u.listen(e,o.default.PRECOMPOSE,(function(e){const t=e.frameState.layerStatesArray,s=this.getLayerState(!1);a.assert(!t.some((function(e){return e.layer===s.layer})),67),t.push(s)}),this),this.mapRenderKey_=u.listen(this,n.default.CHANGE,e.render,e),this.changed())}setSource(e){this.set(i.default.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.setSource(null),super.disposeInternal()}}t.inView=function(e,t){if(!e.visible)return!1;const s=t.resolution;if(s<e.minResolution||s>=e.maxResolution)return!1;const n=t.zoom;return n>e.minZoom&&n<=e.maxZoom},t.default=c})),define("node_modules/ol/src/layer/Base",["require","exports","node_modules/ol/src/Object","node_modules/ol/src/layer/Property","node_modules/ol/src/util","node_modules/ol/src/asserts","node_modules/ol/src/obj","node_modules/ol/src/math"],(function(e,t,s,n,i,o,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class l extends s.default{constructor(e){super();const t=r.assign({},e);t[n.default.OPACITY]=void 0!==e.opacity?e.opacity:1,o.assert("number"==typeof t[n.default.OPACITY],64),t[n.default.VISIBLE]=void 0===e.visible||e.visible,t[n.default.Z_INDEX]=e.zIndex,t[n.default.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,t[n.default.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,t[n.default.MIN_ZOOM]=void 0!==e.minZoom?e.minZoom:-1/0,t[n.default.MAX_ZOOM]=void 0!==e.maxZoom?e.maxZoom:1/0,this.className_=void 0!==t.className?e.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:void 0===e||e},s=this.getZIndex();return t.opacity=a.clamp(Math.round(100*this.getOpacity())/100,0,1),t.sourceState=this.getSourceState(),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=void 0!==s?s:!1===t.managed?1/0:0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return i.abstract()}getLayerStatesArray(e){return i.abstract()}getExtent(){return this.get(n.default.EXTENT)}getMaxResolution(){return this.get(n.default.MAX_RESOLUTION)}getMinResolution(){return this.get(n.default.MIN_RESOLUTION)}getMinZoom(){return this.get(n.default.MIN_ZOOM)}getMaxZoom(){return this.get(n.default.MAX_ZOOM)}getOpacity(){return this.get(n.default.OPACITY)}getSourceState(){return i.abstract()}getVisible(){return this.get(n.default.VISIBLE)}getZIndex(){return this.get(n.default.Z_INDEX)}setExtent(e){this.set(n.default.EXTENT,e)}setMaxResolution(e){this.set(n.default.MAX_RESOLUTION,e)}setMinResolution(e){this.set(n.default.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(n.default.MAX_ZOOM,e)}setMinZoom(e){this.set(n.default.MIN_ZOOM,e)}setOpacity(e){o.assert("number"==typeof e,64),this.set(n.default.OPACITY,e)}setVisible(e){this.set(n.default.VISIBLE,e)}setZIndex(e){this.set(n.default.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}t.default=l})),define("node_modules/ol/src/layer/Group",["require","exports","node_modules/ol/src/layer/Base","node_modules/ol/src/Collection","node_modules/ol/src/CollectionEventType","node_modules/ol/src/events/EventType","node_modules/ol/src/ObjectEventType","node_modules/ol/src/source/State","node_modules/ol/src/asserts","node_modules/ol/src/obj","node_modules/ol/src/Object","node_modules/ol/src/extent","node_modules/ol/src/util","node_modules/ol/src/events"],(function(e,t,s,n,i,o,r,a,l,d,u,c,h,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const _="layers";class g extends s.default{constructor(e){const t=e||{},s=d.assign({},t);delete s.layers;let i=t.layers;super(s),this.layersListenerKeys_=[],this.listenerKeys_={},this.addEventListener(u.getChangeEventType(_),this.handleLayersChanged_),i?Array.isArray(i)?i=new n.default(i.slice(),{unique:!0}):l.assert("function"==typeof i.getArray,43):i=new n.default(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(f.unlistenByKey),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(f.listen(e,i.default.ADD,this.handleLayersAdd_,this),f.listen(e,i.default.REMOVE,this.handleLayersRemove_,this));for(const e in this.listenerKeys_)this.listenerKeys_[e].forEach(f.unlistenByKey);d.clear(this.listenerKeys_);const t=e.getArray();for(let e=0,s=t.length;e<s;e++){const s=t[e];this.listenerKeys_[h.getUid(s)]=[f.listen(s,r.default.PROPERTYCHANGE,this.handleLayerChange_,this),f.listen(s,o.default.CHANGE,this.handleLayerChange_,this)]}this.changed()}handleLayersAdd_(e){const t=e.element;this.listenerKeys_[h.getUid(t)]=[f.listen(t,r.default.PROPERTYCHANGE,this.handleLayerChange_,this),f.listen(t,o.default.CHANGE,this.handleLayerChange_,this)],this.changed()}handleLayersRemove_(e){const t=e.element,s=h.getUid(t);this.listenerKeys_[s].forEach(f.unlistenByKey),delete this.listenerKeys_[s],this.changed()}getLayers(){return this.get(_)}setLayers(e){this.set(_,e)}getLayersArray(e){const t=void 0!==e?e:[];return this.getLayers().forEach((function(e){e.getLayersArray(t)})),t}getLayerStatesArray(e){const t=void 0!==e?e:[],s=t.length;this.getLayers().forEach((function(e){e.getLayerStatesArray(t)}));const n=this.getLayerState();for(let e=s,i=t.length;e<i;e++){const s=t[e];s.opacity*=n.opacity,s.visible=s.visible&&n.visible,s.maxResolution=Math.min(s.maxResolution,n.maxResolution),s.minResolution=Math.max(s.minResolution,n.minResolution),s.minZoom=Math.max(s.minZoom,n.minZoom),s.maxZoom=Math.min(s.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==s.extent?s.extent=c.getIntersection(s.extent,n.extent):s.extent=n.extent)}return t}getSourceState(){return a.default.READY}}t.default=g})),define("node_modules/ol/src/MapEvent",["require","exports","node_modules/ol/src/events/Event"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends s.default{constructor(e,t,s){super(e),this.map=t,this.frameState=void 0!==s?s:null}}t.default=n})),define("node_modules/ol/src/MapBrowserEvent",["require","exports","node_modules/ol/src/MapEvent"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends s.default{constructor(e,t,s,n,i){super(e,t,i),this.originalEvent=s,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==n&&n}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),this.originalEvent.stopPropagation()}}t.default=n})),define("node_modules/ol/src/MapBrowserEventType",["require","exports","node_modules/ol/src/events/EventType"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={SINGLECLICK:"singleclick",CLICK:s.default.CLICK,DBLCLICK:s.default.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}})),define("node_modules/ol/src/pointer/EventType",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}})),define("node_modules/ol/src/MapBrowserEventHandler",["require","exports","node_modules/ol/src/events/Target","node_modules/ol/src/events/EventType","node_modules/ol/src/MapBrowserEvent","node_modules/ol/src/MapBrowserEventType","node_modules/ol/src/pointer/EventType","node_modules/ol/src/has","node_modules/ol/src/events"],(function(e,t,s,n,i,o,r,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class d extends s.default{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t?t*a.DEVICE_PIXEL_RATIO:a.DEVICE_PIXEL_RATIO,this.down_=null;const s=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.element_=s,this.pointerdownListenerKey_=l.listen(s,r.default.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=l.listen(s,r.default.POINTERMOVE,this.relayEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(n.default.TOUCHMOVE,this.boundHandleTouchMove_,!!a.PASSIVE_EVENT_LISTENERS&&{passive:!1})}emulateClick_(e){let t=new i.default(o.default.CLICK,this.map_,e);this.dispatchEvent(t),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new i.default(o.default.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;const t=new i.default(o.default.SINGLECLICK,this.map_,e);this.dispatchEvent(t)}.bind(this),250)}updateActivePointers_(e){const t=e;t.type==o.default.POINTERUP||t.type==o.default.POINTERCANCEL?delete this.trackedTouches_[t.pointerId]:t.type==o.default.POINTERDOWN&&(this.trackedTouches_[t.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length}handlePointerUp_(e){this.updateActivePointers_(e);const t=new i.default(o.default.POINTERUP,this.map_,e);this.dispatchEvent(t),t.propagationStopped||this.dragging_||!this.isMouseActionButton_(e)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(l.unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return 0===e.button}handlePointerDown_(e){this.updateActivePointers_(e);const t=new i.default(o.default.POINTERDOWN,this.map_,e);this.dispatchEvent(t),this.down_=e,0===this.dragListenerKeys_.length&&(this.dragListenerKeys_.push(l.listen(document,o.default.POINTERMOVE,this.handlePointerMove_,this),l.listen(document,o.default.POINTERUP,this.handlePointerUp_,this),l.listen(this.element_,o.default.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==document&&this.dragListenerKeys_.push(l.listen(this.element_.getRootNode(),o.default.POINTERUP,this.handlePointerUp_,this)))}handlePointerMove_(e){if(this.isMoving_(e)){this.dragging_=!0;const t=new i.default(o.default.POINTERDRAG,this.map_,e,this.dragging_);this.dispatchEvent(t)}}relayEvent_(e){this.originalPointerMoveEvent_=e;const t=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new i.default(e.type,this.map_,e,t))}handleTouchMove_(e){this.originalPointerMoveEvent_&&!this.originalPointerMoveEvent_.defaultPrevented||e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(l.unlistenByKey(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(n.default.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(l.unlistenByKey(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(l.unlistenByKey),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}t.default=d})),define("node_modules/ol/src/MapEventType",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"}})),define("node_modules/ol/src/MapProperty",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"}})),define("node_modules/ol/src/structs/PriorityQueue",["require","exports","node_modules/ol/src/asserts","node_modules/ol/src/obj"],(function(e,t,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DROP=void 0,t.DROP=1/0;t.default=class{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,n.clear(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,s=e[0];1==e.length?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const n=this.keyFunction_(s);return delete this.queuedElements_[n],s}enqueue(e){s.assert(!(this.keyFunction_(e)in this.queuedElements_),31);const n=this.priorityFunction_(e);return n!=t.DROP&&(this.elements_.push(e),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(e){return 2*e+1}getRightChildIndex_(e){return 2*e+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return 0===this.elements_.length}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,s=this.priorities_,n=t.length,i=t[e],o=s[e],r=e;for(;e<n>>1;){const i=this.getLeftChildIndex_(e),o=this.getRightChildIndex_(e),r=o<n&&s[o]<s[i]?o:i;t[e]=t[r],s[e]=s[r],e=r}t[e]=i,s[e]=o,this.siftDown_(r,e)}siftDown_(e,t){const s=this.elements_,n=this.priorities_,i=s[t],o=n[t];for(;t>e;){const e=this.getParentIndex_(t);if(!(n[e]>o))break;s[t]=s[e],n[t]=n[e],t=e}s[t]=i,n[t]=o}reprioritize(){const e=this.priorityFunction_,s=this.elements_,n=this.priorities_;let i=0;const o=s.length;let r,a,l;for(a=0;a<o;++a)r=s[a],l=e(r),l==t.DROP?delete this.queuedElements_[this.keyFunction_(r)]:(n[i]=l,s[i++]=r);s.length=i,n.length=i,this.heapify_()}}})),define("node_modules/ol/src/TileQueue",["require","exports","node_modules/ol/src/events/EventType","node_modules/ol/src/structs/PriorityQueue","node_modules/ol/src/TileState"],(function(e,t,s,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTilePriority=void 0;class o extends n.default{constructor(e,t){super((function(t){return e.apply(null,t)}),(function(e){return e[0].getKey()})),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);if(t){e[0].addEventListener(s.default.CHANGE,this.boundHandleTileChange_)}return t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,n=t.getState();if(t.hifi&&n===i.default.LOADED||n===i.default.ERROR||n===i.default.EMPTY){t.removeEventListener(s.default.CHANGE,this.boundHandleTileChange_);const e=t.getKey();e in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[e],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let s,n,o,r=0;for(;this.tilesLoading_<e&&r<t&&this.getCount()>0;)n=this.dequeue()[0],o=n.getKey(),s=n.getState(),s!==i.default.IDLE||o in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++r,n.load())}}t.default=o,t.getTilePriority=function(e,t,s,i,o){if(!e||!(s in e.wantedTiles))return n.DROP;if(!e.wantedTiles[s][t.getKey()])return n.DROP;const r=e.viewState.center,a=i[0]-r[0],l=i[1]-r[1];return 65536*Math.log(o)+Math.sqrt(a*a+l*l)/o}})),define("node_modules/ol/src/control/Control",["require","exports","node_modules/ol/src/Object","node_modules/ol/src/MapEventType","node_modules/ol/src/functions","node_modules/ol/src/events","node_modules/ol/src/dom"],(function(e,t,s,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class a extends s.default{constructor(e){super();const t=e.element;!t||e.target||t.style.pointerEvents||(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){r.removeNode(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&r.removeNode(this.element);for(let e=0,t=this.listenerKeys.length;e<t;++e)o.unlistenByKey(this.listenerKeys[e]);if(this.listenerKeys.length=0,this.map_=e,this.map_){(this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==i.VOID&&this.listenerKeys.push(o.listen(e,n.default.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_="string"==typeof e?document.getElementById(e):e}}t.default=a})),define("node_modules/ol/src/interaction/Property",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={ACTIVE:"active"}})),define("node_modules/ol/src/interaction/Interaction",["require","exports","node_modules/ol/src/Object","node_modules/ol/src/interaction/Property","node_modules/ol/src/easing"],(function(e,t,s,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.zoomByDelta=t.pan=void 0;class o extends s.default{constructor(e){super(),e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(n.default.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(n.default.ACTIVE,e)}setMap(e){this.map_=e}}t.pan=function(e,t,s){const n=e.getCenterInternal();if(n){const o=[n[0]+t[0],n[1]+t[1]];e.animateInternal({duration:void 0!==s?s:250,easing:i.linear,center:e.getConstrainedCenter(o)})}},t.zoomByDelta=function(e,t,s,n){const o=e.getZoom();if(void 0===o)return;const r=e.getConstrainedZoom(o+t),a=e.getResolutionForZoom(r);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:a,anchor:s,duration:void 0!==n?n:250,easing:i.easeOut})},t.default=o})),define("node_modules/ol/src/OverlayPositioning",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"}})),define("node_modules/ol/src/Overlay",["require","exports","node_modules/ol/src/Object","node_modules/ol/src/MapEventType","node_modules/ol/src/OverlayPositioning","node_modules/ol/src/css","node_modules/ol/src/extent","node_modules/ol/src/events","node_modules/ol/src/dom"],(function(e,t,s,n,i,o,r,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const d="element",u="map",c="offset",h="position",f="positioning";class _ extends s.default{constructor(e){super(),this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container "+o.CLASS_SELECTABLE,this.element.style.position="absolute",this.element.style.pointerEvents="auto";let t=e.autoPan;t&&"object"!=typeof t&&(t={animation:e.autoPanAnimation,margin:e.autoPanMargin}),this.autoPan=t||!1,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addEventListener(s.getChangeEventType(d),this.handleElementChanged),this.addEventListener(s.getChangeEventType(u),this.handleMapChanged),this.addEventListener(s.getChangeEventType(c),this.handleOffsetChanged),this.addEventListener(s.getChangeEventType(h),this.handlePositionChanged),this.addEventListener(s.getChangeEventType(f),this.handlePositioningChanged),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(void 0!==e.positioning?e.positioning:i.default.TOP_LEFT),void 0!==e.position&&this.setPosition(e.position)}getElement(){return this.get(d)}getId(){return this.id}getMap(){return this.get(u)}getOffset(){return this.get(c)}getPosition(){return this.get(h)}getPositioning(){return this.get(f)}handleElementChanged(){l.removeChildren(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(l.removeNode(this.element),a.unlistenByKey(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=a.listen(e,n.default.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(d,e)}setMap(e){this.set(u,e)}setOffset(e){this.set(c,e)}setPosition(e){this.set(h,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(h))return;const s=this.getRect(t.getTargetElement(),t.getSize()),n=this.getElement(),i=this.getRect(n,[l.outerWidth(n),l.outerHeight(n)]),o=e||{},a=void 0===o.margin?20:o.margin;if(!r.containsExtent(s,i)){const e=i[0]-s[0],n=s[2]-i[2],r=i[1]-s[1],l=s[3]-i[3],d=[0,0];if(e<0?d[0]=e-a:n<0&&(d[0]=Math.abs(n)+a),r<0?d[1]=r-a:l<0&&(d[1]=Math.abs(l)+a),0!==d[0]||0!==d[1]){const e=t.getView().getCenterInternal(),s=t.getPixelFromCoordinateInternal(e),n=[s[0]+d[0],s[1]+d[1]],i=o.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(n),duration:i.duration,easing:i.easing})}}}getRect(e,t){const s=e.getBoundingClientRect(),n=s.left+window.pageXOffset,i=s.top+window.pageYOffset;return[n,i,n+t[0],i+t[1]]}setPositioning(e){this.set(f,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t)return void this.setVisible(!1);const s=e.getPixelFromCoordinate(t),n=e.getSize();this.updateRenderedPosition(s,n)}updateRenderedPosition(e,t){const s=this.element.style,n=this.getOffset(),o=this.getPositioning();this.setVisible(!0);const r=Math.round(e[0]+n[0])+"px",a=Math.round(e[1]+n[1])+"px";let l="0%",d="0%";o==i.default.BOTTOM_RIGHT||o==i.default.CENTER_RIGHT||o==i.default.TOP_RIGHT?l="-100%":o!=i.default.BOTTOM_CENTER&&o!=i.default.CENTER_CENTER&&o!=i.default.TOP_CENTER||(l="-50%"),o==i.default.BOTTOM_LEFT||o==i.default.BOTTOM_CENTER||o==i.default.BOTTOM_RIGHT?d="-100%":o!=i.default.CENTER_LEFT&&o!=i.default.CENTER_CENTER&&o!=i.default.CENTER_RIGHT||(d="-50%");const u=`translate(${l}, ${d}) translate(${r}, ${a})`;this.rendered.transform_!=u&&(this.rendered.transform_=u,s.transform=u,s.msTransform=u)}getOptions(){return this.options}}t.default=_})),define("node_modules/ol/src/style/IconImage",["require","exports","node_modules/ol/src/events/Target","node_modules/ol/src/events/EventType","node_modules/ol/src/ImageState","node_modules/ol/src/dom","node_modules/ol/src/style/IconImageCache","node_modules/ol/src/Image"],(function(e,t,s,n,i,o,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=void 0;let l=null;class d extends s.default{constructor(e,t,s,n,i,o){super(),this.hitDetectionImage_=null,this.image_=e||new Image,null!==n&&(this.image_.crossOrigin=n),this.canvas_={},this.color_=o,this.unlisten_=null,this.imageState_=i,this.size_=s,this.src_=t,this.tainted_}isTainted_(){if(void 0===this.tainted_&&this.imageState_===i.default.LOADED){l||(l=o.createCanvasContext2D(1,1)),l.drawImage(this.image_,0,0);try{l.getImageData(0,0,1,1),this.tainted_=!1}catch(e){l=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(n.default.CHANGE)}handleImageError_(){this.imageState_=i.default.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=i.default.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(e){return this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],s=o.createCanvasContext2D(e,t);s.fillRect(0,0,e,t),this.hitDetectionImage_=s.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_==i.default.IDLE){this.imageState_=i.default.LOADING;try{this.image_.src=this.src_}catch(e){this.handleImageError_()}this.unlisten_=a.listenImage(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e])return;const t=document.createElement("canvas");this.canvas_[e]=t,t.width=Math.ceil(this.image_.width*e),t.height=Math.ceil(this.image_.height*e);const s=t.getContext("2d");if(s.scale(e,e),s.drawImage(this.image_,0,0),this.isTainted_()){const e=this.color_;return s.globalCompositeOperation="multiply",s.fillStyle="rgb("+e[0]+","+e[1]+","+e[2]+")",s.fillRect(0,0,t.width,t.height),s.globalCompositeOperation="destination-in",void s.drawImage(this.image_,0,0)}const n=s.getImageData(0,0,t.width,t.height),i=n.data,o=this.color_[0]/255,r=this.color_[1]/255,a=this.color_[2]/255;for(let e=0,t=i.length;e<t;e+=4)i[e]*=o,i[e+1]*=r,i[e+2]*=a;s.putImageData(n,0,0)}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}t.get=function(e,t,s,n,i,o){let a=r.shared.get(t,n,o);return a||(a=new d(e,t,s,n,i,o),r.shared.set(t,n,o,a)),a},t.default=d})),define("node_modules/ol/src/style/IconImageCache",["require","exports","node_modules/ol/src/color"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shared=void 0;class n{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const s=this.cache_[t];0!=(3&e++)||s.hasListener()||(delete this.cache_[t],--this.cacheSize_)}}}get(e,t,s){const n=i(e,t,s);return n in this.cache_?this.cache_[n]:null}set(e,t,s,n){const o=i(e,t,s);this.cache_[o]=n,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function i(e,t,n){return t+":"+e+":"+(n?s.asString(n):"null")}t.default=n,t.shared=new n})),define("node_modules/ol/src/renderer/Map",["require","exports","node_modules/ol/src/Disposable","node_modules/ol/src/functions","node_modules/ol/src/util","node_modules/ol/src/transform","node_modules/ol/src/extent","node_modules/ol/src/style/IconImageCache","node_modules/ol/src/layer/Layer","node_modules/ol/src/render","node_modules/ol/src/coordinate"],(function(e,t,s,n,i,o,r,a,l,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class c extends s.default{constructor(e){super(),this.map_=e,this.declutterTree_=null}dispatchRenderEvent(e,t){i.abstract()}calculateMatrices2D(e){const t=e.viewState,s=e.coordinateToPixelTransform,n=e.pixelToCoordinateTransform;o.compose(s,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),o.makeInverse(n,s)}forEachFeatureAtCoordinate(e,t,s,n,i,o,a,d){let c;const h=t.viewState;function f(e,t,s){return i.call(o,t,e?s:null)}const _=h.projection,g=u.wrapX(e.slice(),_),m=[[0,0]];if(_.canWrapX()&&n){const e=_.getExtent(),t=r.getWidth(e);m.push([-t,0],[t,0])}const p=t.layerStatesArray,y=p.length;let v;this.declutterTree_&&(v=this.declutterTree_.all().map((function(e){return e.value})));const x=[];for(let n=0;n<m.length;n++)for(let i=y-1;i>=0;--i){const o=p[i],r=o.layer;if(r.hasRenderer()&&l.inView(o,h)&&a.call(d,r)){const i=r.getRenderer(),a=r.getSource();if(i&&a){const r=a.getWrapX()?g:e,l=f.bind(null,o.managed);x[0]=r[0]+m[n][0],x[1]=r[1]+m[n][1],c=i.forEachFeatureAtCoordinate(x,t,s,l,v)}if(c)return c}}}forEachLayerAtPixel(e,t,s,n,o){return i.abstract()}hasFeatureAtCoordinate(e,t,s,i,o,r){return void 0!==this.forEachFeatureAtCoordinate(e,t,s,i,n.TRUE,this,o,r)}getMap(){return this.map_}renderFrame(e){this.declutterTree_=d.renderDeclutterItems(e,this.declutterTree_)}scheduleExpireIconCache(e){a.shared.canExpireCache()&&e.postRenderFunctions.push(h)}}function h(e,t){a.shared.expire()}t.default=c})),define("node_modules/ol/src/PluggableMap",["require","exports","node_modules/ol/src/Object","node_modules/ol/src/Collection","node_modules/ol/src/CollectionEventType","node_modules/ol/src/events/EventType","node_modules/ol/src/layer/Group","node_modules/ol/src/MapBrowserEvent","node_modules/ol/src/MapBrowserEventHandler","node_modules/ol/src/MapBrowserEventType","node_modules/ol/src/MapEvent","node_modules/ol/src/MapEventType","node_modules/ol/src/MapProperty","node_modules/ol/src/ObjectEventType","node_modules/ol/src/pointer/EventType","node_modules/ol/src/render/EventType","node_modules/ol/src/TileQueue","node_modules/ol/src/View","node_modules/ol/src/ViewHint","node_modules/ol/src/has","node_modules/ol/src/functions","node_modules/ol/src/transform","node_modules/ol/src/asserts","node_modules/ol/src/extent","node_modules/ol/src/proj","node_modules/ol/src/size","node_modules/ol/src/events","node_modules/ol/src/dom"],(function(e,t,s,n,i,o,r,a,l,d,u,c,h,f,_,g,m,p,y,v,x,E,C,T,S,M,P,O){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class R extends s.default{constructor(e){super();const t=function(e){let t=null;void 0!==e.keyboardEventTarget&&(t="string"==typeof e.keyboardEventTarget?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);const s={},i=e.layers&&"function"==typeof e.layers.getLayers?e.layers:new r.default({layers:e.layers});let o,a,l;s[h.default.LAYERGROUP]=i,s[h.default.TARGET]=e.target,s[h.default.VIEW]=void 0!==e.view?e.view:new p.default,void 0!==e.controls&&(Array.isArray(e.controls)?o=new n.default(e.controls.slice()):(C.assert("function"==typeof e.controls.getArray,47),o=e.controls));void 0!==e.interactions&&(Array.isArray(e.interactions)?a=new n.default(e.interactions.slice()):(C.assert("function"==typeof e.interactions.getArray,48),a=e.interactions));void 0!==e.overlays?Array.isArray(e.overlays)?l=new n.default(e.overlays.slice()):(C.assert("function"==typeof e.overlays.getArray,49),l=e.overlays):l=new n.default;return{controls:o,interactions:a,keyboardEventTarget:t,overlays:l,values:s}}(e);this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:v.DEVICE_PIXEL_RATIO,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(this),this.coordinateToPixelTransform_=E.create(),this.pixelToCoordinateTransform_=E.create(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.keyHandlerKeys_=null,this.controls=t.controls||new n.default,this.interactions=t.interactions||new n.default,this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.handleResize_,this.postRenderFunctions_=[],this.tileQueue_=new m.default(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addEventListener(s.getChangeEventType(h.default.LAYERGROUP),this.handleLayerGroupChanged_),this.addEventListener(s.getChangeEventType(h.default.VIEW),this.handleViewChanged_),this.addEventListener(s.getChangeEventType(h.default.SIZE),this.handleSizeChanged_),this.addEventListener(s.getChangeEventType(h.default.TARGET),this.handleTargetChanged_),this.setProperties(t.values),this.controls.forEach(function(e){e.setMap(this)}.bind(this)),this.controls.addEventListener(i.default.ADD,function(e){e.element.setMap(this)}.bind(this)),this.controls.addEventListener(i.default.REMOVE,function(e){e.element.setMap(null)}.bind(this)),this.interactions.forEach(function(e){e.setMap(this)}.bind(this)),this.interactions.addEventListener(i.default.ADD,function(e){e.element.setMap(this)}.bind(this)),this.interactions.addEventListener(i.default.REMOVE,function(e){e.element.setMap(null)}.bind(this)),this.overlays_.forEach(this.addOverlayInternal_.bind(this)),this.overlays_.addEventListener(i.default.ADD,function(e){this.addOverlayInternal_(e.element)}.bind(this)),this.overlays_.addEventListener(i.default.REMOVE,function(e){const t=e.element.getId();void 0!==t&&delete this.overlayIdIndex_[t.toString()],e.element.setMap(null)}.bind(this))}createRenderer(){throw new Error("Use a map type that has a createRenderer method")}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,s){if(!this.frameState_)return;const n=this.getCoordinateFromPixelInternal(e),i=void 0!==(s=void 0!==s?s:{}).hitTolerance?s.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==s.layerFilter?s.layerFilter:x.TRUE,r=!1!==s.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,i,r,t,null,o,null)}getFeaturesAtPixel(e,t){const s=[];return this.forEachFeatureAtPixel(e,(function(e){s.push(e)}),t),s}forEachLayerAtPixel(e,t,s){if(!this.frameState_)return;const n=s||{},i=void 0!==n.hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,o=n.layerFilter||x.TRUE;return this.renderer_.forEachLayerAtPixel(e,this.frameState_,i,t,o)}hasFeatureAtPixel(e,t){if(!this.frameState_)return!1;const s=this.getCoordinateFromPixelInternal(e),n=void 0!==(t=void 0!==t?t:{}).layerFilter?t.layerFilter:x.TRUE,i=void 0!==t.hitTolerance?t.hitTolerance*this.frameState_.pixelRatio:0,o=!1!==t.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(s,this.frameState_,i,o,n,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const t=this.viewport_.getBoundingClientRect(),s="changedTouches"in e?e.changedTouches[0]:e;return[s.clientX-t.left,s.clientY-t.top]}getTarget(){return this.get(h.default.TARGET)}getTargetElement(){const e=this.getTarget();return void 0!==e?"string"==typeof e?document.getElementById(e):e:null}getCoordinateFromPixel(e){return S.toUserCoordinate(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?E.apply(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(h.default.LAYERGROUP)}getLayers(){return this.getLayerGroup().getLayers()}getLoading(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,s=e.length;t<s;++t){const s=e[t].layer.getSource();if(s&&s.loading)return!0}return!1}getPixelFromCoordinate(e){const t=S.fromUserCoordinate(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?E.apply(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(h.default.SIZE)}getView(){return this.get(h.default.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getTilePriority(e,t,s,n){return m.getTilePriority(this.frameState_,e,t,s,n)}handleBrowserEvent(e,t){const s=t||e.type,n=new a.default(s,this,e);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,s=t.type;if(s===_.default.POINTERDOWN||s===o.default.WHEEL||s===o.default.KEYDOWN){const e=this.viewport_.getRootNode?this.viewport_.getRootNode():document,s=e===document?t.target:e.elementFromPoint(t.clientX,t.clientY);if(this.overlayContainerStopEvent_.contains(s)||!(e===document?document.documentElement:e).contains(s))return}e.frameState=this.frameState_;const n=this.getInteractions().getArray();if(!1!==this.dispatchEvent(e))for(let t=n.length-1;t>=0;t--){const s=n[t];if(!s.getActive())continue;if(!s.handleEvent(e))break}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let s=this.maxTilesLoading_,n=s;if(e){const t=e.viewHints;if(t[y.default.ANIMATING]||t[y.default.INTERACTING]){const t=!v.IMAGE_DECODE&&Date.now()-e.time>8;s=t?0:8,n=t?0:2}}t.getTilesLoading()<s&&(t.reprioritize(),t.loadMoreTiles(s,n))}!e||!this.hasListener(g.default.RENDERCOMPLETE)||e.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(g.default.RENDERCOMPLETE,e);const s=this.postRenderFunctions_;for(let t=0,n=s.length;t<n;++t)s[t](this,e);s.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){let e;if(this.getTarget()&&(e=this.getTargetElement()),this.mapBrowserEventHandler_){for(let e=0,t=this.keyHandlerKeys_.length;e<t;++e)P.unlistenByKey(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null,this.viewport_.removeEventListener(o.default.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(o.default.WHEEL,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener(o.default.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,O.removeNode(this.viewport_)}if(e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new l.default(this,this.moveTolerance_);for(const e in d.default)this.mapBrowserEventHandler_.addEventListener(d.default[e],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(o.default.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(o.default.WHEEL,this.boundHandleBrowserEvent_,!!v.PASSIVE_EVENT_LISTENERS&&{passive:!1});const t=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.keyHandlerKeys_=[P.listen(t,o.default.KEYDOWN,this.handleBrowserEvent,this),P.listen(t,o.default.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(o.default.RESIZE,this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(P.unlistenByKey(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(P.unlistenByKey(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=P.listen(e,f.default.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=P.listen(e,o.default.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(P.unlistenByKey),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.layerGroupPropertyListenerKeys_=[P.listen(e,f.default.PROPERTYCHANGE,this.render,this),P.listen(e,o.default.CHANGE,this.render,this)]),this.render()}isRendered(){return!!this.frameState_}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,s=e.length;t<s;++t){const s=e[t].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),s=this.getView(),n=this.frameState_;let i=null;if(void 0!==t&&M.hasArea(t)&&s&&s.isDef()){const o=s.getHints(this.frameState_?this.frameState_.viewHints:void 0),r=s.getState();i={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterItems:n?n.declutterItems:[],extent:T.getForViewAndSize(r.center,r.resolution,r.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:r,viewHints:o,wantedTiles:{}}}if(this.frameState_=i,this.renderer_.renderFrame(i),i){if(i.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,i.postRenderFunctions),n){(!this.previousExtent_||!T.isEmpty(this.previousExtent_)&&!T.equals(i.extent,this.previousExtent_))&&(this.dispatchEvent(new u.default(c.default.MOVESTART,this,n)),this.previousExtent_=T.createOrUpdateEmpty(this.previousExtent_))}this.previousExtent_&&!i.viewHints[y.default.ANIMATING]&&!i.viewHints[y.default.INTERACTING]&&!T.equals(i.extent,this.previousExtent_)&&(this.dispatchEvent(new u.default(c.default.MOVEEND,this,i)),T.clone(i.extent,this.previousExtent_))}this.dispatchEvent(new u.default(c.default.POSTRENDER,this,i)),this.postRenderTimeoutHandle_=setTimeout(this.handlePostRender.bind(this),0)}setLayerGroup(e){this.set(h.default.LAYERGROUP,e)}setSize(e){this.set(h.default.SIZE,e)}setTarget(e){this.set(h.default.TARGET,e)}setView(e){this.set(h.default.VIEW,e)}updateSize(){const e=this.getTargetElement();if(e){const t=getComputedStyle(e);this.setSize([e.offsetWidth-parseFloat(t.borderLeftWidth)-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)-parseFloat(t.borderRightWidth),e.offsetHeight-parseFloat(t.borderTopWidth)-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom)-parseFloat(t.borderBottomWidth)])}else this.setSize(void 0);this.updateViewportSize_()}updateViewportSize_(){const e=this.getView();if(e){let t=void 0;const s=getComputedStyle(this.viewport_);s.width&&s.height&&(t=[parseInt(s.width,10),parseInt(s.height,10)]),e.setViewportSize(t)}}}t.default=R})),define("node_modules/ol/src/render/Event",["require","exports","node_modules/ol/src/events/Event"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends s.default{constructor(e,t,s,n){super(e),this.inversePixelTransform=t,this.frameState=s,this.context=n}}t.default=n})),define("node_modules/ol/src/render",["require","exports","node_modules/ol/src/render/canvas/Immediate","node_modules/ol/src/has","node_modules/ol/src/transform","node_modules/ol/src/renderer/vector","node_modules/ol/src/proj"],(function(e,t,s,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderDeclutterItems=t.getRenderPixel=t.getVectorContext=t.toContext=void 0,t.toContext=function(e,t){const o=e.canvas,r=t||{},a=r.pixelRatio||n.DEVICE_PIXEL_RATIO,l=r.size;l&&(o.width=l[0]*a,o.height=l[1]*a,o.style.width=l[0]+"px",o.style.height=l[1]+"px");const d=[0,0,o.width,o.height],u=i.scale(i.create(),a,a);return new s.default(e,a,d,u,0)},t.getVectorContext=function(e){const t=e.frameState,n=i.multiply(e.inversePixelTransform.slice(),t.coordinateToPixelTransform),a=o.getSquaredTolerance(t.viewState.resolution,t.pixelRatio);let l;const d=r.getUserProjection();return d&&(l=r.getTransformFromProjections(d,t.viewState.projection)),new s.default(e.context,t.pixelRatio,t.extent,n,t.viewState.rotation,a,l)},t.getRenderPixel=function(e,t){const s=t.slice(0);return i.apply(e.inversePixelTransform.slice(),s),s},t.renderDeclutterItems=function(e,t){t&&t.clear();const s=e.declutterItems;for(let e=s.length-1;e>=0;--e){const n=s[e],i=n.items;for(let e=0,s=i.length;e<s;e+=3)t=i[e].renderDeclutter(i[e+1],i[e+2],n.opacity,t)}return s.length=0,t}})),define("node_modules/ol/src/style/Style",["require","exports","node_modules/ol/src/style/Circle","node_modules/ol/src/style/Fill","node_modules/ol/src/geom/GeometryType","node_modules/ol/src/style/Stroke","node_modules/ol/src/asserts"],(function(e,t,s,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createEditingStyle=t.createDefaultStyle=t.toFunction=void 0;class a{constructor(e){const t=e||{};this.geometry_=null,this.geometryFunction_=d,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}clone(){let e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new a({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=d,this.geometry_=e}setZIndex(e){this.zIndex_=e}}t.toFunction=function(e){let t;if("function"==typeof e)t=e;else{let s;if(Array.isArray(e))s=e;else{r.assert("function"==typeof e.getZIndex,41);s=[e]}t=function(){return s}}return t};let l=null;function d(e){return e.getGeometry()}t.createDefaultStyle=function(e,t){if(!l){const e=new n.default({color:"rgba(255,255,255,0.4)"}),t=new o.default({color:"#3399CC",width:1.25});l=[new a({image:new s.default({fill:e,stroke:t,radius:5}),fill:e,stroke:t})]}return l},t.createEditingStyle=function(){const e={},t=[255,255,255,1],r=[0,153,255,1];return e[i.default.POLYGON]=[new a({fill:new n.default({color:[255,255,255,.5]})})],e[i.default.MULTI_POLYGON]=e[i.default.POLYGON],e[i.default.LINE_STRING]=[new a({stroke:new o.default({color:t,width:5})}),new a({stroke:new o.default({color:r,width:3})})],e[i.default.MULTI_LINE_STRING]=e[i.default.LINE_STRING],e[i.default.CIRCLE]=e[i.default.POLYGON].concat(e[i.default.LINE_STRING]),e[i.default.POINT]=[new a({image:new s.default({radius:6,fill:new n.default({color:r}),stroke:new o.default({color:t,width:1.5})}),zIndex:1/0})],e[i.default.MULTI_POINT]=e[i.default.POINT],e[i.default.GEOMETRY_COLLECTION]=e[i.default.POLYGON].concat(e[i.default.LINE_STRING],e[i.default.POINT]),e},t.default=a})),define("node_modules/ol/src/Feature",["require","exports","node_modules/ol/src/Object","node_modules/ol/src/events/EventType","node_modules/ol/src/asserts","node_modules/ol/src/events"],(function(e,t,s,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createStyleFunction=void 0;class r extends s.default{constructor(e){if(super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addEventListener(s.getChangeEventType(this.geometryName_),this.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new r(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const s=this.getStyle();return s&&e.setStyle(s),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(o.unlistenByKey(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=o.listen(e,n.default.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?a(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeEventListener(s.getChangeEventType(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=e,this.addEventListener(s.getChangeEventType(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()}}function a(e){if("function"==typeof e)return e;{let t;if(Array.isArray(e))t=e;else{i.assert("function"==typeof e.getZIndex,41);t=[e]}return function(){return t}}}t.createStyleFunction=a,t.default=r})),define("poc/TileTreeExt",["require","exports","node_modules/ol/src/extent","poc/fun/explode"],(function(e,t,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileTreeExt=void 0;t.TileTreeExt=class{constructor(e,t){this.tree=e,this.minZoom=(null==t?void 0:t.minZoom)||0,this.maxZoom=(null==t?void 0:t.maxZoom)||10}setVisible(e,t=!0){const{tileIdentifier:s,visible:n}=e.getProperties();if(!s)throw"feature has no tile identifier, register using addFeature";n!==t&&(e.setProperties({visible:t},!0),this.setStale(s,!0))}addFeature(e,t){var s;const n=null===(s=e.getGeometry())||void 0===s?void 0:s.getExtent();if(!n)throw"unable to compute extent of feature";t=t||this.findByExtent(n);let{features:i}=this.tree.decorate(t);return i||(i=[],this.tree.decorate(t,{features:i})),e.setProperties({tileIdentifier:t,Z:this.findZByExtent(n),type:"feature",visible:!1}),i.push(e),this.setStale(t,!0),t}getFeatures(e){return this.tree.decorate(e).features}findZByExtent(e){const t=n.explode(e),s=n.explode(this.tree.asExtent()),i=Math.floor(Math.log2(s.w/t.w)),o=Math.floor(Math.log2(s.h/t.h));return Math.max(this.minZoom,Math.min(this.maxZoom,Math.min(i,o)))}findByExtent(e){const t=n.explode(e),s=n.explode(this.tree.asExtent());let i=this.findZByExtent(e);for(;0<=i;){const e=Math.pow(2,i),n=Math.floor(e*(t.xmin-s.xmin)/s.w),o=Math.floor(e*(t.ymin-s.ymin)/s.h),r=Math.floor(e*(t.xmax-s.xmin)/s.w),a=Math.floor(e*(t.ymax-s.ymin)/s.h);if(n===r&&o===a)return{X:n,Y:o,Z:i};i--}throw"out of bounds"}getCenter(e){return this.tree.decorate(e).center}setCenter(e,[t,s]){this.tree.decorate(e,{center:[t,s]}),this.setStale(e,!0)}setCenterOfMass(e,t){this.tree.decorate(e,{com:t})}getCenterOfMass(e){var t;return(null===(t=this.tree.decorate(e))||void 0===t?void 0:t.com)||null}getMass(e){var t;return(null===(t=this.tree.decorate(e))||void 0===t?void 0:t.mass)||null}setMass(e,t){const s=this.getMass(e);if(s!==t){if(s)throw"mass cannot be destroyed";this.tree.decorate(e,{mass:t}),this.setStale(e,!0)}}areChildrenLoaded(e){const{tree:t}=this;return 4===t.children(e).length}centerOfMass(e){const t=this.tree,n=t.findByXYZ(e,{force:!0});if(!n){return{center:s.getCenter(t.asExtent(e)),mass:0,featureMass:0}}if(n&&!this.isStale(e)){const t=this.getCenterOfMass(e);return{center:t.center,mass:t.darkMass,featureMass:-t.lightMass}}const i=t.children(e).map(e=>this.centerOfMass(e)),o=i.reduce((e,t)=>e+t.featureMass,0),r=this.getLightMatter(e).reduce((e,t)=>e+t.mass,0),a=this.getDarkMatter(e);let l=[0,0],d=0;[...a,...i].forEach(e=>{l.forEach((t,s)=>l[s]=t+e.center[s]*e.mass),d+=e.mass}),0===d?l=t.asCenter(e):l.forEach((e,t)=>l[t]=e/d);const u=r+o,c=this.getMass(e),h=null===c?d:c-u;this.setCenterOfMass(e,{darkMass:h,lightMass:u,center:l}),this.setStale(e,!1);const f=this.getCenterOfMass(e);return{mass:f.darkMass,featureMass:-f.lightMass,center:f.center}}getFeatureMatter(e,t=!1){const n=this.getFeatures(e);if(!n)return[];return n.filter(e=>t===e.getProperties().visible).map(e=>({center:s.getCenter(e.getGeometry().getExtent()),mass:1}))}getDarkMatter(e){return this.getFeatureMatter(e,!1)}getLightMatter(e){return this.getFeatureMatter(e,!0)}isStale(e){return!1!==this.tree.decorate(e).stale}setStale(e,t=!0){if(this.tree.decorate(e).stale===t)return;if(this.tree.decorate(e,{stale:t}),!t)return;const s=this.tree.parent(e);s.Z<this.minZoom||this.setStale(s,!0)}density(e,t=0){const{mass:s}=this.centerOfMass(e);return s*Math.pow(4,e.Z-t)}}})),define("poc/FeatureServiceRequest",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})),define("poc/fun/asQueryString",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asQueryString=void 0,t.asQueryString=function(e){return Object.keys(e).map(t=>`${t}=${e[t]}`).join("&")}})),define("poc/FeatureServiceProxy",["require","exports","poc/fun/asQueryString"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureServiceProxy=void 0;t.FeatureServiceProxy=class{constructor(e){this.options=e}fetch(e){return __awaiter(this,void 0,void 0,(function*(){const t=`${this.options.service}?${s.asQueryString(e)}`,n=yield fetch(t);if(!n.ok)throw n.statusText;return yield n.json()}))}}})),define("poc/fun/removeAuthority",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeAuthority=void 0,t.removeAuthority=function(e){var t;return parseInt((null===(t=e.split(":",2))||void 0===t?void 0:t.pop())||"0")}})),define("node_modules/ol/src/format/FormatType",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"}})),define("node_modules/ol/src/format/Feature",["require","exports","node_modules/ol/src/proj/Units","node_modules/ol/src/util","node_modules/ol/src/obj","node_modules/ol/src/proj"],(function(e,t,s,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformExtentWithOptions=t.transformGeometryWithOptions=void 0;t.default=class{constructor(){this.dataProjection=null,this.defaultFeatureProjection=null}getReadOptions(e,t){let n;if(t){let i=t.dataProjection?o.get(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()===s.default.TILE_PIXELS&&(i=o.get(i),i.setWorldExtent(t.extent)),n={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(n)}adaptOptions(e){return i.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)}getType(){return n.abstract()}readFeature(e,t){return n.abstract()}readFeatures(e,t){return n.abstract()}readGeometry(e,t){return n.abstract()}readProjection(e){return n.abstract()}writeFeature(e,t){return n.abstract()}writeFeatures(e,t){return n.abstract()}writeGeometry(e,t){return n.abstract()}},t.transformGeometryWithOptions=function(e,t,s){const n=s?o.get(s.featureProjection):null,i=s?o.get(s.dataProjection):null;let r;if(r=n&&i&&!o.equivalent(n,i)?(t?e.clone():e).transform(t?n:i,t?i:n):e,t&&s&&void 0!==s.decimals){const t=Math.pow(10,s.decimals),n=function(e){for(let s=0,n=e.length;s<n;++s)e[s]=Math.round(e[s]*t)/t;return e};r===e&&(r=e.clone()),r.applyTransform(n)}return r},t.transformExtentWithOptions=function(e,t){const s=t?o.get(t.featureProjection):null,n=t?o.get(t.dataProjection):null;return s&&n&&!o.equivalent(s,n)?o.transformExtent(e,n,s):e}})),define("node_modules/ol/src/format/JSONFeature",["require","exports","node_modules/ol/src/format/Feature","node_modules/ol/src/format/FormatType","node_modules/ol/src/util"],(function(e,t,s,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class o extends s.default{constructor(){super()}getType(){return n.default.JSON}readFeature(e,t){return this.readFeatureFromObject(r(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(r(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return i.abstract()}readFeaturesFromObject(e,t){return i.abstract()}readGeometry(e,t){return this.readGeometryFromObject(r(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return i.abstract()}readProjection(e){return this.readProjectionFromObject(r(e))}readProjectionFromObject(e){return i.abstract()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return i.abstract()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return i.abstract()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return i.abstract()}}function r(e){if("string"==typeof e){const t=JSON.parse(e);return t||null}return null!==e?e:null}t.default=o})),define("node_modules/ol/src/format/EsriJSON",["require","exports","node_modules/ol/src/Feature","node_modules/ol/src/geom/GeometryLayout","node_modules/ol/src/geom/GeometryType","node_modules/ol/src/format/JSONFeature","node_modules/ol/src/geom/LineString","node_modules/ol/src/geom/LinearRing","node_modules/ol/src/geom/MultiLineString","node_modules/ol/src/geom/MultiPoint","node_modules/ol/src/geom/MultiPolygon","node_modules/ol/src/geom/Point","node_modules/ol/src/geom/Polygon","node_modules/ol/src/asserts","node_modules/ol/src/obj","node_modules/ol/src/extent","node_modules/ol/src/geom/flat/deflate","node_modules/ol/src/proj","node_modules/ol/src/geom/flat/orient","node_modules/ol/src/format/Feature"],(function(e,t,s,n,i,o,r,a,l,d,u,c,h,f,_,g,m,p,y,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const x={};x[i.default.POINT]=function(e){let t;t=void 0!==e.m&&void 0!==e.z?new c.default([e.x,e.y,e.z,e.m],n.default.XYZM):void 0!==e.z?new c.default([e.x,e.y,e.z],n.default.XYZ):void 0!==e.m?new c.default([e.x,e.y,e.m],n.default.XYM):new c.default([e.x,e.y]);return t},x[i.default.LINE_STRING]=function(e){const t=S(e);return new r.default(e.paths[0],t)},x[i.default.POLYGON]=function(e){const t=S(e);return new h.default(e.rings,t)},x[i.default.MULTI_POINT]=function(e){const t=S(e);return new d.default(e.points,t)},x[i.default.MULTI_LINE_STRING]=function(e){const t=S(e);return new l.default(e.paths,t)},x[i.default.MULTI_POLYGON]=function(e){const t=S(e);return new u.default(e.rings,t)};const E={};E[i.default.POINT]=function(e,t){const s=e.getCoordinates();let i;const o=e.getLayout();o===n.default.XYZ?i={x:s[0],y:s[1],z:s[2]}:o===n.default.XYM?i={x:s[0],y:s[1],m:s[2]}:o===n.default.XYZM?i={x:s[0],y:s[1],z:s[2],m:s[3]}:o===n.default.XY?i={x:s[0],y:s[1]}:f.assert(!1,34);return i},E[i.default.LINE_STRING]=function(e,t){const s=M(e);return{hasZ:s.hasZ,hasM:s.hasM,paths:[e.getCoordinates()]}},E[i.default.POLYGON]=function(e,t){const s=M(e);return{hasZ:s.hasZ,hasM:s.hasM,rings:e.getCoordinates(!1)}},E[i.default.MULTI_POINT]=function(e,t){const s=M(e);return{hasZ:s.hasZ,hasM:s.hasM,points:e.getCoordinates()}},E[i.default.MULTI_LINE_STRING]=function(e,t){const s=M(e);return{hasZ:s.hasZ,hasM:s.hasM,paths:e.getCoordinates()}},E[i.default.MULTI_POLYGON]=function(e,t){const s=M(e),n=e.getCoordinates(!1),i=[];for(let e=0;e<n.length;e++)for(let t=n[e].length-1;t>=0;t--)i.push(n[e][t]);return{hasZ:s.hasZ,hasM:s.hasM,rings:i}};class C extends o.default{constructor(e){const t=e||{};super(),this.geometryName_=t.geometryName}readFeatureFromObject(e,t,n){const i=e,o=T(i.geometry,t),r=new s.default;if(this.geometryName_&&r.setGeometryName(this.geometryName_),r.setGeometry(o),i.attributes){r.setProperties(i.attributes,!0);const e=i.attributes[n];void 0!==e&&r.setId(e)}return r}readFeaturesFromObject(e,t){const s=t||{};if(e.features){const t=[],n=e.features;for(let i=0,o=n.length;i<o;++i)t.push(this.readFeatureFromObject(n[i],s,e.objectIdFieldName));return t}return[this.readFeatureFromObject(e,s)]}readGeometryFromObject(e,t){return T(e,t)}readProjectionFromObject(e){if(e.spatialReference&&void 0!==e.spatialReference.wkid){const t=e.spatialReference.wkid;return p.get("EPSG:"+t)}return null}writeGeometryObject(e,t){return P(e,this.adaptOptions(t))}writeFeatureObject(e,t){t=this.adaptOptions(t);const s={};if(!e.hasProperties())return s.attributes={},s;const n=e.getProperties(),i=e.getGeometry();return i&&(s.geometry=P(i,t),t&&t.featureProjection&&(s.geometry.spatialReference={wkid:Number(p.get(t.featureProjection).getCode().split(":").pop())}),delete n[e.getGeometryName()]),_.isEmpty(n)?s.attributes={}:s.attributes=n,s}writeFeaturesObject(e,t){t=this.adaptOptions(t);const s=[];for(let n=0,i=e.length;n<i;++n)s.push(this.writeFeatureObject(e[n],t));return{features:s}}}function T(e,t){if(!e)return null;let s;if("number"==typeof e.x&&"number"==typeof e.y)s=i.default.POINT;else if(e.points)s=i.default.MULTI_POINT;else if(e.paths){s=1===e.paths.length?i.default.LINE_STRING:i.default.MULTI_LINE_STRING}else if(e.rings){const t=e,n=S(t),o=function(e,t){const s=[],n=[],i=[];let o,r;for(o=0,r=e.length;o<r;++o){s.length=0,m.deflateCoordinates(s,0,e[o],t.length);y.linearRingIsClockwise(s,0,s.length,t.length)?n.push([e[o]]):i.push(e[o])}for(;i.length;){const e=i.shift();let t=!1;for(o=n.length-1;o>=0;o--){const s=n[o][0];if(g.containsExtent(new a.default(s).getExtent(),new a.default(e).getExtent())){n[o].push(e),t=!0;break}}t||n.push([e.reverse()])}return n}(t.rings,n);1===o.length?(s=i.default.POLYGON,e=_.assign({},e,{rings:o[0]})):(s=i.default.MULTI_POLYGON,e=_.assign({},e,{rings:o}))}const n=x[s];return v.transformGeometryWithOptions(n(e),!1,t)}function S(e){let t=n.default.XY;return!0===e.hasZ&&!0===e.hasM?t=n.default.XYZM:!0===e.hasZ?t=n.default.XYZ:!0===e.hasM&&(t=n.default.XYM),t}function M(e){const t=e.getLayout();return{hasZ:t===n.default.XYZ||t===n.default.XYZM,hasM:t===n.default.XYM||t===n.default.XYZM}}function P(e,t){return(0,E[e.getType()])(v.transformGeometryWithOptions(e,!0,t),t)}t.default=C})),define("poc/fun/slowloop",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.slowloop=void 0,t.slowloop=function(e,t=1e3,s=1,n){return __awaiter(this,void 0,void 0,(function*(){let i=0,o=0;const r=[];return new Promise((a,l)=>{(!e||0>=s)&&a();const d=setInterval(()=>{if(i===e.length&&(i=0,++o===s))return a(r),void clearInterval(d);try{n&&n({index:i,cycle:o}),r[i]=e[i](),i++}catch(e){clearInterval(d),l(e)}},t)})}))}})),define("poc/AgsFeatureLoader",["require","exports","poc/FeatureServiceProxy","poc/fun/removeAuthority","node_modules/ol/src/format/EsriJSON","poc/fun/slowloop"],(function(e,t,s,n,i,o){"use strict";function r(e){return{f:"json",geometry:"",geometryType:"esriGeometryEnvelope",inSR:n.removeAuthority(e.getCode()),outFields:"*",outSR:n.removeAuthority(e.getCode()),returnGeometry:!0,returnCountOnly:!1,spatialRel:"esriSpatialRelContains"}}function a(e){const[t,s,n,i]=e;return JSON.stringify({xmin:t,ymin:s,xmax:n,ymax:i})}Object.defineProperty(t,"__esModule",{value:!0}),t.AgsFeatureLoader=void 0;const l=256,d=100;t.AgsFeatureLoader=class{constructor(e){this.options=e,this.helper=e.tree}loader(e,t){return __awaiter(this,void 0,void 0,(function*(){return this.loadTile(e,t,this.options.maxDepth||0)}))}loadTile(e,t,n){return __awaiter(this,void 0,void 0,(function*(){if(n<0)throw"cannot load tile with negative depth";const{tree:i,url:u}=this.options,c=this.options.minRecordCount||l,h=this.options.networkThrottle||d,f=new s.FeatureServiceProxy({service:u}),_=yield(()=>__awaiter(this,void 0,void 0,(function*(){const s=r(t);s.geometry=a(i.tree.asExtent(e)),s.returnCountOnly=!0;try{return(yield f.fetch(s)).count}catch(e){return console.error(e),0}})))();if(this.helper.setMass(e,_),0>=n||0==_)return _;if(_<=c){const s=r(t);s.geometry=a(i.tree.asExtent(e));try{const e=yield this.loadFeatures(s,f,t);console.assert(e.length===_,`feature count may not match count response when the data is changes: ${_} != ${e.length}`),e.forEach(e=>this.helper.addFeature(e))}catch(e){console.error(e)}}else _>c&&(yield Promise.all(yield o.slowloop(i.tree.quads(e).map(e=>()=>this.loadTile(e,t,n-1)),h)));return _}))}loadFeatures(e,t,s){return __awaiter(this,void 0,void 0,(function*(){const n=new i.default,o=yield t.fetch(e);return n.readFeatures(o,{featureProjection:s})}))}}})),define("poc/fun/flatten",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flatten=void 0,t.flatten=function(e){return[].concat(...e)}})),define("poc/test/ags-feature-loader-test",["require","exports","mocha","chai","poc/AgsFeatureLoader","poc/TileTree","node_modules/ol/src/proj","poc/TileTreeExt","poc/fun/flatten"],(function(e,t,s,n,i,o,r,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.describe("AgsFeatureLoader tests",()=>{s.it("loads feature counts for specific tiles up to 0 levels deep",()=>__awaiter(void 0,void 0,void 0,(function*(){const e=r.get("EPSG:3857"),t=new o.TileTree({extent:e.getExtent()}),s=new a.TileTreeExt(t,{minZoom:6,maxZoom:20}),l=new i.AgsFeatureLoader({url:"http://localhost:3002/mock/sampleserver3/arcgis/rest/services/Petroleum/KSFields/FeatureServer/0/query",minRecordCount:10,tree:s,networkThrottle:500}),d=yield l.loader({X:58,Y:156,Z:8},e);n.assert.equal(481,d,"q0");const u=yield l.loader({X:58,Y:157,Z:8},e);n.assert.equal(433,u,"q1");const c=yield l.loader({X:59,Y:156,Z:8},e);n.assert.equal(396,c,"q2");const h=yield l.loader({X:59,Y:157,Z:8},e);n.assert.equal(260,h,"q3");const f=yield l.loader({X:29,Y:78,Z:7},e);n.assert.equal(d+u+c+h+47,f)}))),s.it("loads starting from {0,0,0} 11 levels deep",()=>__awaiter(void 0,void 0,void 0,(function*(){const e=r.get("EPSG:3857"),t=new o.TileTree({extent:e.getExtent()}),s=new a.TileTreeExt(t,{minZoom:6,maxZoom:20}),l=new i.AgsFeatureLoader({url:"http://localhost:3002/mock/sampleserver3/arcgis/rest/services/Petroleum/KSFields/FeatureServer/0/query",maxDepth:11,minRecordCount:1e3,tree:s}),d=yield l.loader({X:0,Y:0,Z:0},e);n.assert.equal(6918,d),n.assert.equal(s.getMass({X:0,Y:0,Z:0}),d,"loader is modifying the tree data on level-0 tiles"),n.assert.equal(s.getMass({X:0,Y:1,Z:1}),d,"loader is modifying the tree data on level-1 tiles"),n.assert.equal(s.getMass({X:0,Y:2,Z:2}),d,"loader is modifying the tree data on level-2 tiles"),console.log(s.tree.descendants().filter(e=>!!s.getMass(e))),n.assert.equal(s.getMass({X:1,Y:4,Z:3}),d,"loader is modifying the tree data on level-3 tiles"),n.assert.equal(s.getMass({X:3,Y:9,Z:4}),d,"loader is modifying the tree data on level-4 tiles"),n.assert.equal(s.getMass({X:7,Y:19,Z:5}),6651,"loader is modifying the tree data on level-5 tiles"),n.assert.equal(s.getMass({X:14,Y:39,Z:6}),6345,"loader is modifying the tree data on level-6 tiles"),n.assert.equal(s.getMass({X:28,Y:78,Z:7}),3052,"loader is modifying the tree data on level-7 tiles"),n.assert.equal(s.getMass({X:57,Y:158,Z:8}),938,"loader is modifying the tree data on level-8 tiles"),n.assert.equal(s.getMass({X:114,Y:314,Z:9}),160,"loader is modifying the tree data on level-9 tiles"),n.assert.equal(s.centerOfMass({X:114,Y:314,Z:9}).mass,160,"level-9 tiles contain mass: 114,314"),n.assert.equal(s.centerOfMass({X:115,Y:316,Z:9}).mass,163,"level-9 tiles contain mass: 115,316"),n.assert.deepEqual(s.centerOfMass(s.tree.parent({X:115,Y:316,Z:9})).mass,938,"parent has mass 938"),n.assert.deepEqual(s.getFeatures(s.tree.parent({X:115,Y:316,Z:9})).length,23,"some of that mass is made up of 23 features"),n.assert.deepEqual(s.tree.children(s.tree.parent({X:115,Y:316,Z:9})).map(e=>s.centerOfMass(e).mass),[544,206,2,163],"the children must have 938-23 units of mass"),n.assert.equal(s.getFeatures({X:115,Y:316,Z:9}).length,7,"level-9 tiles contain features: 115,316"),yield l.loader({X:115,Y:316,Z:9},e)}))).timeout(6e4),s.it("drills into a tile until all features are loaded up to 10 levels deep but never more than 128 features at a time",()=>__awaiter(void 0,void 0,void 0,(function*(){const e=r.get("EPSG:3857"),t=new o.TileTree({extent:e.getExtent()}),s=new a.TileTreeExt(t,{minZoom:6,maxZoom:20}),d=new i.AgsFeatureLoader({url:"http://localhost:3002/mock/sampleserver3/arcgis/rest/services/Petroleum/KSFields/FeatureServer/0/query",maxDepth:10,minRecordCount:128,tree:s}),u=yield d.loader({X:59,Y:157,Z:8},e);n.assert.equal(260,u,"q3"),n.assert.equal(s.getMass({X:59,Y:157,Z:8}),u,"loader is modifying the tree data on level-8 tiles");const c={X:118,Y:314,Z:9};n.assert.equal(s.getMass(c),75,"loader is modifying the tree data on level-9 tiles");const h=s.tree.children(c).map(e=>s.getMass(e));n.assert.deepEqual(h,[null,null,null,null]);const f=s.tree.children(c).map(e=>s.getFeatures(e).length);n.assert.deepEqual(f,[2,1,1,3]),n.assert.deepEqual(s.getFeatures(c).length,6),n.assert.equal(s.centerOfMass(c).mass,75,"tile9 moment mass is the same as its count");const _=s.tree.children(c).map(e=>s.centerOfMass(e).mass);n.assert.deepEqual(_,[26,19,7,17],"69 features accounted for");const[g]=s.tree.quads(c);n.assert.deepEqual(g,{X:236,Y:628,Z:10});const m=s.tree.descendants(g).map(e=>{var t;return Object.assign(Object.assign({},e),{count:null===(t=s.getFeatures(e))||void 0===t?void 0:t.length})}).filter(e=>!!e.count);n.assert.deepEqual(m,[{X:472,Y:1256,Z:11,count:1},{X:472,Y:1257,Z:11,count:2},{X:473,Y:1256,Z:11,count:1},{X:944,Y:2513,Z:12,count:1},{X:944,Y:2515,Z:12,count:2},{X:945,Y:2515,Z:12,count:1},{X:946,Y:2512,Z:12,count:1},{X:947,Y:2512,Z:12,count:1},{X:1889,Y:5025,Z:13,count:1},{X:1890,Y:5029,Z:13,count:1},{X:1890,Y:5030,Z:13,count:1},{X:1894,Y:5025,Z:13,count:1},{X:1895,Y:5024,Z:13,count:1},{X:1895,Y:5026,Z:13,count:1},{X:3776,Y:10050,Z:14,count:1},{X:3776,Y:10055,Z:14,count:1},{X:3777,Y:10054,Z:14,count:1},{X:3777,Y:10062,Z:14,count:1},{X:3781,Y:10062,Z:14,count:2},{X:3790,Y:10048,Z:14,count:1},{X:3790,Y:10049,Z:14,count:1}]),n.assert.equal(m.reduce((e,t)=>e+t.count,0),24,"tile contains 26 features but all but 2 are in sub-tile");const p=l.flatten(m.map(e=>s.getFeatures(e).map(e=>e.getProperties().objectid)));n.assert.equal(p.length,24,"These are the feature ids associated with the sub-tiles"),console.log(p),n.assert.deepEqual(p,[1840,2122,2556,4974,4671,5127,3571,1907,229,2844,1715,6820,2545,3231,4869,5895,4117,2602,2601,1913,3489,3574,6609,6556])}))).timeout(6e4),s.it("hits internal GIS system PART 1",()=>__awaiter(void 0,void 0,void 0,(function*(){const e=r.get("EPSG:3857"),t=new o.TileTree({extent:e.getExtent()}),s=new a.TileTreeExt(t,{minZoom:6,maxZoom:20}),l=new i.AgsFeatureLoader({url:"http://localhost:3002/mock/gis1/arcgis/rest/services/IPS112/QA112UK/FeatureServer/1/query",maxDepth:5,minRecordCount:128,networkThrottle:100,tree:s}),d=yield l.loader({X:0,Y:0,Z:0},e);n.assert.equal(d,9076,"sanity check"),console.log(d,s.tree.save()),n.assert.deepEqual(s.centerOfMass({X:0,Y:1,Z:1}).mass,9076,"level 1"),n.assert.deepEqual(s.centerOfMass({X:1,Y:2,Z:2}).mass,9076,"level 2"),n.assert.deepEqual(s.centerOfMass({X:3,Y:5,Z:3}).mass,9076,"level 3"),n.assert.deepEqual(s.centerOfMass({X:7,Y:10,Z:4}).mass,9076,"level 4"),n.assert.deepEqual(s.centerOfMass({X:15,Y:21,Z:5}).mass,9076,"level 5")}))).timeout(1e4),s.it("hits internal GIS system PART 2",()=>__awaiter(void 0,void 0,void 0,(function*(){const e=r.get("EPSG:3857"),t=new o.TileTree({extent:e.getExtent()}),s=new a.TileTreeExt(t,{minZoom:6,maxZoom:20}),l=new i.AgsFeatureLoader({tree:s,url:"http://localhost:3002/mock/gis1/arcgis/rest/services/IPS112/QA112UK/FeatureServer/1/query",maxDepth:5,minRecordCount:128,networkThrottle:10}),d=yield l.loader({X:15,Y:21,Z:5},e);n.assert.equal(d,9076,"sanity check"),console.log(d,s.tree.save().data.filter(e=>0<e[3].mass)),n.assert.deepEqual(s.getMass({X:31,Y:42,Z:6}),804,"level 6"),n.assert.deepEqual(s.getMass({X:63,Y:85,Z:7}),804,"level 7"),n.assert.deepEqual(s.getMass({X:126,Y:171,Z:8}),714,"level 8"),n.assert.deepEqual(s.getMass({X:252,Y:343,Z:9}),47,"level 9"),n.assert.deepEqual(s.getMass({X:504,Y:688,Z:10}),204,"level 10")}))).timeout(1e4)})})),define("poc/test/xyz-test",["require","exports","mocha","chai","node_modules/ol/src/proj","poc/fun/asExtent","poc/fun/asXYZ"],(function(e,t,s,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.describe("XYZ testing",()=>{s.it("asExtent test",()=>{const e=[0,0,16,16];let t=o.asExtent(e,{X:0,Y:0,Z:0});n.assert.deepEqual(t,[0,0,16,16]),t=o.asExtent(e,{X:0,Y:0,Z:1}),n.assert.deepEqual(t,[0,0,8,8]),t=o.asExtent(e,{X:1,Y:0,Z:1}),n.assert.deepEqual(t,[8,0,16,8]),t=o.asExtent(e,{X:1,Y:0,Z:2}),n.assert.deepEqual(t,[4,0,8,4]),t=o.asExtent(e,{X:1,Y:0,Z:3}),n.assert.deepEqual(t,[2,0,4,2]),t=o.asExtent(e,{X:3,Y:1020,Z:10}),n.assert.deepEqual(t,[.046875,15.9375,.0625,15.953125])}),s.it("asXYZ test",()=>{const e=[0,0,16,16];let t=r.asXYZ(e,[0,0,16,16]);n.assert.deepEqual(t,{X:0,Y:0,Z:0}),t=r.asXYZ(e,[0,4,4,8]),n.assert.deepEqual(t,{X:0,Y:1,Z:2}),t=r.asXYZ(e,[.046875,15.9375,.0625,15.953125]),n.assert.deepEqual(t,{X:3,Y:1020,Z:10})}),s.it("exhaustive XYZ",()=>{[[0,0,1024,1024],i.get("EPSG:3857").getExtent(),i.get("EPSG:4326").getExtent()].forEach(e=>{for(let t=0;t<10;t++)for(let s=0;s<10;s++)for(let i=0;i<10;i++){const a=o.asExtent(e,{X:s,Y:i,Z:t}),l=r.asXYZ(e,a);n.assert.equal(l.X,s,"x"),n.assert.equal(l.Y,i,"y"),n.assert.equal(l.Z,t,"z")}})})})})),define("node_modules/ol/src/loadingstrategy",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tile=t.bbox=t.all=void 0,t.all=function(e,t){return[[-1/0,-1/0,1/0,1/0]]},t.bbox=function(e,t){return[e]},t.tile=function(e){return function(t,s){const n=e.getZForResolution(s),i=e.getTileRangeForExtentAndZ(t,n),o=[],r=[n,0,0];for(r[1]=i.minX;r[1]<=i.maxX;++r[1])for(r[2]=i.minY;r[2]<=i.maxY;++r[2])o.push(e.getTileCoordExtent(r));return o}}})),define("node_modules/ol/src/source/VectorEventType",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"}})),define("node_modules/quickselect/index",["require","exports"],(function(e,t){"use strict";function s(e,t,i,o,r){for(;o>i;){if(o-i>600){var a=o-i+1,l=t-i+1,d=Math.log(a),u=.5*Math.exp(2*d/3),c=.5*Math.sqrt(d*u*(a-u)/a)*(l-a/2<0?-1:1);s(e,t,Math.max(i,Math.floor(t-l*u/a+c)),Math.min(o,Math.floor(t+(a-l)*u/a+c)),r)}var h=e[t],f=i,_=o;for(n(e,i,t),r(e[o],h)>0&&n(e,i,o);f<_;){for(n(e,f,_),f++,_--;r(e[f],h)<0;)f++;for(;r(e[_],h)>0;)_--}0===r(e[i],h)?n(e,i,_):n(e,++_,o),_<=t&&(i=_+1),t<=_&&(o=_-1)}}function n(e,t,s){var n=e[t];e[t]=e[s],e[s]=n}function i(e,t){return e<t?-1:e>t?1:0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,o,r){s(e,t,n||0,o||e.length-1,r||i)}})),define("node_modules/rbush/index",["require","exports","node_modules/quickselect/index"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function n(e,t,s){if(!s)return t.indexOf(e);for(let n=0;n<t.length;n++)if(s(e,t[n]))return n;return-1}function i(e,t){o(e,0,e.children.length,t,e)}function o(e,t,s,n,i){i||(i=_(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let o=t;o<s;o++){const t=e.children[o];r(i,e.leaf?n(t):t)}return i}function r(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function a(e,t){return e.minX-t.minX}function l(e,t){return e.minY-t.minY}function d(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function u(e){return e.maxX-e.minX+(e.maxY-e.minY)}function c(e,t){const s=Math.max(e.minX,t.minX),n=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),o=Math.min(e.maxY,t.maxY);return Math.max(0,i-s)*Math.max(0,o-n)}function h(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function f(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function _(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,t,n,i,o){const r=[t,n];for(;r.length;){if((n=r.pop())-(t=r.pop())<=i)continue;const a=t+Math.ceil((n-t)/i/2)*i;s.default(e,a,t,n,o),r.push(t,a,a,n)}}t.default=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const s=[];if(!f(e,t))return s;const n=this.toBBox,i=[];for(;t;){for(let o=0;o<t.children.length;o++){const r=t.children[o],a=t.leaf?n(r):r;f(e,a)&&(t.leaf?s.push(r):h(e,a)?this._all(r,s):i.push(r))}t=i.pop()}return s}collides(e){let t=this.data;if(!f(e,t))return!1;const s=[];for(;t;){for(let n=0;n<t.children.length;n++){const i=t.children[n],o=t.leaf?this.toBBox(i):i;if(f(e,o)){if(t.leaf||h(e,o))return!0;s.push(i)}}t=s.pop()}return!1}load(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(let t=0;t<e.length;t++)this.insert(e[t]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const e=this.data;this.data=t,t=e}this._insert(t,this.data.height-t.height-1,!0)}else this.data=t;return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=_([]),this}remove(e,t){if(!e)return this;let s=this.data;const i=this.toBBox(e),o=[],r=[];let a,l,d;for(;s||o.length;){if(s||(s=o.pop(),l=o[o.length-1],a=r.pop(),d=!0),s.leaf){const i=n(e,s.children,t);if(-1!==i)return s.children.splice(i,1),o.push(s),this._condense(o),this}d||s.leaf||!h(s,i)?l?(a++,s=l.children[a],d=!1):s=null:(o.push(s),r.push(a),a=0,l=s,s=s.children[0])}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const s=[];for(;e;)e.leaf?t.push(...e.children):s.push(...e.children),e=s.pop();return t}_build(e,t,s,n){const o=s-t+1;let r,a=this._maxEntries;if(o<=a)return r=_(e.slice(t,s+1)),i(r,this.toBBox),r;n||(n=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,n-1))),r=_([]),r.leaf=!1,r.height=n;const l=Math.ceil(o/a),d=l*Math.ceil(Math.sqrt(a));g(e,t,s,d,this.compareMinX);for(let i=t;i<=s;i+=d){const t=Math.min(i+d-1,s);g(e,i,t,l,this.compareMinY);for(let s=i;s<=t;s+=l){const i=Math.min(s+l-1,t);r.children.push(this._build(e,s,i,n-1))}}return i(r,this.toBBox),r}_chooseSubtree(e,t,s,n){for(;n.push(t),!t.leaf&&n.length-1!==s;){let s,n=1/0,r=1/0;for(let a=0;a<t.children.length;a++){const l=t.children[a],u=d(l),c=(i=e,o=l,(Math.max(o.maxX,i.maxX)-Math.min(o.minX,i.minX))*(Math.max(o.maxY,i.maxY)-Math.min(o.minY,i.minY))-u);c<r?(r=c,n=u<n?u:n,s=l):c===r&&u<n&&(n=u,s=l)}t=s||t.children[0]}var i,o;return t}_insert(e,t,s){const n=s?e:this.toBBox(e),i=[],o=this._chooseSubtree(n,this.data,t,i);for(o.children.push(e),r(o,n);t>=0&&i[t].children.length>this._maxEntries;)this._split(i,t),t--;this._adjustParentBBoxes(n,i,t)}_split(e,t){const s=e[t],n=s.children.length,o=this._minEntries;this._chooseSplitAxis(s,o,n);const r=this._chooseSplitIndex(s,o,n),a=_(s.children.splice(r,s.children.length-r));a.height=s.height,a.leaf=s.leaf,i(s,this.toBBox),i(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(s,a)}_splitRoot(e,t){this.data=_([e,t]),this.data.height=e.height+1,this.data.leaf=!1,i(this.data,this.toBBox)}_chooseSplitIndex(e,t,s){let n,i=1/0,r=1/0;for(let a=t;a<=s-t;a++){const t=o(e,0,a,this.toBBox),l=o(e,a,s,this.toBBox),u=c(t,l),h=d(t)+d(l);u<i?(i=u,n=a,r=h<r?h:r):u===i&&h<r&&(r=h,n=a)}return n||s-t}_chooseSplitAxis(e,t,s){const n=e.leaf?this.compareMinX:a,i=e.leaf?this.compareMinY:l;this._allDistMargin(e,t,s,n)<this._allDistMargin(e,t,s,i)&&e.children.sort(n)}_allDistMargin(e,t,s,n){e.children.sort(n);const i=this.toBBox,a=o(e,0,t,i),l=o(e,s-t,s,i);let d=u(a)+u(l);for(let n=t;n<s-t;n++){const t=e.children[n];r(a,e.leaf?i(t):t),d+=u(a)}for(let n=s-t-1;n>=t;n--){const t=e.children[n];r(l,e.leaf?i(t):t),d+=u(l)}return d}_adjustParentBBoxes(e,t,s){for(let n=s;n>=0;n--)r(t[n],e)}_condense(e){for(let t,s=e.length-1;s>=0;s--)0===e[s].children.length?s>0?(t=e[s-1].children,t.splice(t.indexOf(e[s]),1)):this.clear():i(e[s],this.toBBox)}}})),define("node_modules/ol/src/structs/RBush",["require","exports","node_modules/rbush/index","node_modules/ol/src/extent","node_modules/ol/src/util","node_modules/ol/src/obj"],(function(e,t,s,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.rbush_=new s.default(e),this.items_={}}insert(e,t){const s={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(s),this.items_[i.getUid(t)]=s}load(e,t){const s=new Array(t.length);for(let n=0,o=t.length;n<o;n++){const o=e[n],r=t[n],a={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:r};s[n]=a,this.items_[i.getUid(r)]=a}this.rbush_.load(s)}remove(e){const t=i.getUid(e),s=this.items_[t];return delete this.items_[t],null!==this.rbush_.remove(s)}update(e,t){const s=this.items_[i.getUid(t)],o=[s.minX,s.minY,s.maxX,s.maxY];n.equals(o,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map((function(e){return e.value}))}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map((function(e){return e.value}))}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let s;for(let n=0,i=e.length;n<i;n++)if(s=t(e[n]),s)return s;return s}isEmpty(){return o.isEmpty(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return n.createOrUpdate(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}})),define("node_modules/ol/src/VectorTile",["require","exports","node_modules/ol/src/Tile","node_modules/ol/src/TileState"],(function(e,t,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i extends s.default{constructor(e,t,s,n,i,o){super(e,t,o),this.extent=null,this.format_=n,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=i,this.url_=s}getFormat(){return this.format_}getFeatures(){return this.features_}getKey(){return this.url_}load(){this.state==n.default.IDLE&&(this.setState(n.default.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(n.default.ERROR)}setFeatures(e){this.features_=e,this.setState(n.default.LOADED)}setLoader(e){this.loader_=e}}t.default=i})),define("node_modules/ol/src/featureloader",["require","exports","node_modules/ol/src/format/FormatType","node_modules/ol/src/functions"],(function(e,t,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setWithCredentials=t.xhr=t.loadFeaturesXhr=void 0;let i=!1;function o(e,t,n,o){return function(r,a,l){const d=new XMLHttpRequest;d.open("GET","function"==typeof e?e(r,a,l):e,!0),t.getType()==s.default.ARRAY_BUFFER&&(d.responseType="arraybuffer"),d.withCredentials=i,d.onload=function(e){if(!d.status||d.status>=200&&d.status<300){const e=t.getType();let i;e==s.default.JSON||e==s.default.TEXT?i=d.responseText:e==s.default.XML?(i=d.responseXML,i||(i=(new DOMParser).parseFromString(d.responseText,"application/xml"))):e==s.default.ARRAY_BUFFER&&(i=d.response),i?n.call(this,t.readFeatures(i,{extent:r,featureProjection:l}),t.readProjection(i)):o.call(this)}else o.call(this)}.bind(this),d.onerror=function(){o.call(this)}.bind(this),d.send()}}t.loadFeaturesXhr=o,t.xhr=function(e,t){return o(e,t,(function(e,t){const s=this;"function"==typeof s.addFeatures&&s.addFeatures(e)}),n.VOID)},t.setWithCredentials=function(e){i=e}})),define("node_modules/ol/src/source/Vector",["require","exports","node_modules/ol/src/Collection","node_modules/ol/src/CollectionEventType","node_modules/ol/src/events/Event","node_modules/ol/src/events/EventType","node_modules/ol/src/ObjectEventType","node_modules/ol/src/structs/RBush","node_modules/ol/src/source/Source","node_modules/ol/src/source/State","node_modules/ol/src/source/VectorEventType","node_modules/ol/src/functions","node_modules/ol/src/loadingstrategy","node_modules/ol/src/asserts","node_modules/ol/src/extent","node_modules/ol/src/array","node_modules/ol/src/util","node_modules/ol/src/obj","node_modules/ol/src/events","node_modules/ol/src/featureloader"],(function(e,t,s,n,i,o,r,a,l,d,u,c,h,f,_,g,m,p,y,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VectorSourceEvent=void 0;class x extends i.default{constructor(e,t){super(e),this.feature=t}}t.VectorSourceEvent=x;class E extends l.default{constructor(e){const t=e||{};super({attributions:t.attributions,projection:void 0,state:d.default.READY,wrapX:void 0===t.wrapX||t.wrapX}),this.loader_=c.VOID,this.format_=t.format,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&(f.assert(this.format_,7),this.loader_=v.xhr(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:h.all;const n=void 0===t.useSpatialIndex||t.useSpatialIndex;let i,o;this.featuresRtree_=n?new a.default:null,this.loadedExtentsRtree_=new a.default,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?o=t.features:t.features&&(i=t.features,o=i.getArray()),n||void 0!==i||(i=new s.default(o)),void 0!==o&&this.addFeaturesInternal(o),void 0!==i&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=m.getUid(e);if(!this.addToIndex_(t,e))return void(this.featuresCollection_&&this.featuresCollection_.remove(e));this.setupChangeEvents_(t,e);const s=e.getGeometry();if(s){const t=s.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(t,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new x(u.default.ADDFEATURE,e))}setupChangeEvents_(e,t){this.featureChangeKeys_[e]=[y.listen(t,o.default.CHANGE,this.handleFeatureChange_,this),y.listen(t,r.default.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(e,t){let s=!0;const n=t.getId();return void 0!==n&&(n.toString()in this.idIndex_?s=!1:this.idIndex_[n.toString()]=t),s&&(f.assert(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),s}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],s=[],n=[];for(let t=0,n=e.length;t<n;t++){const n=e[t],i=m.getUid(n);this.addToIndex_(i,n)&&s.push(n)}for(let e=0,i=s.length;e<i;e++){const i=s[e],o=m.getUid(i);this.setupChangeEvents_(o,i);const r=i.getGeometry();if(r){const e=r.getExtent();t.push(e),n.push(i)}else this.nullGeometryFeatures_[o]=i}this.featuresRtree_&&this.featuresRtree_.load(t,n);for(let e=0,t=s.length;e<t;e++)this.dispatchEvent(new x(u.default.ADDFEATURE,s[e]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(u.default.ADDFEATURE,(function(s){t||(t=!0,e.push(s.feature),t=!1)})),this.addEventListener(u.default.REMOVEFEATURE,(function(s){t||(t=!0,e.remove(s.feature),t=!1)})),e.addEventListener(n.default.ADD,function(e){t||(t=!0,this.addFeature(e.element),t=!1)}.bind(this)),e.addEventListener(n.default.REMOVE,function(e){t||(t=!0,this.removeFeature(e.element),t=!1)}.bind(this)),this.featuresCollection_=e}clear(e){if(e){for(const e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(y.unlistenByKey)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this));for(const e in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[e])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new x(u.default.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const s=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(s,(function(s){return s.getGeometry().intersectsCoordinate(e)?t(s):void 0}))}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,(function(s){if(s.getGeometry().intersectsExtent(e)){const e=t(s);if(e)return e}}))}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray():this.featuresRtree_&&(e=this.featuresRtree_.getAll(),p.isEmpty(this.nullGeometryFeatures_)||g.extend(e,p.getValues(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,(function(e){t.push(e)})),t}getFeaturesInExtent(e){return this.featuresRtree_?this.featuresRtree_.getInExtent(e):this.featuresCollection_?this.featuresCollection_.getArray():[]}getClosestFeatureToCoordinate(e,t){const s=e[0],n=e[1];let i=null;const o=[NaN,NaN];let r=1/0;const a=[-1/0,-1/0,1/0,1/0],l=t||c.TRUE;return this.featuresRtree_.forEachInExtent(a,(function(e){if(l(e)){const t=e.getGeometry(),l=r;if(r=t.closestPointXY(s,n,o,r),r<l){i=e;const t=Math.sqrt(r);a[0]=s-t,a[1]=n-t,a[2]=s+t,a[3]=n+t}}})),i}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return void 0!==t?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return void 0!==t?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,s=m.getUid(t),n=t.getGeometry();if(n){const e=n.getExtent();s in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[s],this.featuresRtree_&&this.featuresRtree_.insert(e,t)):this.featuresRtree_&&this.featuresRtree_.update(e,t)}else s in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[s]=t);const i=t.getId();if(void 0!==i){const e=i.toString();this.idIndex_[e]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[e]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[s]=t;this.changed(),this.dispatchEvent(new x(u.default.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return void 0!==t?t in this.idIndex_:m.getUid(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_.isEmpty()&&p.isEmpty(this.nullGeometryFeatures_)}loadFeatures(e,t,s){const n=this.loadedExtentsRtree_,i=this.strategy_(e,t);this.loading=!1;for(let e=0,o=i.length;e<o;++e){const o=i[e];n.forEachInExtent(o,(function(e){return _.containsExtent(e.extent,o)}))||(this.loader_.call(this,o,t,s),n.insert(o,{extent:o.slice()}),this.loading=this.loader_!==c.VOID)}}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let s;t.forEachInExtent(e,(function(t){if(_.equals(t.extent,e))return s=t,!0})),s&&t.remove(s)}removeFeature(e){const t=m.getUid(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e),this.changed()}removeFeatureInternal(e){const t=m.getUid(e);this.featureChangeKeys_[t].forEach(y.unlistenByKey),delete this.featureChangeKeys_[t];const s=e.getId();void 0!==s&&delete this.idIndex_[s.toString()],delete this.uidIndex_[t],this.dispatchEvent(new x(u.default.REMOVEFEATURE,e))}removeFromIdIndex_(e){let t=!1;for(const s in this.idIndex_)if(this.idIndex_[s]===e){delete this.idIndex_[s],t=!0;break}return t}setLoader(e){this.loader_=e}setUrl(e){f.assert(this.format_,7),this.setLoader(v.xhr(e,this.format_))}}t.default=E})),define("poc/fun/split",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.split=void 0,t.split=function(e,t){const s=[[],[]];return e.forEach(e=>s[t(e)?0:1].push(e)),s}})),define("poc/AgsClusterSource",["require","exports","poc/TileTree","poc/TileTreeExt","node_modules/ol/src/source/Vector","poc/AgsFeatureLoader","node_modules/ol/src/Feature","node_modules/ol/src/geom/Point","node_modules/ol/src/tilegrid","node_modules/ol/src/loadingstrategy","poc/fun/split"],(function(e,t,s,n,i,o,r,a,l,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AgsClusterSource=void 0;function c(e,t,s){return s.indexOf(e)===t}class h extends i.default{constructor(e){const{url:t,minRecordCount:i,tileSize:r}=e,a=l.createXYZ({tileSize:r}),u=d.tile(a),c=new s.TileTree({extent:a.getExtent()});e.treeTileState&&c.load(e.treeTileState),super({strategy:u}),this.tree=new n.TileTreeExt(c,{minZoom:5,maxZoom:16}),this.tileSize=r,this.loadingStrategy=u,this.isFirstDraw=!0,this.priorResolution=0,this.minRecordCount=i,this.maxRecordCount=i,this.featureLoader=new o.AgsFeatureLoader({tree:this.tree,url:t,maxDepth:3,minRecordCount:i})}loadFeatures(e,t,s){return __awaiter(this,void 0,void 0,(function*(){const{tree:n}=this,i=this.loadingStrategy(e,t).map(e=>n.tree.asXyz(e));if(!i.length)return;const o=i[0].Z;this.isFirstDraw&&(this.isFirstDraw&&console.log("rendering 1st tree"),this.isFirstDraw=!1,this.renderTree(n,o,s)),t!==this.priorResolution&&(this.priorResolution=t,i.forEach(e=>__awaiter(this,void 0,void 0,(function*(){yield this.loadTile(e,s);(yield this.loadDescendantsUntil(e,s,e=>{const t=n.getMass(e)||0,s=t>this.maxRecordCount,i=t<this.minRecordCount,r=e.Z>=o+3;return!(s||!r&&!i)})).length&&this.renderTree(this.tree,o,s)}))))}))}loadDescendantsUntil(e,t,s){return __awaiter(this,void 0,void 0,(function*(){if(s(e))return[];const n=this.tree.tree.quads(e),i=n.filter(e=>"number"!=typeof this.tree.getMass(e));yield this.loadAllChildren(this.tree,e,t);const o=yield Promise.all(n.map(e=>this.loadDescendantsUntil(e,t,s)));return i.concat(...o)}))}renderTree(e,t,s){const n=[];e.tree.visit((t,s)=>{0===e.tree.children(s).length&&n.push(s)},{}),this.getFeatures().forEach(e=>e.setProperties({visible:!1}));const[i,o]=u.split(n,t=>{if(!e.tree.findByXYZ(t).data)return!1;return!(0>=(e.getMass(t)||0))&&!!e.getCenter(t)});this.reduce(i,t).forEach(s=>this.render(e,s,t)),o.forEach(t=>this.unrender(e,t)),i.filter(t=>!!e.getFeatures(t)).forEach(s=>this.render(e,s,t)),this.getFeatures().filter(e=>"feature"===e.getProperties().type).forEach(e=>e.setProperties({visible:!0}))}reduce(e,t){const{tree:s}=this;e.forEach(e=>{s.tree.decorate(e,{yieldToParent:!1})}),e.forEach(e=>{if(e.Z>t+3&&!s.tree.decorate(e).yieldToParent){const t=s.tree.parent(e);s.tree.children(t).forEach(e=>s.tree.decorate(e,{yieldToParent:!0}))}});let[n,i]=u.split(e,e=>{const{yieldToParent:t}=s.tree.decorate(e);return!t});return i=i.filter(c).map(e=>s.tree.parent(e)),i.length&&(i=this.reduce(i,t)),i.concat(n)}loadAllChildren(e,t,s){return __awaiter(this,void 0,void 0,(function*(){return Promise.all(e.tree.quads(t).map(e=>this.loadTile(e,s)))}))}loadTile(e,t){return __awaiter(this,void 0,void 0,(function*(){const s=yield this.featureLoader.loader(e,t);this.tree.setMass(e,s)}))}tileDensity(e,t){const{Z:s}=t;return Math.pow(4,e-s)}unrender(e,t){const{feature:s}=e.tree.decorate(t);s&&s.setProperties({visible:!1})}render(e,t,s){let{feature:n}=e.tree.decorate(t);if(n)return void n.setProperties({visible:!0});if(!e.getMass(t))return;const i=e.getFeatures(t);if(i)return i.forEach(e=>e.setProperties({visible:!0,type:"feature",tileIdentifier:t})),void this.addFeatures(i);const o=new a.default(e.getCenter(t));n=new r.default;const l=e.getMass(t);n.setGeometry(o),n.setProperties({visible:!0,tileIdentifier:t,text:e.tree.decorate(t).text||""+l,type:e.tree.decorate(t).type||"cluster",mass:l,density:this.tileDensity(s,t)}),this.addFeature(n),e.tree.decorate(t,{feature:n})}}t.AgsClusterSource=h})),define("poc/types/TileTreeEncoder",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})),define("poc/TileTreeTersifier",["require","exports","poc/TileTree","node_modules/ol/src/extent"],(function(e,t,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileTreeTersifier=void 0;t.TileTreeTersifier=class{unstringify(e){const{extent:t,data:i}=JSON.parse(e),o=new s.TileTree({extent:t});return{extent:t,data:i.map(e=>{const[t,s,i,r,a,l]=e,d=o.asExtent({X:t,Y:s,Z:i}),[u,c]=n.getCenter(d);return[t,s,i,{count:r,center:[u+a/10,c+l/10]}]})}}stringify(e){const{extent:t,data:i}=e,o=new s.TileTree({extent:t}),r=i.map(([e,t,s,i])=>{const r=n.getCenter(o.asExtent({X:e,Y:t,Z:s}));return[e,t,s,i.count,...i.center.map((e,t)=>Math.round(10*(e-r[t])))]});return JSON.stringify({extent:t,data:r})}}})),define("poc/test/treetile-test",["require","exports","mocha","chai","poc/TileTree","node_modules/ol/src/proj","node_modules/ol/src/tilegrid","node_modules/ol/src/loadingstrategy","node_modules/ol/src/source/VectorEventType","poc/AgsClusterSource","poc/fun/explode","poc/fun/tiny","poc/TileTreeTersifier"],(function(e,t,s,n,i,o,r,a,l,d,u,c,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.describe("TileTree Tests",()=>{s.it("decorate test",()=>{const e=new i.TileTree({extent:[0,0,10,10]});let t={X:10,Y:10,Z:10};n.assert.equal(e.decorate(t,{foo:"bar"}).foo,"bar"),n.assert.equal(e.decorate(t).foo,"bar")})}),s.describe("TileTree Tests",()=>{s.it("creates a tile tree",()=>{const e=[0,0,10,10],t=new i.TileTree({extent:e}),s=t.findByExtent(e);n.assert.isTrue(c.isEq(e[0],t.asExtent(s)[0]))}),s.it("inserts an extent outside of the bounds of the current tree",()=>{const e=new i.TileTree({extent:[0,0,1,1]});n.assert.throws(()=>{e.findByExtent([1,1,2,2])},"invalid X"),n.assert.throws(()=>{e.findByExtent([.1,.1,.9,1.00001])},"invalid extent")}),s.it("inserts an extent that misaligns to the established scale",()=>{const e=new i.TileTree({extent:[0,0,1,1]});n.assert.throws(()=>{e.findByExtent([0,0,.4,.4])},"invalid extent"),n.assert.throws(()=>{e.findByExtent([0,0,.5,.4])},"invalid extent"),n.assert.throws(()=>{e.findByExtent([.1,0,.6,.5])},"invalid extent")}),s.it("uses 3857 to find a tile for a given depth and coordinate",()=>{const e=o.get("EPSG:3857").getExtent(),t=new i.TileTree({extent:e}),s=-5009377.085697312,r=[t.findByPoint({zoom:3,point:[-1,-1]}),t.findByPoint({zoom:3,point:[1,-1]}),t.findByPoint({zoom:3,point:[-1,1]}),t.findByPoint({zoom:3,point:[1,1]})].map(e=>t.asExtent(e));n.assert.isTrue(c.isEq(r[0][0],s),"q0.x"),n.assert.equal(r[1][0],0,"q1.x"),n.assert.equal(r[2][0],s,"q2.x"),n.assert.equal(r[3][0],0,"q3.x"),n.assert.equal(r[0][1],s,"q0.y"),n.assert.equal(r[1][1],s,"q1.y"),n.assert.equal(r[2][1],0,"q2.y"),n.assert.equal(r[3][1],0,"q3.y")}),s.it("can cache tiles from a TileGrid",()=>{const e=o.get("EPSG:3857").getExtent(),t=new i.TileTree({extent:e}),s=r.createXYZ({extent:e});for(let i=0;i<=8;i++)console.log("adding "+i),a=i,s.forEachTileCoord(e,a,e=>{const[n,i,o]=e,r=s.getTileCoordExtent(e);t.decorate(t.findByExtent(r),{tileCoord:e})}),n.assert.equal(Math.pow(2,i)-1,t.visit((e,s)=>{const{tileCoord:n}=t.decorate(s);return Math.max(e,n?n[1]:e)},0),`addTiles(${i})`);var a}),s.it("integrates with a tiling strategy",()=>{const e=o.get("EPSG:3857").getExtent(),t=u.explode(e),s=new i.TileTree({extent:e}),l=r.createXYZ({extent:e}),d=a.tile(l),c=l.getResolutions(),h=t.w/256;n.assert.equal(c[0],h,"meters per pixel"),c.forEach((e,t)=>{n.assert.equal(e,h*Math.pow(2,-t),`resolution[${t}]`)});{let t=e;c.forEach((e,n)=>{const i=d(t,e);i.forEach(e=>s.findByExtent(e)),t=i[0]})}}),s.it("integrates with a feature source",()=>{const e=o.get("EPSG:3857"),t=new d.AgsClusterSource({tileSize:256,url:"http://localhost:3002/mock/sampleserver3/arcgis/rest/services/Petroleum/KSFields/FeatureServer/0/query",minRecordCount:100});t.loadTile({X:0,Y:0,Z:0},e),t.on(l.default.ADDFEATURE,e=>{const{count:t,resolution:s}=e.feature.getProperties()})})}),s.describe("Cluster Rendering Rules",()=>{s.it("tests ensureQuads",()=>{let e=new i.TileTree({extent:[0,0,10,10]}).quads({X:1,Y:1,Z:1});n.assert.deepEqual({X:2,Y:2,Z:2},e[0],"1st quadrant"),n.assert.deepEqual({X:2,Y:3,Z:2},e[1],"2nd quadrant"),n.assert.deepEqual({X:3,Y:3,Z:2},e[2],"3rd quadrant"),n.assert.deepEqual({X:3,Y:2,Z:2},e[3],"4th quadrant")})}),s.describe("Preserve TileTree State",()=>{s.it("stringify a tree",()=>{const e=new i.TileTree({extent:[0,0,10,10]});n.assert.equal('{"extent":[0,0,10,10],"data":[]}',JSON.stringify(e.save()),"empty");let t=0,s=0,o=0;for(e.findByXYZ({X:t,Y:s,Z:o},{force:!0}),n.assert.equal('{"extent":[0,0,10,10],"data":[]}',JSON.stringify(e.save()),"root node only"),t=3,s=20,o=5,e.findByXYZ({X:t,Y:s,Z:o},{force:!0}).data.center=[1,2],n.assert.equal('{"extent":[0,0,10,10],"data":[[3,20,5,{"center":[1,2]}]]}',JSON.stringify(e.save()),"deep child"),t=10;t<20;t+=3){e.findByXYZ({X:t,Y:s,Z:o},{force:!0}).data.count=t}n.assert.equal("[[3,20,5,[[1,2],null]],[10,20,5,[null,10]],[13,20,5,[null,13]],[16,20,5,[null,16]],[19,20,5,[null,19]]]",JSON.stringify(e.save().data.map(([e,t,s,n])=>[e,t,s,[n.center,n.count]])),"deep child")}),s.it("destringify into a tree",()=>{const e=new h.TileTreeTersifier,t=o.get("EPSG:3857").getExtent(),s='{"extent":[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244],"data":[[6,19,5,267,0,0],[6,20,5,-1,7827152,-4696291],[7,19,5,6658,0,0],[7,20,5,-1,-4696291,-4696291],[14,38,6,6595,-315816,4479220],[14,39,6,6364,0,0],[15,38,6,0,0,0],[15,39,6,306,0,0],[27,78,7,202,0,0],[27,79,7,66,0,0],[27,80,7,0,0,0],[28,78,7,3114,0,0],[28,79,7,1608,0,0],[28,80,7,-1,0,0],[29,78,7,1652,0,0],[29,79,7,51,0,0],[29,80,7,0,0,0],[56,156,8,315,0,0],[56,157,8,812,0,0],[56,158,8,590,0,0],[56,159,8,49,0,0],[57,156,8,576,0,0],[57,157,8,1447,0,0],[57,158,8,982,0,0],[57,159,8,8,0,0],[58,156,8,515,0,0],[58,157,8,472,0,0],[59,156,8,423,0,0],[59,157,8,292,0,0],[114,314,9,185,0,0],[114,315,9,384,0,0],[115,314,9,468,0,0],[115,315,9,442,0,0]]}',r=`{"extent":[${t}],"data":[[6,19,5,{"count":267,"center":[-11897270.578531114,4383204.949985148]}],[6,20,5,{"count":-1,"center":[-11114555.408890907,5165920.119625352]}],[7,19,5,{"count":6658,"center":[-10644926.307106785,4383204.949985148]}],[7,20,5,{"count":-1,"center":[-11114555.408890907,5165920.119625352]}],[14,38,6,{"count":6595,"center":[-10989593.952922117,4518040.841452657]}],[14,39,6,{"count":6364,"center":[-10958012.374962866,4696291.017841228]}],[15,38,6,{"count":0,"center":[-10331840.239250705,4070118.8821290666]}],[15,39,6,{"count":306,"center":[-10331840.239250705,4696291.017841228]}],[27,78,7,{"count":202,"center":[-11427641.476746991,4539747.983913187]}],[27,79,7,{"count":66,"center":[-11427641.476746991,4852834.051769268]}],[27,80,7,{"count":0,"center":[-11427641.476746991,5165920.119625352]}],[28,78,7,{"count":3114,"center":[-11114555.408890907,4539747.983913187]}],[28,79,7,{"count":1608,"center":[-11114555.408890907,4852834.051769268]}],[28,80,7,{"count":-1,"center":[-11114555.408890907,5165920.119625352]}],[29,78,7,{"count":1652,"center":[-10801469.341034826,4539747.983913187]}],[29,79,7,{"count":51,"center":[-10801469.341034826,4852834.051769268]}],[29,80,7,{"count":0,"center":[-10801469.341034826,5165920.119625352]}],[56,156,8,{"count":315,"center":[-11192826.925854929,4461476.466949167]}],[56,157,8,{"count":812,"center":[-11192826.925854929,4618019.500877207]}],[56,158,8,{"count":590,"center":[-11192826.925854929,4774562.534805248]}],[56,159,8,{"count":49,"center":[-11192826.925854929,4931105.568733292]}],[57,156,8,{"count":576,"center":[-11036283.891926888,4461476.466949167]}],[57,157,8,{"count":1447,"center":[-11036283.891926888,4618019.500877207]}],[57,158,8,{"count":982,"center":[-11036283.891926888,4774562.534805248]}],[57,159,8,{"count":8,"center":[-11036283.891926888,4931105.568733292]}],[58,156,8,{"count":515,"center":[-10879740.857998848,4461476.466949167]}],[58,157,8,{"count":472,"center":[-10879740.857998848,4618019.500877207]}],[59,156,8,{"count":423,"center":[-10723197.824070806,4461476.466949167]}],[59,157,8,{"count":292,"center":[-10723197.824070806,4618019.500877207]}],[114,314,9,{"count":185,"center":[-11075419.650408898,4578883.742395197]}],[114,315,9,{"count":384,"center":[-11075419.650408898,4657155.259359219]}],[115,314,9,{"count":468,"center":[-10997148.13344488,4578883.742395197]}],[115,315,9,{"count":442,"center":[-10997148.13344488,4657155.259359219]}]]}`;n.assert.equal(Math.round(100-100*s.length/r.length),71);const a=new i.TileTree({extent:t});a.load(JSON.parse(r)),n.assert.equal(JSON.stringify(a.save()),r,"save=load");const l=e.stringify(a.save());n.assert.equal(l,s,"terserfied");const d=i.TileTree.create(e.unstringify(l)),u=a.save().data,f=d.save().data;n.assert.equal(f.length,u.length,"tree from tersified"),f.forEach((e,t)=>{n.assert.equal(e[0],u[t][0],"X"),n.assert.equal(e[1],u[t][1],"Y"),n.assert.equal(e[2],u[t][2],"Z"),n.assert.equal(e[3].count,u[t][3].count,"count"),n.assert.isTrue(c.isEq(e[3].center[0],u[t][3].center[0],.1),"cx"),n.assert.isTrue(c.isEq(e[3].center[1],u[t][3].center[1],.1),"cy")})}),s.it("all the descendents of a tile share that tile as a common ancestor",()=>{const e=o.get("EPSG:3857").getExtent(),t=new i.TileTree({extent:e}),s={X:236,Y:628,Z:10},r=[{X:472,Y:1256,Z:11,count:1},{X:472,Y:1257,Z:11,count:2},{X:473,Y:1256,Z:11,count:1},{X:944,Y:2513,Z:12,count:1},{X:944,Y:2515,Z:12,count:2},{X:945,Y:2515,Z:12,count:1},{X:946,Y:2512,Z:12,count:1},{X:947,Y:2512,Z:12,count:1},{X:1889,Y:5025,Z:13,count:1},{X:1890,Y:5029,Z:13,count:1},{X:1890,Y:5030,Z:13,count:1},{X:1894,Y:5025,Z:13,count:1},{X:1895,Y:5024,Z:13,count:1},{X:1895,Y:5026,Z:13,count:1},{X:3776,Y:10050,Z:14,count:1},{X:3776,Y:10055,Z:14,count:1},{X:3777,Y:10054,Z:14,count:1},{X:3777,Y:10062,Z:14,count:1},{X:3781,Y:10062,Z:14,count:2},{X:3790,Y:10048,Z:14,count:1},{X:3790,Y:10049,Z:14,count:1}].map(({X:e,Y:t,Z:s})=>({X:e,Y:t,Z:s}));r.forEach((e,s)=>t.decorate(e,{id:s}));const a=t.descendants(s);r.forEach((e,t)=>n.assert.deepEqual(e,a[t],"tile "+t)),n.assert.deepEqual(a,r);const l=a.map(e=>t.parent(e,e.Z-s.Z));n.assert.deepEqual(t.parent({X:474,Y:1256,Z:11}),{X:237,Y:628,Z:10}),n.assert.equal(237,237,"parent X is 1/2 of child rounded down"),n.assert.equal(474,474,"child X is twice parent"),l.forEach((e,t)=>n.assert.deepEqual(e,s,"level10Roots: "+t))})})})),define("poc/test/tiletreeext-test",["require","exports","mocha","chai","poc/TileTree","poc/TileTreeExt","poc/fun/tiny","poc/fun/flatten","node_modules/ol/src/geom/Point","node_modules/ol/src/Feature","poc/test/fun/isSamePoint"],(function(e,t,s,n,i,o,r,a,l,d,u){"use strict";function c(){return new i.TileTree({extent:[0,0,1,1]})}function h(e,t,s){console.log(e),n.assert.deepEqual(e,t,s)}Object.defineProperty(t,"__esModule",{value:!0}),s.describe("TileTreeExt Tests",()=>{s.it("findByExtent and findZByExtent test",()=>{const e=i.TileTree.create({extent:[0,0,16,16],data:[[0,0,0,{count:0,center:[0,0]}]]}),t=new o.TileTreeExt(e);h(t.findByExtent([0,0,1,1]),{X:0,Y:0,Z:3},"bottom-left most tile 1/16 total width"),h(t.findByExtent([.25,0,1,1]),{X:0,Y:0,Z:3},"not as wide but same tile as before"),h(t.findByExtent([.25,.25,.5,.5]),{X:0,Y:0,Z:4},"shifted right and up and deeper");{const e=[7.9,7.9,8.1,8.1];h(t.findByExtent(e),{X:0,Y:0,Z:0},"worst case scenario, cannot find a child"),h(t.findZByExtent(e),6,"can still get accurate Z")}h(t.findByExtent([10.1,10.1,10.11,10.11]),{X:323,Y:323,Z:9},"trusting this is correct."),n.assert.throws(()=>t.findByExtent([0,0,16.01,16]),"out of bounds")}),s.it("findByExtent and setMass test",()=>{const e=new i.TileTree({extent:[0,0,1,1]}),t=new o.TileTreeExt(e),s=e.findByExtent([0,0,.25,.25]),r=e.findByExtent([.25,0,.5,.25]),a=e.findByExtent([0,.25,.25,.5]),l=e.findByExtent([.25,.25,.5,.5]),d=e.findByExtent([.375,.375,.5,.5]);t.setMass(s,1),t.setMass(r,2),t.setMass(a,4),t.setMass(l,8),t.setMass(d,16);const u=e.visit((e,s)=>e+(t.getMass(s)||0),0);n.assert.equal(u,31),n.assert.throws(()=>t.setMass(s,0),"mass cannot be destroyed")}),s.it("findByExtent and setMass test",()=>{const e=new i.TileTree({extent:[0,0,1,1]}),t=new o.TileTreeExt(e),s=e.findByExtent([0,0,.25,.25]),r=e.findByExtent([.25,0,.5,.25]),a=e.findByExtent([0,.25,.25,.5]),l=e.findByExtent([.25,.25,.5,.5]),d=e.findByExtent([.375,.375,.5,.5]);t.setMass(s,1),t.setMass(r,2),t.setMass(a,4),t.setMass(l,8),t.setMass(d,16);const c=e.visit((e,s)=>e+(t.getMass(s)||0),0);n.assert.equal(c,31),n.assert.throws(()=>t.setMass(s,0),"mass cannot be destroyed");const{center:h,mass:f,featureMass:_}=t.centerOfMass({X:0,Y:0,Z:0});n.assert.equal(f,15,"the mass of the root is the sum of the mass of its children"),n.assert.equal(_,0,"no visible features therefore no visible mass"),u.isSamePoint(h,[.325,.35833333333333334],"center test")}),s.it("computes density",()=>{const e=new i.TileTree({extent:[0,0,10,10]}),t=new o.TileTreeExt(e),s={X:0,Y:0,Z:0};n.assert.equal(0,t.density(s),"root density is 0");const r=e.quads(s);r.forEach((e,s)=>t.setMass(e,1+s)),n.assert.equal(10,t.centerOfMass(s).mass,"total count"),n.assert.equal(10,t.density(s),"density at Z=0"),n.assert.equal(4,t.density(r[0]),"child 0"),n.assert.equal(8,t.density(r[1]),"child 1"),n.assert.equal(12,t.density(r[2]),"child 2"),n.assert.equal(16,t.density(r[3]),"child 3")}),s.it("computes center of mass of parent with undeclared mass",()=>{const e=new i.TileTree({extent:[0,0,16,16]}),t=new o.TileTreeExt(e),s={X:0,Y:0,Z:0},[a,l,d,u]=(e.findByXYZ(s),e.quads(s));let c=t.centerOfMass(s);n.assert.deepEqual(c.mass,0,"assumed to be massless"),n.assert.deepEqual(c.center,[8,8],"no mass => no center but center of tile seems reasonable"),t.setMass(a,4),c=t.centerOfMass(s),n.assert.deepEqual(c.mass,4,"mass of q0"),n.assert.deepEqual(c.center,[4,4],"center of mass of q0"),t.setMass(l,2),c=t.centerOfMass(s),n.assert.deepEqual(c.mass,6,"mass of q0 + q1"),n.assert.deepEqual(c.center,[4,8-4/3],"center of mass of q0+q1"),t.setMass(d,1),c=t.centerOfMass(s),n.assert.deepEqual(c.mass,7,"mass of q0 + q1 + q2"),n.assert.isTrue(r.isEq(c.center[0],8-20/7),"cx center of mass of q0 + q1 + q2"),n.assert.isTrue(r.isEq(c.center[1],8-4/7),"cy center of mass of q0 + q1 + q2"),t.setMass(u,8),c=t.centerOfMass(s),n.assert.deepEqual(c.mass,15,"mass of q0 + q1 + q2 + q3"),n.assert.deepEqual(c.center,[8.8,5.6],"center of mass of q0 + q1 + q2 + q3")}),s.it("calculate center of mass of tile with assigned mass of 10",()=>{const e=i.TileTree.create({extent:[0,0,10,10],data:[]}),t=new o.TileTreeExt(e),s={X:0,Y:0,Z:0};var r,a,l;n.assert.equal(t.density(s),0),t.setMass(s,10),n.assert.equal(t.density(s),10),r=t.centerOfMass(s),a={mass:10,center:[5,5],featureMass:0},l="root tile com",n.assert.equal(r.mass,a.mass,"mass: "+l),n.assert.equal(r.featureMass,a.featureMass,"featureMass: "+l),u.isSamePoint(r.center,a.center,"mass: "+l),t.setCenter(s,[1,1]);const d=t.centerOfMass(s);n.assert.equal(d.mass,10,"mass"),n.assert.equal(d.featureMass,0,"featureMass"),u.isSamePoint(d.center,[5,5],"center")}),s.it("calculate center of mass of tile of mass 100 with features",()=>{const e=c(),t=new o.TileTreeExt(e,{minZoom:0,maxZoom:19}),s={X:0,Y:0,Z:1};{t.setMass(s,100);let{center:e,mass:i}=t.centerOfMass(s);n.assert.equal(i,100,"mass of tile"),u.isSamePoint(e,[.25,.25],"center of tile")}const i=[];{const[e,o]=[3,3],r=new d.default(new l.default([1/e,1/o]));i.push(r);const a=t.addFeature(r);n.assert.deepEqual(a,{X:174762,Y:174762,Z:19}),t.setVisible(r,!1);const{mass:c,center:h}=t.centerOfMass(s);n.assert.equal(c,100,"tile mass is unaffected by dark matter in child tiles"),u.isSamePoint(h,[1/3,1/3],"new center of tile")}const r=e.children(s),f=a.flatten(r.map(t=>e.children(t)));h(r.map(e=>t.centerOfMass(e).mass),[1],"child masses"),h(f.map(e=>t.centerOfMass(e).mass),[1],"grandchild masses"),i.forEach(e=>t.setVisible(e,!0));{const{mass:e,center:i,featureMass:o}=t.centerOfMass(s);n.assert.equal(e,99,"mass reduced"),n.assert.equal(o,-1,"because of one visible feature"),u.isSamePoint(i,[1/4,1/4],"center shifted")}{const e=new d.default(new l.default([.9,0]));t.addFeature(e,s),t.setVisible(e,!1);const{center:i,mass:o,featureMass:r}=t.centerOfMass(s);n.assert.equal(o,99,"mass unaffected by hidden features"),n.assert.equal(r,-1,"feature mass also uneffected"),u.isSamePoint(i,[.9,0],"hidden features affect center")}{const i={X:0,Y:0,Z:7};n.assert.isNull(e.findByXYZ(i),"child does not exist"),t.setMass(i,1),n.assert.isNotNull(e.findByXYZ(i),"child exists");const{center:o,mass:r,featureMass:a}=t.centerOfMass(s);n.assert.equal(r,99,"mass unaffected by children without features"),n.assert.equal(a,-1,"feature mass unaffected by children without features"),u.isSamePoint(o,[.451953125,.001953125],"center shifts when adding a child with mass")}}),s.it("progressive center of mass calculations",()=>{const e=new o.TileTreeExt(c()),t={X:0,Y:0,Z:0},s=function(e){const t=new d.default;return t.setGeometry(new l.default(e)),t}([.5+1/2048,.5+1/2048]),i=e.addFeature(s);n.assert.deepEqual(i,{X:512,Y:512,Z:10}),e.setVisible(s,!1);{const{center:t,mass:s,featureMass:o}=e.centerOfMass(i),r=e.centerOfMass(i);n.assert.deepEqual(r,{center:t,mass:s,featureMass:o},"centerOfMass is repeatable"),n.assert.equal(s,1,"tile mass represents one hidden feature"),n.assert.equal(o,0,"tile has 0 visible features"),u.isSamePoint(t,[.5+1/2048,.5+1/2048],"p1 is hidden but just right of center")}{const{center:s,mass:i,featureMass:o}=e.centerOfMass(t);n.assert.equal(i,1,"one child tile has mass since one feature is hidden"),n.assert.equal(o,0,"no visible features"),u.isSamePoint(s,[.5+1/2048,.5+1/2048],"should have same center of mass as the only child tile")}e.setVisible(s,!0);{const{center:t,mass:s,featureMass:o}=e.centerOfMass(i),r=e.centerOfMass(i);n.assert.deepEqual(r,{center:t,mass:s,featureMass:o},"centerOfMass is repeatable"),n.assert.equal(s,0,"tile has no effective mass, all features are visible"),n.assert.equal(o,-1,"tile has 1 visible feature"),u.isSamePoint(t,[.5+1/2048,.5+1/2048],"no mass so default to tile center")}{const{center:s,mass:i,featureMass:o}=e.centerOfMass(t);n.assert.equal(i,0,"no child tile has mass since all features are visible"),n.assert.equal(o,-1,"one visible feature in child tile"),u.isSamePoint(s,[.5,.5],"no mass so default to center of tile")}})})})),define("node_modules/ol/src/renderer/Composite",["require","exports","node_modules/ol/src/renderer/Map","node_modules/ol/src/ObjectEventType","node_modules/ol/src/render/Event","node_modules/ol/src/render/EventType","node_modules/ol/src/source/State","node_modules/ol/src/css","node_modules/ol/src/render/canvas","node_modules/ol/src/layer/Layer","node_modules/ol/src/events","node_modules/ol/src/dom"],(function(e,t,s,n,i,o,r,a,l,d,u,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class h extends s.default{constructor(e){super(e),this.fontChangeListenerKey_=u.listen(l.checkedFonts,n.default.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=a.CLASS_UNSELECTABLE+" ol-layers";const s=e.getViewport();s.insertBefore(this.element_,s.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const s=this.getMap();if(s.hasListener(e)){const n=new i.default(e,void 0,t);s.dispatchEvent(n)}}disposeInternal(){u.unlistenByKey(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(e),this.dispatchRenderEvent(o.default.PRECOMPOSE,e);const t=e.layerStatesArray.sort((function(e,t){return e.zIndex-t.zIndex})),s=e.viewState;this.children_.length=0;let n=null;for(let i=0,o=t.length;i<o;++i){const o=t[i];if(e.layerIndex=i,!d.inView(o,s)||o.sourceState!=r.default.READY&&o.sourceState!=r.default.UNDEFINED)continue;const a=o.layer.render(e,n);a&&(a!==n&&(this.children_.push(a),n=a))}super.renderFrame(e),c.replaceChildren(this.element_,this.children_),this.dispatchRenderEvent(o.default.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}forEachLayerAtPixel(e,t,s,n,i){const o=t.viewState,r=t.layerStatesArray;for(let a=r.length-1;a>=0;--a){const l=r[a],u=l.layer;if(u.hasRenderer()&&d.inView(l,o)&&i(u)){const i=u.getRenderer().getDataAtPixel(e,t,s);if(i){const e=n(u,i);if(e)return e}}}}}t.default=h})),define("node_modules/ol/src/control/Attribution",["require","exports","node_modules/ol/src/control/Control","node_modules/ol/src/events/EventType","node_modules/ol/src/css","node_modules/ol/src/array","node_modules/ol/src/layer/Layer","node_modules/ol/src/dom"],(function(e,t,s,n,i,o,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class l extends s.default{constructor(e){const t=e||{};super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1);const s=void 0!==t.className?t.className:"ol-attribution",o=void 0!==t.tipLabel?t.tipLabel:"Attributions",r=void 0!==t.collapseLabel?t.collapseLabel:"»";"string"==typeof r?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r):this.collapseLabel_=r;const a=void 0!==t.label?t.label:"i";"string"==typeof a?(this.label_=document.createElement("span"),this.label_.textContent=a):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,d=document.createElement("button");d.setAttribute("type","button"),d.title=o,d.appendChild(l),d.addEventListener(n.default.CLICK,this.handleClick_.bind(this),!1);const u=s+" "+i.CLASS_UNSELECTABLE+" "+i.CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+i.CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=u,c.appendChild(this.ulElement_),c.appendChild(d),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t={},s=[],n=e.layerStatesArray;for(let i=0,o=n.length;i<o;++i){const o=n[i];if(!r.inView(o,e.viewState))continue;const a=o.layer.getSource();if(!a)continue;const l=a.getAttributions();if(!l)continue;const d=l(e);if(d)if(this.overrideCollapsible_||!1!==a.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(d))for(let e=0,n=d.length;e<n;++e)d[e]in t||(s.push(d[e]),t[d[e]]=!0);else d in t||(s.push(d),t[d]=!0)}return s}updateElement_(e){if(!e)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const t=this.collectSourceAttributions_(e),s=t.length>0;if(this.renderedVisible_!=s&&(this.element.style.display=s?"":"none",this.renderedVisible_=s),!o.equals(t,this.renderedAttributions_)){a.removeChildren(this.ulElement_);for(let e=0,s=t.length;e<s;++e){const s=document.createElement("li");s.innerHTML=t[e],this.ulElement_.appendChild(s)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(i.CLASS_COLLAPSED),this.collapsed_?a.replaceNode(this.collapseLabel_,this.label_):a.replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}t.default=l})),define("node_modules/ol/src/control/Rotate",["require","exports","node_modules/ol/src/control/Control","node_modules/ol/src/events/EventType","node_modules/ol/src/css","node_modules/ol/src/easing"],(function(e,t,s,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends s.default{constructor(e){const t=e||{};super({element:document.createElement("div"),render:t.render,target:t.target});const s=void 0!==t.className?t.className:"ol-rotate",o=void 0!==t.label?t.label:"⇧";this.label_=null,"string"==typeof o?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=o):(this.label_=o,this.label_.classList.add("ol-compass"));const r=t.tipLabel?t.tipLabel:"Reset rotation",a=document.createElement("button");a.className=s+"-reset",a.setAttribute("type","button"),a.title=r,a.appendChild(this.label_),a.addEventListener(n.default.CLICK,this.handleClick_.bind(this),!1);const l=s+" "+i.CLASS_UNSELECTABLE+" "+i.CLASS_CONTROL,d=this.element;d.className=l,d.appendChild(a),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(i.CLASS_HIDDEN)}handleClick_(e){e.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const e=this.getMap().getView();if(!e)return;const t=e.getRotation();void 0!==t&&(this.duration_>0&&t%(2*Math.PI)!=0?e.animate({rotation:0,duration:this.duration_,easing:o.easeOut}):e.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const s=t.viewState.rotation;if(s!=this.rotation_){const e="rotate("+s+"rad)";if(this.autoHide_){const e=this.element.classList.contains(i.CLASS_HIDDEN);e||0!==s?e&&0!==s&&this.element.classList.remove(i.CLASS_HIDDEN):this.element.classList.add(i.CLASS_HIDDEN)}this.label_.style.transform=e}this.rotation_=s}}t.default=r})),define("node_modules/ol/src/control/Zoom",["require","exports","node_modules/ol/src/control/Control","node_modules/ol/src/events/EventType","node_modules/ol/src/css","node_modules/ol/src/easing"],(function(e,t,s,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends s.default{constructor(e){const t=e||{};super({element:document.createElement("div"),target:t.target});const s=void 0!==t.className?t.className:"ol-zoom",o=void 0!==t.delta?t.delta:1,r=void 0!==t.zoomInLabel?t.zoomInLabel:"+",a=void 0!==t.zoomOutLabel?t.zoomOutLabel:"−",l=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",d=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=s+"-in",u.setAttribute("type","button"),u.title=l,u.appendChild("string"==typeof r?document.createTextNode(r):r),u.addEventListener(n.default.CLICK,this.handleClick_.bind(this,o),!1);const c=document.createElement("button");c.className=s+"-out",c.setAttribute("type","button"),c.title=d,c.appendChild("string"==typeof a?document.createTextNode(a):a),c.addEventListener(n.default.CLICK,this.handleClick_.bind(this,-o),!1);const h=s+" "+i.CLASS_UNSELECTABLE+" "+i.CLASS_CONTROL,f=this.element;f.className=h,f.appendChild(u),f.appendChild(c),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const t=this.getMap().getView();if(!t)return;const s=t.getZoom();if(void 0!==s){const n=t.getConstrainedZoom(s+e);this.duration_>0?(t.getAnimating()&&t.cancelAnimations(),t.animate({zoom:n,duration:this.duration_,easing:o.easeOut})):t.setZoom(n)}}}t.default=r})),define("node_modules/ol/src/control/FullScreen",["require","exports","node_modules/ol/src/control/Control","node_modules/ol/src/events/EventType","node_modules/ol/src/css","node_modules/ol/src/events","node_modules/ol/src/dom"],(function(e,t,s,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],l="enterfullscreen",d="leavefullscreen";class u extends s.default{constructor(e){const t=e||{};super({element:document.createElement("div"),target:t.target}),this.cssClassName_=void 0!==t.className?t.className:"ol-full-screen";const s=void 0!==t.label?t.label:"⤢";this.labelNode_="string"==typeof s?document.createTextNode(s):s;const o=void 0!==t.labelActive?t.labelActive:"×";this.labelActiveNode_="string"==typeof o?document.createTextNode(o):o,this.button_=document.createElement("button");const r=t.tipLabel?t.tipLabel:"Toggle full-screen";this.setClassName_(this.button_,h()),this.button_.setAttribute("type","button"),this.button_.title=r,this.button_.appendChild(this.labelNode_),this.button_.addEventListener(n.default.CLICK,this.handleClick_.bind(this),!1);const a=this.cssClassName_+" "+i.CLASS_UNSELECTABLE+" "+i.CLASS_CONTROL+" "+(c()?"":i.CLASS_UNSUPPORTED),l=this.element;l.className=a,l.appendChild(this.button_),this.keys_=void 0!==t.keys&&t.keys,this.source_=t.source}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){if(!c())return;const e=this.getMap();if(e)if(h())document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{let t;t=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:e.getTargetElement(),this.keys_?function(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():f(e)}(t):f(t)}}handleFullScreenChange_(){const e=this.getMap();h()?(this.setClassName_(this.button_,!0),r.replaceNode(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(l)):(this.setClassName_(this.button_,!1),r.replaceNode(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(d)),e&&e.updateSize()}setClassName_(e,t){const s=this.cssClassName_+"-true",n=this.cssClassName_+"-false",i=t?s:n;e.classList.remove(s),e.classList.remove(n),e.classList.add(i)}setMap(e){if(super.setMap(e),e)for(let e=0,t=a.length;e<t;++e)this.listenerKeys.push(o.listen(document,a[e],this.handleFullScreenChange_,this))}}function c(){const e=document.body;return!!(e.webkitRequestFullscreen||e.msRequestFullscreen&&document.msFullscreenEnabled||e.requestFullscreen&&document.fullscreenEnabled)}function h(){return!!(document.webkitIsFullScreen||document.msFullscreenElement||document.fullscreenElement)}function f(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}t.default=u})),define("node_modules/ol/src/control/MousePosition",["require","exports","node_modules/ol/src/control/Control","node_modules/ol/src/pointer/EventType","node_modules/ol/src/Object","node_modules/ol/src/proj","node_modules/ol/src/events"],(function(e,t,s,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a="projection",l="coordinateFormat";class d extends s.default{constructor(e){const t=e||{},s=document.createElement("div");s.className=void 0!==t.className?t.className:"ol-mouse-position",super({element:s,render:t.render,target:t.target}),this.addEventListener(i.getChangeEventType(a),this.handleProjectionChanged_),t.coordinateFormat&&this.setCoordinateFormat(t.coordinateFormat),t.projection&&this.setProjection(t.projection),this.undefinedHTML_=void 0!==t.undefinedHTML?t.undefinedHTML:"&#160;",this.renderOnMouseOut_=!!this.undefinedHTML_,this.renderedHTML_=s.innerHTML,this.mapProjection_=null,this.transform_=null}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(l)}getProjection(){return this.get(a)}handleMouseMove(e){const t=this.getMap();this.updateHTML_(t.getEventPixel(e))}handleMouseOut(e){this.updateHTML_(null)}setMap(e){if(super.setMap(e),e){const t=e.getViewport();this.listenerKeys.push(r.listen(t,n.default.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(r.listen(t,n.default.POINTEROUT,this.handleMouseOut,this))}}setCoordinateFormat(e){this.set(l,e)}setProjection(e){this.set(a,o.get(e))}updateHTML_(e){let t=this.undefinedHTML_;if(e&&this.mapProjection_){if(!this.transform_){const e=this.getProjection();this.transform_=e?o.getTransformFromProjections(this.mapProjection_,e):o.identityTransform}const s=this.getMap().getCoordinateFromPixelInternal(e);if(s){const e=o.getUserProjection();e&&(this.transform_=o.getTransformFromProjections(this.mapProjection_,e)),this.transform_(s,s);const n=this.getCoordinateFormat();t=n?n(s):s.toString()}}this.renderedHTML_&&t===this.renderedHTML_||(this.element.innerHTML=t,this.renderedHTML_=t)}render(e){const t=e.frameState;t?this.mapProjection_!=t.viewState.projection&&(this.mapProjection_=t.viewState.projection,this.transform_=null):this.mapProjection_=null}}t.default=d})),define("node_modules/ol/src/control/OverviewMap",["require","exports","node_modules/ol/src/renderer/Composite","node_modules/ol/src/control/Control","node_modules/ol/src/events/EventType","node_modules/ol/src/MapEventType","node_modules/ol/src/MapProperty","node_modules/ol/src/ObjectEventType","node_modules/ol/src/Overlay","node_modules/ol/src/OverlayPositioning","node_modules/ol/src/PluggableMap","node_modules/ol/src/View","node_modules/ol/src/ViewProperty","node_modules/ol/src/css","node_modules/ol/src/extent","node_modules/ol/src/Object","node_modules/ol/src/events","node_modules/ol/src/geom/Polygon","node_modules/ol/src/dom"],(function(e,t,s,n,i,o,r,a,l,d,u,c,h,f,_,g,m,p,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const v=.75,x=.1;class E extends u.default{createRenderer(){return new s.default(this)}}class C extends n.default{constructor(e){const t=e||{};super({element:document.createElement("div"),render:t.render,target:t.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=void 0===t.collapsed||t.collapsed,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=void 0!==t.rotateWithView&&t.rotateWithView,this.viewExtent_=void 0;const s=void 0!==t.className?t.className:"ol-overviewmap",n=void 0!==t.tipLabel?t.tipLabel:"Overview map",o=void 0!==t.collapseLabel?t.collapseLabel:"«";"string"==typeof o?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o):this.collapseLabel_=o;const r=void 0!==t.label?t.label:"»";"string"==typeof r?(this.label_=document.createElement("span"),this.label_.textContent=r):this.label_=r;const a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,u=document.createElement("button");u.setAttribute("type","button"),u.title=n,u.appendChild(a),u.addEventListener(i.default.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=t.view,this.ovmap_=new E({view:t.view});const c=this.ovmap_;t.layers&&t.layers.forEach((function(e){c.addLayer(e)}));const h=document.createElement("div");h.className="ol-overviewmap-box",h.style.boxSizing="border-box",this.boxOverlay_=new l.default({position:[0,0],positioning:d.default.CENTER_CENTER,element:h}),this.ovmap_.addOverlay(this.boxOverlay_);const _=s+" "+f.CLASS_UNSELECTABLE+" "+f.CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+f.CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),g=this.element;g.className=_,g.appendChild(this.ovmapDiv_),g.appendChild(u);const m=this,p=this.boxOverlay_,y=this.boxOverlay_.getElement(),v=function(e){const t={clientX:(s=e).clientX,clientY:s.clientY};var s;const n=c.getEventCoordinateInternal(t);p.setPosition(n)},x=function(e){const t=c.getEventCoordinateInternal(e);m.getMap().getView().setCenterInternal(t),window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",x)};y.addEventListener("mousedown",(function(){window.addEventListener("mousemove",v),window.addEventListener("mouseup",x)}))}setMap(e){const t=this.getMap();if(e!==t){if(t){const e=t.getView();e&&this.unbindView_(e),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(m.listen(e,a.default.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const t=e.getView();t&&(this.bindView_(t),t.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}}handleMapPropertyChange_(e){if(e.key===r.default.VIEW){const t=e.oldValue;t&&this.unbindView_(t);const s=this.getMap().getView();this.bindView_(s)}}bindView_(e){if(!this.view_){const t=new c.default({projection:e.getProjection()});this.ovmap_.setView(t)}e.addEventListener(g.getChangeEventType(h.default.ROTATION),this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(e){e.removeEventListener(g.getChangeEventType(h.default.ROTATION),this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const s=e.getSize(),n=e.getView().calculateExtentInternal(s);if(this.viewExtent_&&_.equals(n,this.viewExtent_))return;this.viewExtent_=n;const i=t.getSize(),o=t.getView().calculateExtentInternal(i),r=t.getPixelFromCoordinateInternal(_.getTopLeft(n)),a=t.getPixelFromCoordinateInternal(_.getBottomRight(n)),l=Math.abs(r[0]-a[0]),d=Math.abs(r[1]-a[1]),u=i[0],c=i[1];l<u*x||d<c*x||l>u*v||d>c*v?this.resetExtent_():_.containsExtent(o,n)||this.recenter_()}resetExtent_(){const e=this.getMap(),t=this.ovmap_,s=e.getSize(),n=e.getView().calculateExtentInternal(s),i=t.getView(),o=Math.log(7.5)/Math.LN2,r=1/(Math.pow(2,o/2)*x);_.scaleFromCenter(n,r),i.fitInternal(p.fromExtent(n))}recenter_(){const e=this.getMap(),t=this.ovmap_,s=e.getView();t.getView().setCenterInternal(s.getCenterInternal())}updateBox_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const s=e.getSize(),n=e.getView(),i=t.getView(),o=this.rotateWithView_?0:-n.getRotation(),r=this.boxOverlay_,a=this.boxOverlay_.getElement(),l=n.getCenterInternal(),d=n.getResolution(),u=i.getResolution(),c=s[0]*d/u,h=s[1]*d/u;if(r.setPosition(l),a){a.style.width=c+"px",a.style.height=h+"px";const e="rotate("+o+"rad)";a.style.transform=e}}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(f.CLASS_COLLAPSED),this.collapsed_?y.replaceNode(this.collapseLabel_,this.label_):y.replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const e=this.ovmap_;if(!this.collapsed_){if(e.isRendered())return this.viewExtent_=void 0,void e.render();e.updateSize(),this.resetExtent_(),m.listenOnce(e,o.default.POSTRENDER,(function(e){this.updateBox_()}),this)}}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(e){this.validateExtent_(),this.updateBox_()}}t.default=C})),define("node_modules/ol/src/control/ScaleLine",["require","exports","node_modules/ol/src/control/Control","node_modules/ol/src/proj/Units","node_modules/ol/src/css","node_modules/ol/src/proj","node_modules/ol/src/asserts","node_modules/ol/src/Object"],(function(e,t,s,n,i,o,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Units=void 0;const l="units";t.Units={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"};const d=[1,2,5],u=25.4/.28;class c extends s.default{constructor(e){const s=e||{},n=void 0!==s.className?s.className:s.bar?"ol-scale-bar":"ol-scale-line";super({element:document.createElement("div"),render:s.render,target:s.target}),this.innerElement_=document.createElement("div"),this.innerElement_.className=n+"-inner",this.element.className=n+" "+i.CLASS_UNSELECTABLE,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==s.minWidth?s.minWidth:64,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addEventListener(a.getChangeEventType(l),this.handleUnitsChanged_),this.setUnits(s.units||t.Units.METRIC),this.scaleBar_=s.bar||!1,this.scaleBarSteps_=s.steps||4,this.scaleBarText_=s.text||!1,this.dpi_=s.dpi||void 0}getUnits(){return this.get(l)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(l,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const s=e.center,i=e.projection,a=this.getUnits(),l=a==t.Units.DEGREES?n.default.DEGREES:n.default.METERS;let c=o.getPointResolution(i,e.resolution,s,l);const h=this.minWidth_*(this.dpi_||u)/u;let f=h*c,_="";if(a==t.Units.DEGREES){const e=o.METERS_PER_UNIT[n.default.DEGREES];f*=e,f<e/60?(_="″",c*=3600):f<e?(_="′",c*=60):_="°"}else a==t.Units.IMPERIAL?f<.9144?(_="in",c/=.0254):f<1609.344?(_="ft",c/=.3048):(_="mi",c/=1609.344):a==t.Units.NAUTICAL?(c/=1852,_="nm"):a==t.Units.METRIC?f<.001?(_="μm",c*=1e6):f<1?(_="mm",c*=1e3):f<1e3?_="m":(_="km",c/=1e3):a==t.Units.US?f<.9144?(_="in",c*=39.37):f<1609.344?(_="ft",c/=.30480061):(_="mi",c/=1609.3472):r.assert(!1,33);let g,m,p,y,v=3*Math.floor(Math.log(h*c)/Math.log(10));for(;;){p=Math.floor(v/3);const e=Math.pow(10,p);if(g=d[(v%3+3)%3]*e,m=Math.round(g/c),isNaN(m))return this.element.style.display="none",void(this.renderedVisible_=!1);if(m>=h)break;++v}y=this.scaleBar_?this.createScaleBar(m,g,_):g.toFixed(p<0?-p:0)+" "+_,this.renderedHTML_!=y&&(this.innerElement_.innerHTML=y,this.renderedHTML_=y),this.renderedWidth_!=m&&(this.innerElement_.style.width=m+"px",this.renderedWidth_=m),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,s){const n="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),i=[],o=e/this.scaleBarSteps_;let r,a="#ffffff";for(let n=0;n<this.scaleBarSteps_;n++)0===n&&i.push(this.createMarker("absolute",n)),i.push('<div><div class="ol-scale-singlebar" style="width: '+o+"px;background-color: "+a+';"></div>'+this.createMarker("relative",n)+(n%2==0||2===this.scaleBarSteps_?this.createStepText(n,e,!1,t,s):"")+"</div>"),n===this.scaleBarSteps_-1&&i.push(this.createStepText(n+1,e,!0,t,s)),a="#ffffff"===a?"#000000":"#ffffff";r=this.scaleBarText_?'<div class="ol-scale-text" style="width: '+e+'px;">'+n+"</div>":"";return'<div style="display: flex;">'+r+i.join("")+"</div>"}createMarker(e,t){return'<div class="ol-scale-step-marker" style="position: '+e+";top: "+("absolute"===e?3:-10)+'px;"></div>'}createStepText(e,t,s,n,i){const o=(0===e?0:Math.round(n/this.scaleBarSteps_*e*100)/100)+(0===e?"":" "+i);return'<div class="ol-scale-step-text" style="margin-left: '+(0===e?-3:t/this.scaleBarSteps_*-1)+"px;text-align: "+(0===e?"left":"center")+"; min-width: "+(0===e?0:t/this.scaleBarSteps_*2)+"px;left: "+(s?t+"px":"unset")+';">'+o+"</div>"}getScaleForResolution(){const e=o.getPointResolution(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center),t=this.dpi_||u,s=this.viewState_.projection.getMetersPerUnit();return parseFloat(e.toString())*s*39.37*t}render(e){const t=e.frameState;this.viewState_=t?t.viewState:null,this.updateElement_()}}t.default=c})),define("node_modules/ol/src/control/ZoomSlider",["require","exports","node_modules/ol/src/control/Control","node_modules/ol/src/events/EventType","node_modules/ol/src/pointer/EventType","node_modules/ol/src/css","node_modules/ol/src/math","node_modules/ol/src/easing","node_modules/ol/src/events","node_modules/ol/src/events/Event"],(function(e,t,s,n,i,o,r,a,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const u=0,c=1;class h extends s.default{constructor(e){const t=e||{};super({element:document.createElement("div"),render:t.render}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=u,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.startX_,this.startY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=void 0!==t.duration?t.duration:200;const s=void 0!==t.className?t.className:"ol-zoomslider",r=document.createElement("button");r.setAttribute("type","button"),r.className=s+"-thumb "+o.CLASS_UNSELECTABLE;const a=this.element;a.className=s+" "+o.CLASS_UNSELECTABLE+" "+o.CLASS_CONTROL,a.appendChild(r),a.addEventListener(i.default.POINTERDOWN,this.handleDraggerStart_.bind(this),!1),a.addEventListener(i.default.POINTERMOVE,this.handleDraggerDrag_.bind(this),!1),a.addEventListener(i.default.POINTERUP,this.handleDraggerEnd_.bind(this),!1),a.addEventListener(n.default.CLICK,this.handleContainerClick_.bind(this),!1),r.addEventListener(n.default.CLICK,d.stopPropagation,!1)}setMap(e){super.setMap(e),e&&e.render()}initSlider_(){const e=this.element,t=e.offsetWidth,s=e.offsetHeight;if(0===t&&0===s)return this.sliderInitialized_=!1;const n=e.firstElementChild,i=getComputedStyle(n),o=n.offsetWidth+parseFloat(i.marginRight)+parseFloat(i.marginLeft),r=n.offsetHeight+parseFloat(i.marginTop)+parseFloat(i.marginBottom);return this.thumbSize_=[o,r],t>s?(this.direction_=c,this.widthLimit_=t-o):(this.direction_=u,this.heightLimit_=s-r),this.sliderInitialized_=!0}handleContainerClick_(e){const t=this.getMap().getView(),s=this.getRelativePosition_(e.offsetX-this.thumbSize_[0]/2,e.offsetY-this.thumbSize_[1]/2),n=this.getResolutionForPosition_(s),i=t.getConstrainedZoom(t.getZoomForResolution(n));t.animateInternal({zoom:i,duration:this.duration_,easing:a.easeOut})}handleDraggerStart_(e){if(!this.dragging_&&e.target===this.element.firstElementChild){const t=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=e.clientX-parseFloat(t.style.left),this.startY_=e.clientY-parseFloat(t.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){const e=this.handleDraggerDrag_,t=this.handleDraggerEnd_;this.dragListenerKeys_.push(l.listen(document,i.default.POINTERMOVE,e,this),l.listen(document,i.default.POINTERUP,t,this))}}}handleDraggerDrag_(e){if(this.dragging_){const t=e.clientX-this.startX_,s=e.clientY-this.startY_,n=this.getRelativePosition_(t,s);this.currentResolution_=this.getResolutionForPosition_(n),this.getMap().getView().setResolution(this.currentResolution_)}}handleDraggerEnd_(e){if(this.dragging_){this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(l.unlistenByKey),this.dragListenerKeys_.length=0}}setThumbPosition_(e){const t=this.getPositionForResolution_(e),s=this.element.firstElementChild;this.direction_==c?s.style.left=this.widthLimit_*t+"px":s.style.top=this.heightLimit_*t+"px"}getRelativePosition_(e,t){let s;return s=this.direction_===c?e/this.widthLimit_:t/this.heightLimit_,r.clamp(s,0,1)}getResolutionForPosition_(e){return this.getMap().getView().getResolutionForValueFunction()(1-e)}getPositionForResolution_(e){const t=this.getMap().getView().getValueForResolutionFunction();return r.clamp(1-t(e),0,1)}render(e){if(!e.frameState)return;if(!this.sliderInitialized_&&!this.initSlider_())return;const t=e.frameState.viewState.resolution;this.currentResolution_=t,this.setThumbPosition_(t)}}t.default=h})),define("node_modules/ol/src/control/ZoomToExtent",["require","exports","node_modules/ol/src/control/Control","node_modules/ol/src/events/EventType","node_modules/ol/src/css","node_modules/ol/src/geom/Polygon"],(function(e,t,s,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends s.default{constructor(e){const t=e||{};super({element:document.createElement("div"),target:t.target}),this.extent=t.extent?t.extent:null;const s=void 0!==t.className?t.className:"ol-zoom-extent",o=void 0!==t.label?t.label:"E",r=void 0!==t.tipLabel?t.tipLabel:"Fit to extent",a=document.createElement("button");a.setAttribute("type","button"),a.title=r,a.appendChild("string"==typeof o?document.createTextNode(o):o),a.addEventListener(n.default.CLICK,this.handleClick_.bind(this),!1);const l=s+" "+i.CLASS_UNSELECTABLE+" "+i.CLASS_CONTROL,d=this.element;d.className=l,d.appendChild(a)}handleClick_(e){e.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const e=this.getMap().getView(),t=this.extent?this.extent:e.getProjection().getExtent();e.fitInternal(o.fromExtent(t))}}t.default=r})),define("node_modules/ol/src/control",["require","exports","node_modules/ol/src/control/Attribution","node_modules/ol/src/Collection","node_modules/ol/src/control/Rotate","node_modules/ol/src/control/Zoom","node_modules/ol/src/control/Attribution","node_modules/ol/src/control/Control","node_modules/ol/src/control/FullScreen","node_modules/ol/src/control/MousePosition","node_modules/ol/src/control/OverviewMap","node_modules/ol/src/control/Rotate","node_modules/ol/src/control/ScaleLine","node_modules/ol/src/control/Zoom","node_modules/ol/src/control/ZoomSlider","node_modules/ol/src/control/ZoomToExtent"],(function(e,t,s,n,i,o,r,a,l,d,u,c,h,f,_,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=t.ZoomToExtent=t.ZoomSlider=t.Zoom=t.ScaleLine=t.Rotate=t.OverviewMap=t.MousePosition=t.FullScreen=t.Control=t.Attribution=void 0,Object.defineProperty(t,"Attribution",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"Control",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"FullScreen",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"MousePosition",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"OverviewMap",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Rotate",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"ScaleLine",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"Zoom",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"ZoomSlider",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(t,"ZoomToExtent",{enumerable:!0,get:function(){return g.default}}),t.defaults=function(e){const t=e||{},r=new n.default;return(void 0===t.zoom||t.zoom)&&r.push(new o.default(t.zoomOptions)),(void 0===t.rotate||t.rotate)&&r.push(new i.default(t.rotateOptions)),(void 0===t.attribution||t.attribution)&&r.push(new s.default(t.attributionOptions)),r}})),define("node_modules/ol/src/interaction/DoubleClickZoom",["require","exports","node_modules/ol/src/interaction/Interaction","node_modules/ol/src/MapBrowserEventType"],(function(e,t,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i extends s.default{constructor(e){super();const t=e||{};this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(e){let t=!1;if(e.type==n.default.DBLCLICK){const n=e.originalEvent,i=e.map,o=e.coordinate,r=n.shiftKey?-this.delta_:this.delta_,a=i.getView();s.zoomByDelta(a,r,o,this.duration_),e.preventDefault(),t=!0}return!t}}t.default=i})),define("node_modules/ol/src/interaction/Pointer",["require","exports","node_modules/ol/src/interaction/Interaction","node_modules/ol/src/MapBrowserEventType","node_modules/ol/src/obj"],(function(e,t,s,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.centroid=void 0;class o extends s.default{constructor(e){const t=e||{};super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.trackedPointers_={},this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==n.default.POINTERDRAG)this.handleDragEvent(e),e.preventDefault();else if(e.type==n.default.POINTERUP){const t=this.handleUpEvent(e);this.handlingDownUpSequence=t&&this.targetPointers.length>0}}else if(e.type==n.default.POINTERDOWN){const s=this.handleDownEvent(e);this.handlingDownUpSequence=s,t=this.stopDown(s)}else e.type==n.default.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){if(function(e){const t=e.type;return t===n.default.POINTERDOWN||t===n.default.POINTERDRAG||t===n.default.POINTERUP}(e)){const t=e.originalEvent,s=t.pointerId.toString();e.type==n.default.POINTERUP?delete this.trackedPointers_[s]:(e.type==n.default.POINTERDOWN||s in this.trackedPointers_)&&(this.trackedPointers_[s]=t),this.targetPointers=i.getValues(this.trackedPointers_)}}}t.centroid=function(e){const t=e.length;let s=0,n=0;for(let i=0;i<t;i++)s+=e[i].clientX,n+=e[i].clientY;return[s/t,n/t]},t.default=o})),define("node_modules/ol/src/events/condition",["require","exports","node_modules/ol/src/MapBrowserEventType","node_modules/ol/src/functions","node_modules/ol/src/has","node_modules/ol/src/asserts"],(function(e,t,s,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.primaryAction=t.penOnly=t.touchOnly=t.mouseOnly=t.targetNotEditable=t.shiftKeyOnly=t.platformModifierKeyOnly=t.noModifierKeys=t.doubleClick=t.singleClick=t.pointerMove=t.never=t.mouseActionButton=t.click=t.always=t.focusWithTabindex=t.focus=t.altShiftKeysOnly=t.altKeyOnly=t.all=void 0,t.all=function(e){const t=arguments;return function(e){let s=!0;for(let n=0,i=t.length;n<i&&(s=s&&t[n](e),s);++n);return s}},t.altKeyOnly=function(e){const t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},t.altShiftKeysOnly=function(e){const t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},t.focus=function(e){return e.target.getTargetElement().contains(document.activeElement)},t.focusWithTabindex=function(e){return!e.map.getTargetElement().hasAttribute("tabindex")||t.focus(e)},t.always=n.TRUE,t.click=function(e){return e.type==s.default.CLICK},t.mouseActionButton=function(e){const t=e.originalEvent;return 0==t.button&&!(i.WEBKIT&&i.MAC&&t.ctrlKey)},t.never=n.FALSE,t.pointerMove=function(e){return"pointermove"==e.type},t.singleClick=function(e){return e.type==s.default.SINGLECLICK},t.doubleClick=function(e){return e.type==s.default.DBLCLICK},t.noModifierKeys=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},t.platformModifierKeyOnly=function(e){const t=e.originalEvent;return!t.altKey&&(i.MAC?t.metaKey:t.ctrlKey)&&!t.shiftKey},t.shiftKeyOnly=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},t.targetNotEditable=function(e){const t=e.originalEvent.target.tagName;return"INPUT"!==t&&"SELECT"!==t&&"TEXTAREA"!==t},t.mouseOnly=function(e){const t=e.originalEvent;return o.assert(void 0!==t,56),"mouse"==t.pointerType},t.touchOnly=function(e){const t=e.originalEvent;return o.assert(void 0!==t,56),"touch"===t.pointerType},t.penOnly=function(e){const t=e.originalEvent;return o.assert(void 0!==t,56),"pen"===t.pointerType},t.primaryAction=function(e){const t=e.originalEvent;return o.assert(void 0!==t,56),t.isPrimary&&0===t.button}})),define("node_modules/ol/src/Kinetic",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t,s){this.decay_=e,this.minVelocity_=t,this.delay_=s,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let s=t-3;for(;s>0&&this.points_[s+2]>e;)s-=3;const n=this.points_[t+2]-this.points_[s+2];if(n<1e3/60)return!1;const i=this.points_[t]-this.points_[s],o=this.points_[t+1]-this.points_[s+1];return this.angle_=Math.atan2(o,i),this.initialVelocity_=Math.sqrt(i*i+o*o)/n,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}})),define("node_modules/ol/src/interaction/DragPan",["require","exports","node_modules/ol/src/interaction/Pointer","node_modules/ol/src/functions","node_modules/ol/src/events/condition","node_modules/ol/src/easing","node_modules/ol/src/coordinate"],(function(e,t,s,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class a extends s.default{constructor(e){super({stopDown:n.FALSE});const t=e||{};this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const s=t.condition?t.condition:i.all(i.noModifierKeys,i.primaryAction);this.condition_=t.onFocusOnly?i.all(i.focusWithTabindex,s):s,this.noKinetic_=!1}handleDragEvent(e){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());const t=this.targetPointers,n=s.centroid(t);if(t.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){const t=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],s=e.map.getView();r.scale(t,s.getResolution()),r.rotate(t,s.getRotation()),s.adjustCenterInternal(t)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=t.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,s=t.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const e=this.kinetic_.getDistance(),n=this.kinetic_.getAngle(),i=s.getCenterInternal(),r=t.getPixelFromCoordinateInternal(i),a=t.getCoordinateFromPixelInternal([r[0]-e*Math.cos(n),r[1]-e*Math.sin(n)]);s.animateInternal({center:s.getConstrainedCenter(a),duration:500,easing:o.easeOut})}return this.panning_&&(this.panning_=!1,s.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const t=e.map.getView();return this.lastCentroid=null,t.getAnimating()&&t.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}t.default=a})),define("node_modules/ol/src/interaction/DragRotate",["require","exports","node_modules/ol/src/interaction/Pointer","node_modules/ol/src/functions","node_modules/ol/src/events/condition","node_modules/ol/src/rotationconstraint"],(function(e,t,s,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends s.default{constructor(e){const t=e||{};super({stopDown:n.FALSE}),this.condition_=t.condition?t.condition:i.altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(e){if(!i.mouseOnly(e))return;const t=e.map,s=t.getView();if(s.getConstraints().rotation===o.disable)return;const n=t.getSize(),r=e.pixel,a=Math.atan2(n[1]/2-r[1],r[0]-n[0]/2);if(void 0!==this.lastAngle_){const e=a-this.lastAngle_;s.adjustRotationInternal(-e)}this.lastAngle_=a}handleUpEvent(e){if(!i.mouseOnly(e))return!0;return e.map.getView().endInteraction(this.duration_),!1}handleDownEvent(e){if(!i.mouseOnly(e))return!1;if(i.mouseActionButton(e)&&this.condition_(e)){return e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0}return!1}}t.default=r})),define("node_modules/ol/src/render/Box",["require","exports","node_modules/ol/src/Disposable","node_modules/ol/src/geom/Polygon"],(function(e,t,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i extends s.default{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,s="px",n=this.element_.style;n.left=Math.min(e[0],t[0])+s,n.top=Math.min(e[1],t[1])+s,n.width=Math.abs(t[0]-e[0])+s,n.height=Math.abs(t[1]-e[1])+s}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,t=this.endPixel_,s=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new n.default([s])}getGeometry(){return this.geometry_}}t.default=i})),define("node_modules/ol/src/interaction/DragBox",["require","exports","node_modules/ol/src/events/Event","node_modules/ol/src/interaction/Pointer","node_modules/ol/src/render/Box","node_modules/ol/src/events/condition"],(function(e,t,s,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r="boxstart",a="boxdrag",l="boxend";class d extends s.default{constructor(e,t,s){super(e),this.coordinate=t,this.mapBrowserEvent=s}}class u extends n.default{constructor(e){super();const t=e||{};this.box_=new i.default(t.className||"ol-dragbox"),this.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:o.mouseActionButton,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,s){const n=s[0]-t[0],i=s[1]-t[1];return n*n+i*i>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new d(a,e.coordinate,e))}handleUpEvent(e){return this.box_.setMap(null),this.boxEndCondition_(e,this.startPixel_,e.pixel)&&(this.onBoxEnd(e),this.dispatchEvent(new d(l,e.coordinate,e))),!1}handleDownEvent(e){return!!this.condition_(e)&&(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new d(r,e.coordinate,e)),!0)}onBoxEnd(e){}}t.default=u})),define("node_modules/ol/src/interaction/DragZoom",["require","exports","node_modules/ol/src/interaction/DragBox","node_modules/ol/src/extent","node_modules/ol/src/easing","node_modules/ol/src/events/condition"],(function(e,t,s,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends s.default{constructor(e){const t=e||{};super({condition:t.condition?t.condition:o.shiftKeyOnly,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out}onBoxEnd(e){const t=this.getMap(),s=t.getView(),o=t.getSize();let r=this.getGeometry().getExtent();if(this.out_){const e=s.calculateExtentInternal(o),i=n.createOrUpdateFromCoordinates([t.getPixelFromCoordinateInternal(n.getBottomLeft(r)),t.getPixelFromCoordinateInternal(n.getTopRight(r))]),a=s.getResolutionForExtentInternal(i,o);n.scaleFromCenter(e,1/a),r=e}const a=s.getConstrainedResolution(s.getResolutionForExtentInternal(r,o)),l=s.getConstrainedCenter(n.getCenter(r),a);s.animateInternal({resolution:a,center:l,duration:this.duration_,easing:i.easeOut})}}t.default=r})),define("node_modules/ol/src/events/KeyCode",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={LEFT:37,UP:38,RIGHT:39,DOWN:40}})),define("node_modules/ol/src/interaction/KeyboardPan",["require","exports","node_modules/ol/src/events/EventType","node_modules/ol/src/interaction/Interaction","node_modules/ol/src/events/KeyCode","node_modules/ol/src/events/condition","node_modules/ol/src/coordinate"],(function(e,t,s,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class a extends n.default{constructor(e){super();const t=e||{};this.defaultCondition_=function(e){return o.noModifierKeys(e)&&o.targetNotEditable(e)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==s.default.KEYDOWN){const s=e.originalEvent.keyCode;if(this.condition_(e)&&(s==i.default.DOWN||s==i.default.LEFT||s==i.default.RIGHT||s==i.default.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,d=0;s==i.default.DOWN?d=-a:s==i.default.LEFT?l=-a:s==i.default.RIGHT?l=a:d=a;const u=[l,d];r.rotate(u,o.getRotation()),n.pan(o,u,this.duration_),e.preventDefault(),t=!0}}return!t}}t.default=a})),define("node_modules/ol/src/interaction/KeyboardZoom",["require","exports","node_modules/ol/src/events/EventType","node_modules/ol/src/interaction/Interaction","node_modules/ol/src/events/condition"],(function(e,t,s,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class o extends n.default{constructor(e){super();const t=e||{};this.condition_=t.condition?t.condition:i.targetNotEditable,this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(e){let t=!1;if(e.type==s.default.KEYDOWN||e.type==s.default.KEYPRESS){const s=e.originalEvent.charCode;if(this.condition_(e)&&(s=="+".charCodeAt(0)||s=="-".charCodeAt(0))){const i=e.map,o=s=="+".charCodeAt(0)?this.delta_:-this.delta_,r=i.getView();n.zoomByDelta(r,o,void 0,this.duration_),e.preventDefault(),t=!0}}return!t}}t.default=o})),define("node_modules/ol/src/interaction/MouseWheelZoom",["require","exports","node_modules/ol/src/events/EventType","node_modules/ol/src/interaction/Interaction","node_modules/ol/src/has","node_modules/ol/src/events/condition","node_modules/ol/src/math"],(function(e,t,s,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mode=void 0,t.Mode={TRACKPAD:"trackpad",WHEEL:"wheel"};class a extends n.default{constructor(e){const t=e||{};super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;const s=t.condition?t.condition:o.always;this.condition_=t.onFocusOnly?o.all(o.focusWithTabindex,s):s,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e))return!0;if(e.type!==s.default.WHEEL)return!0;e.preventDefault();const n=e.map,o=e.originalEvent;let r;if(this.useAnchor_&&(this.lastAnchor_=e.coordinate),e.type==s.default.WHEEL&&(r=o.deltaY,i.FIREFOX&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=i.DEVICE_PIXEL_RATIO),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),0===r)return!1;this.lastDelta_=r;const a=Date.now();void 0===this.startTime_&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?t.Mode.TRACKPAD:t.Mode.WHEEL);const l=n.getView();if(this.mode_===t.Mode.TRACKPAD&&!l.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(l.getAnimating()&&l.cancelAnimations(),l.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),l.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=a,!1;this.totalDelta_+=r;const d=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),d),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let s=-r.clamp(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(s=s?s>0?1:-1:0),n.zoomByDelta(t,s,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}t.default=a})),define("node_modules/ol/src/interaction/PinchRotate",["require","exports","node_modules/ol/src/interaction/Pointer","node_modules/ol/src/functions","node_modules/ol/src/rotationconstraint"],(function(e,t,s,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class o extends s.default{constructor(e){const t=e||{},s=t;s.stopDown||(s.stopDown=n.FALSE),super(s),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(e){let t=0;const n=this.targetPointers[0],o=this.targetPointers[1],r=Math.atan2(o.clientY-n.clientY,o.clientX-n.clientX);if(void 0!==this.lastAngle_){const e=r-this.lastAngle_;this.rotationDelta_+=e,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=e}this.lastAngle_=r;const a=e.map,l=a.getView();if(l.getConstraints().rotation===i.disable)return;const d=a.getViewport().getBoundingClientRect(),u=s.centroid(this.targetPointers);u[0]-=d.left,u[1]-=d.top,this.anchor_=a.getCoordinateFromPixelInternal(u),this.rotating_&&(a.render(),l.adjustRotationInternal(t,this.anchor_))}handleUpEvent(e){if(this.targetPointers.length<2){return e.map.getView().endInteraction(this.duration_),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}t.default=o})),define("node_modules/ol/src/interaction/PinchZoom",["require","exports","node_modules/ol/src/interaction/Pointer","node_modules/ol/src/functions"],(function(e,t,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i extends s.default{constructor(e){const t=e||{},s=t;s.stopDown||(s.stopDown=n.FALSE),super(s),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const n=this.targetPointers[0],i=this.targetPointers[1],o=n.clientX-i.clientX,r=n.clientY-i.clientY,a=Math.sqrt(o*o+r*r);void 0!==this.lastDistance_&&(t=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,d=l.getView();1!=t&&(this.lastScaleDelta_=t);const u=l.getViewport().getBoundingClientRect(),c=s.centroid(this.targetPointers);c[0]-=u.left,c[1]-=u.top,this.anchor_=l.getCoordinateFromPixelInternal(c),l.render(),d.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const t=e.map.getView(),s=this.lastScaleDelta_>1?1:-1;return t.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}t.default=i})),define("node_modules/ol/src/interaction/DragAndDrop",["require","exports","node_modules/ol/src/events/Event","node_modules/ol/src/events/EventType","node_modules/ol/src/interaction/Interaction","node_modules/ol/src/functions","node_modules/ol/src/proj","node_modules/ol/src/events"],(function(e,t,s,n,i,o,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l="addfeatures";class d extends s.default{constructor(e,t,s,n){super(e),this.features=s,this.file=t,this.projection=n}}class u extends i.default{constructor(e){const t=e||{};super({handleEvent:o.TRUE}),this.formatConstructors_=t.formatConstructors?t.formatConstructors:[],this.projection_=t.projection?r.get(t.projection):null,this.dropListenKeys_=null,this.source_=t.source||null,this.target=t.target?t.target:null}handleResult_(e,t){const s=t.target.result,n=this.getMap();let i=this.projection_;if(!i){i=n.getView().getProjection()}const o=this.formatConstructors_;for(let t=0,n=o.length;t<n;++t){const n=new o[t],r=this.tryReadFeatures_(n,s,{featureProjection:i});if(r&&r.length>0){this.source_&&(this.source_.clear(),this.source_.addFeatures(r)),this.dispatchEvent(new d(l,e,r,i));break}}}registerListeners_(){const e=this.getMap();if(e){const t=this.target?this.target:e.getViewport();this.dropListenKeys_=[a.listen(t,n.default.DROP,this.handleDrop,this),a.listen(t,n.default.DRAGENTER,this.handleStop,this),a.listen(t,n.default.DRAGOVER,this.handleStop,this),a.listen(t,n.default.DROP,this.handleStop,this)]}}setActive(e){!this.getActive()&&e&&this.registerListeners_(),this.getActive()&&!e&&this.unregisterListeners_(),super.setActive(e)}setMap(e){this.unregisterListeners_(),super.setMap(e),this.getActive()&&this.registerListeners_()}tryReadFeatures_(e,t,s){try{return e.readFeatures(t,s)}catch(e){return null}}unregisterListeners_(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(a.unlistenByKey),this.dropListenKeys_=null)}handleDrop(e){const t=e.dataTransfer.files;for(let e=0,s=t.length;e<s;++e){const s=t.item(e),i=new FileReader;i.addEventListener(n.default.LOAD,this.handleResult_.bind(this,s)),i.readAsText(s)}}handleStop(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}}t.default=u})),define("node_modules/ol/src/interaction/DragRotateAndZoom",["require","exports","node_modules/ol/src/interaction/Pointer","node_modules/ol/src/events/condition"],(function(e,t,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i extends s.default{constructor(e){const t=e||{};super(t),this.condition_=t.condition?t.condition:n.shiftKeyOnly,this.lastAngle_=void 0,this.lastMagnitude_=void 0,this.lastScaleDelta_=0,this.duration_=void 0!==t.duration?t.duration:400}handleDragEvent(e){if(!n.mouseOnly(e))return;const t=e.map,s=t.getSize(),i=e.pixel,o=i[0]-s[0]/2,r=s[1]/2-i[1],a=Math.atan2(r,o),l=Math.sqrt(o*o+r*r),d=t.getView();if(void 0!==this.lastAngle_){const e=this.lastAngle_-a;d.adjustRotationInternal(e)}this.lastAngle_=a,void 0!==this.lastMagnitude_&&d.adjustResolutionInternal(this.lastMagnitude_/l),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/l),this.lastMagnitude_=l}handleUpEvent(e){if(!n.mouseOnly(e))return!0;const t=e.map.getView(),s=this.lastScaleDelta_>1?1:-1;return t.endInteraction(this.duration_,s),this.lastScaleDelta_=0,!1}handleDownEvent(e){return!!n.mouseOnly(e)&&(!!this.condition_(e)&&(e.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0))}}t.default=i})),define("node_modules/ol/src/source/TileEventType",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"}})),define("node_modules/ol/src/tileurlfunction",["require","exports","node_modules/ol/src/asserts","node_modules/ol/src/math","node_modules/ol/src/tilecoord"],(function(e,t,s,n,i){"use strict";function o(e,t){const n=/\{z\}/g,i=/\{x\}/g,o=/\{y\}/g,r=/\{-y\}/g;return function(a,l,d){return a?e.replace(n,a[0].toString()).replace(i,a[1].toString()).replace(o,a[2].toString()).replace(r,(function(){const e=a[0],n=t.getFullTileRange(e);s.assert(n,55);return(n.getHeight()-a[2]-1).toString()})):void 0}}function r(e){return 1===e.length?e[0]:function(t,s,o){if(t){const r=i.hash(t),a=n.modulo(r,e.length);return e[a](t,s,o)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.expandUrl=t.nullTileUrlFunction=t.createFromTileUrlFunctions=t.createFromTemplates=t.createFromTemplate=void 0,t.createFromTemplate=o,t.createFromTemplates=function(e,t){const s=e.length,n=new Array(s);for(let i=0;i<s;++i)n[i]=o(e[i],t);return r(n)},t.createFromTileUrlFunctions=r,t.nullTileUrlFunction=function(e,t,s){},t.expandUrl=function(e){const t=[];let s=/\{([a-z])-([a-z])\}/.exec(e);if(s){const n=s[1].charCodeAt(0),i=s[2].charCodeAt(0);let o;for(o=n;o<=i;++o)t.push(e.replace(s[0],String.fromCharCode(o)));return t}if(s=/\{(\d+)-(\d+)\}/.exec(e),s){const n=parseInt(s[2],10);for(let i=parseInt(s[1],10);i<=n;i++)t.push(e.replace(s[0],i.toString()));return t}return t.push(e),t}})),define("node_modules/ol/src/source/UrlTile",["require","exports","node_modules/ol/src/source/TileEventType","node_modules/ol/src/source/Tile","node_modules/ol/src/TileState","node_modules/ol/src/tileurlfunction","node_modules/ol/src/tilecoord","node_modules/ol/src/util"],(function(e,t,s,n,i,o,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class l extends n.default{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===l.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction.bind(this)),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,o=a.getUid(t),r=t.getState();let l;r==i.default.LOADING?(this.tileLoadingKeys_[o]=!0,l=s.default.TILELOADSTART):o in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[o],l=r==i.default.ERROR?s.default.TILELOADERROR:r==i.default.LOADED?s.default.TILELOADEND:void 0),null!=l&&this.dispatchEvent(new n.TileSourceEvent(l,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),void 0!==t?this.setKey(t):this.changed()}setUrl(e){const t=o.expandUrl(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(o.createFromTemplates(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,s){}useTile(e,t,s){const n=r.getKeyZXY(e,t,s);this.tileCache.containsKey(n)&&this.tileCache.get(n)}}t.default=l})),define("node_modules/ol/src/geom/flat/textpath",["require","exports","node_modules/ol/src/math","node_modules/ol/src/geom/flat/transform"],(function(e,t,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawTextOnPath=void 0,t.drawTextOnPath=function(e,t,i,o,r,a,l,d,u,c,h,f){const _=[];let g;if(f){const s=n.rotate(e,t,i,o,f,[e[t],e[t+1]]);g=s[0]>s[s.length-o]}else g=e[t]>e[i-o];const m=r.length;let p,y,v=e[t],x=e[t+1],E=e[t+=o],C=e[t+1],T=0,S=Math.sqrt(Math.pow(E-v,2)+Math.pow(C-x,2)),M=!1;for(let n=0;n<m;++n){p=g?m-n-1:n;const f=r[p],P=d*u(c,f,h),O=a+P/2;for(;t<i-o&&T+S<O;)v=E,x=C,E=e[t+=o],C=e[t+1],T+=S,S=Math.sqrt(Math.pow(E-v,2)+Math.pow(C-x,2));const R=O-T;let I=Math.atan2(C-x,E-v);if(g&&(I+=I>0?-Math.PI:Math.PI),void 0!==y){let e=I-y;if(M=M||0!==e,e+=e>Math.PI?-2*Math.PI:e<-Math.PI?2*Math.PI:0,Math.abs(e)>l)return null}y=I;const b=R/S,w=s.lerp(v,E,b),L=s.lerp(x,C,b);_[p]=[w,L,P/2,I,f],a+=P}return M?_:[[_[0][0],_[0][1],_[0][2],_[0][3],r]]}})),define("node_modules/ol/src/render/canvas/Executor",["require","exports","node_modules/ol/src/render/canvas/Instruction","node_modules/rbush/index","node_modules/ol/src/render/canvas/TextBuilder","node_modules/ol/src/has","node_modules/ol/src/transform","node_modules/ol/src/extent","node_modules/ol/src/render/canvas","node_modules/ol/src/render/canvas","node_modules/ol/src/geom/flat/textpath","node_modules/ol/src/array","node_modules/ol/src/geom/flat/length","node_modules/ol/src/geom/flat/transform"],(function(e,t,s,n,i,o,r,a,l,d,u,c,h,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const _=a.createEmpty(),g=r.create(),m=[],p=[],y=[],v=[];t.default=class{constructor(e,t,s,n,i){this.overlaps=s,this.pixelRatio=t,this.resolution=e,this.alignFill_,this.declutterItems=[],this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderBuffer_=i,this.renderedTransform_=r.create(),this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}createLabel(e,t,s,n){const r=e+t+s+n;if(this.labels_[r])return this.labels_[r];const a=n?this.strokeStates[n]:null,l=s?this.fillStates[s]:null,u=this.textStates[t],c=this.pixelRatio,h=[u.scale[0]*c,u.scale[1]*c],f=i.TEXT_ALIGN[u.textAlign||d.defaultTextAlign],_=n&&a.lineWidth?a.lineWidth:0,g=e.split("\n"),m=g.length,p=[],y=d.measureTextWidths(u.font,g,p),v=d.measureTextHeight(u.font),x=y+_,E=[],C=(x+2)*h[0],T=(v*m+_)*h[1],S={width:C<0?Math.floor(C):Math.ceil(C),height:T<0?Math.floor(T):Math.ceil(T),contextInstructions:E};if(1==h[0]&&1==h[1]||E.push("scale",h),E.push("font",u.font),n){E.push("strokeStyle",a.strokeStyle),E.push("lineWidth",_),E.push("lineCap",a.lineCap),E.push("lineJoin",a.lineJoin),E.push("miterLimit",a.miterLimit);(o.WORKER_OFFSCREEN_CANVAS?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(E.push("setLineDash",[a.lineDash]),E.push("lineDashOffset",a.lineDashOffset))}s&&E.push("fillStyle",l.fillStyle),E.push("textBaseline","middle"),E.push("textAlign","center");const M=.5-f,P=f*x+M*_;let O;if(n)for(O=0;O<m;++O)E.push("strokeText",[g[O],P+M*p[O],.5*(_+v)+O*v]);if(s)for(O=0;O<m;++O)E.push("fillText",[g[O],P+M*p[O],.5*(_+v)+O*v]);return this.labels_[r]=S,S}replayTextBackground_(e,t,s,n,i,o,r,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,s),e.lineTo.apply(e,n),e.lineTo.apply(e,i),e.lineTo.apply(e,t),o&&(this.alignFill_=o[2],a&&(e.fillStyle=o[1]),this.fill_(e)),r&&(this.setStrokeStyle_(e,r),e.stroke())}replayImageOrLabel_(e,t,s,n,i,o,d,u,c,h,f,x,E,C,T,S,M,P,O){const R=P||O;s-=o*=C[0],n-=d*=C[1];const I=S+f>i.width?i.width-f:S,b=c+x>i.height?i.height-x:c,w=M[3]+I*C[0]+M[1],L=M[0]+b*C[1]+M[2],F=s-M[3],A=n-M[0];(R||0!==E)&&(m[0]=F,v[0]=F,m[1]=A,p[1]=A,p[0]=F+w,y[0]=p[0],y[1]=A+L,v[1]=y[1]);let D=null;if(0!==E){const e=s+o,t=n+d;D=r.compose(g,e,t,1,1,E,-e,-t),r.apply(g,m),r.apply(g,p),r.apply(g,y),r.apply(g,v),a.createOrUpdate(Math.min(m[0],p[0],y[0],v[0]),Math.min(m[1],p[1],y[1],v[1]),Math.max(m[0],p[0],y[0],v[0]),Math.max(m[1],p[1],y[1],v[1]),_)}else a.createOrUpdate(F,A,F+w,A+L,_);let N=0,G=0;if(u){const e=this.renderBuffer_;e[0]=Math.max(e[0],a.getWidth(_)),N=e[0],e[1]=Math.max(e[1],a.getHeight(_)),G=e[1]}const k=e.canvas,q=O?O[2]*C[0]/2:0,j=_[0]-q<=(k.width+N)/t&&_[2]+q>=-N/t&&_[1]-q<=(k.height+G)/t&&_[3]+q>=-G/t;if(T&&(s=Math.round(s),n=Math.round(n)),u){if(!j&&1==u[0])return!1;const t=j?[e,D?D.slice(0):null,h,i,f,x,I,b,s,n,C,_.slice()]:null;t&&(R&&t.push(P,O,m.slice(0),p.slice(0),y.slice(0),v.slice(0)),u.push(t))}else j&&(R&&this.replayTextBackground_(e,m,p,y,v,P,O,!1),l.drawImageOrLabel(e,D,h,i,f,x,I,b,s,n,C));return!0}fill_(e){if(this.alignFill_){const t=r.apply(this.renderedTransform_,[0,0]),s=512*this.pixelRatio;e.save(),e.translate(t[0]%s,t[1]%s),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.setLineDash&&(e.lineDashOffset=t[7],e.setLineDash(t[6]))}renderDeclutter(e,t,s,i){const o=[];for(let s=1,n=e.length;s<n;++s){const n=e[s][11];o.push({minX:n[0],minY:n[1],maxX:n[2],maxY:n[3],value:t})}i||(i=new n.default(9));let r=!1;for(let e=0,t=o.length;e<t;++e)if(i.collides(o[e])){r=!0;break}if(!r){i.load(o);for(let t=1,n=e.length;t<n;++t){const n=e[t],i=n[0],o=i.globalAlpha;o!==s&&(i.globalAlpha=s),n.length>12&&this.replayTextBackground_(n[0],n[14],n[15],n[16],n[17],n[12],n[13],!0),l.drawImageOrLabel.apply(void 0,n),o!==s&&(i.globalAlpha=o)}}return e.length=1,i}drawLabelWithPointPlacement_(e,t,s,n){const o=this.textStates[t],r=this.createLabel(e,t,n,s),a=this.strokeStates[s],u=this.pixelRatio,c=i.TEXT_ALIGN[o.textAlign||d.defaultTextAlign],h=i.TEXT_ALIGN[o.textBaseline||l.defaultTextBaseline],f=a&&a.lineWidth?a.lineWidth:0;return{label:r,anchorX:c*(r.width/u-2*o.scale[0])+2*(.5-c)*f,anchorY:h*r.height/u+2*(.5-h)*f}}execute_(e,t,n,o,_,g,m){let p;this.declutterItems.length=0,this.pixelCoordinates_&&c.equals(n,this.renderedTransform_)?p=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),p=f.transform2D(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),r.setFromArray(this.renderedTransform_,n));let y=0;const v=o.length;let x,E,C,T,S,M,P,O,R,I,b,w,L,F,A=0,D=0,N=0,G=null,k=null;const q=this.coordinateCache_,j=this.viewRotation_,X=Math.round(1e12*Math.atan2(-n[1],n[0]))/1e12,Y={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:j},Z=this.instructions!=o||this.overlaps?0:200;let U,B,V;for(;y<v;){const n=o[y];switch(n[0]){case s.default.BEGIN_GEOMETRY:U=n[1],U.getGeometry()?void 0===m||a.intersects(m,n[3])?++y:y=n[2]+1:y=n[2];break;case s.default.BEGIN_PATH:D>Z&&(this.fill_(e),D=0),N>Z&&(e.stroke(),N=0),D||N||(e.beginPath(),T=NaN,S=NaN),++y;break;case s.default.CIRCLE:A=n[1];const o=p[A],r=p[A+1],c=p[A+2]-o,f=p[A+3]-r,v=Math.sqrt(c*c+f*f);e.moveTo(o+v,r),e.arc(o,r,v,0,2*Math.PI,!0),++y;break;case s.default.CLOSE_PATH:e.closePath(),++y;break;case s.default.CUSTOM:A=n[1],x=n[2];const z=n[3],K=n[4],W=6==n.length?n[5]:void 0;Y.geometry=z,Y.feature=U,y in q||(q[y]=[]);const H=q[y];W?W(p,A,x,2,H):(H[0]=p[A],H[1]=p[A+1],H.length=2),K(H,Y),++y;break;case s.default.DRAW_IMAGE:A=n[1],x=n[2],I=n[3],E=n[4],C=n[5],R=g?null:n[6];let J=n[7];const $=n[8],Q=n[9],ee=n[10],te=n[11];let se=n[12];const ne=n[13];let ie,oe,re,ae,le=n[14];if(!I&&n.length>=19){b=n[18],w=n[19],L=n[20],F=n[21];const e=this.drawLabelWithPointPlacement_(b,w,L,F);I=e.label,n[3]=I;const t=n[22];E=(e.anchorX-t)*this.pixelRatio,n[4]=E;const s=n[23];C=(e.anchorY-s)*this.pixelRatio,n[5]=C,J=I.height,n[7]=J,le=I.width,n[14]=le}n.length>24&&(ie=n[24]),n.length>16?(oe=n[15],re=n[16],ae=n[17]):(oe=l.defaultPadding,re=!1,ae=!1),te&&X?se+=j:te||X||(se-=j);let de=0,ue=0;for(;A<x;A+=2){if(ie&&ie[de++]<le/this.pixelRatio)continue;if(R){const e=Math.floor(ue);O=R.length<e+1?[R[0][0]]:R[e]}this.replayImageOrLabel_(e,t,p[A],p[A+1],I,E,C,O,J,$,Q,ee,se,ne,_,le,oe,re?G:null,ae?k:null)&&O&&R[R.length-1]!==O&&R.push(O),O&&(O.length-1===O[0]&&this.declutterItems.push(this,O,U),ue+=1/O[0])}++y;break;case s.default.DRAW_CHARS:const ce=n[1],he=n[2],fe=n[3];O=g?null:n[4];const _e=n[5];F=n[6];const ge=n[7],me=n[8],pe=n[9];L=n[10];const ye=n[11];b=n[12],w=n[13];const ve=[n[14],n[14]],xe=this.textStates[w],Ee=xe.font,Ce=[xe.scale[0]*me,xe.scale[1]*me];let Te;Ee in this.widths_?Te=this.widths_[Ee]:(Te={},this.widths_[Ee]=Te);const Se=h.lineStringLength(p,ce,he,2),Me=Math.abs(Ce[0])*d.measureAndCacheTextWidth(Ee,b,Te);if(_e||Me<=Se){const s=this.textStates[w].textAlign,n=(Se-Me)*i.TEXT_ALIGN[s],o=u.drawTextOnPath(p,ce,he,2,b,n,ge,Math.abs(Ce[0]),d.measureAndCacheTextWidth,Ee,Te,X?0:this.viewRotation_);if(o){let s,n,i,r,a,d=!1;if(L)for(s=0,n=o.length;s<n;++s)a=o[s],i=a[4],r=this.createLabel(i,w,"",L),E=a[2]+ye,C=fe*r.height+2*(.5-fe)*ye*Ce[1]/Ce[0]-pe,d=this.replayImageOrLabel_(e,t,a[0],a[1],r,E,C,O,r.height,1,0,0,a[3],ve,!1,r.width,l.defaultPadding,null,null)||d;if(F)for(s=0,n=o.length;s<n;++s)a=o[s],i=a[4],r=this.createLabel(i,w,F,""),E=a[2],C=fe*r.height-pe,d=this.replayImageOrLabel_(e,t,a[0],a[1],r,E,C,O,r.height,1,0,0,a[3],ve,!1,r.width,l.defaultPadding,null,null)||d;d&&this.declutterItems.push(this,O,U)}}++y;break;case s.default.END_GEOMETRY:if(void 0!==g){U=n[1];const e=g(U);if(e)return e}++y;break;case s.default.FILL:Z?D++:this.fill_(e),++y;break;case s.default.MOVE_TO_LINE_TO:for(A=n[1],x=n[2],B=p[A],V=p[A+1],M=B+.5|0,P=V+.5|0,M===T&&P===S||(e.moveTo(B,V),T=M,S=P),A+=2;A<x;A+=2)B=p[A],V=p[A+1],M=B+.5|0,P=V+.5|0,A!=x-2&&M===T&&P===S||(e.lineTo(B,V),T=M,S=P);++y;break;case s.default.SET_FILL_STYLE:G=n,this.alignFill_=n[2],D&&(this.fill_(e),D=0,N&&(e.stroke(),N=0)),e.fillStyle=n[1],++y;break;case s.default.SET_STROKE_STYLE:k=n,N&&(e.stroke(),N=0),this.setStrokeStyle_(e,n),++y;break;case s.default.STROKE:Z?N++:e.stroke(),++y;break;default:++y}}D&&this.fill_(e),N&&e.stroke()}execute(e,t,s,n,i){this.viewRotation_=n,this.execute_(e,t,s,this.instructions,i,void 0,void 0)}executeHitDetection(e,t,s,n,i){return this.viewRotation_=s,this.execute_(e,1,t,this.hitDetectionInstructions,!0,n,i)}}})),define("node_modules/ol/src/render/canvas/ExecutorGroup",["require","exports","node_modules/ol/src/render/canvas/BuilderType","node_modules/ol/src/render/canvas/Executor","node_modules/ol/src/extent","node_modules/ol/src/transform","node_modules/ol/src/dom","node_modules/ol/src/obj","node_modules/ol/src/array","node_modules/ol/src/geom/flat/transform"],(function(e,t,s,n,i,o,r,a,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.replayDeclutter=t.getCircleArray=void 0;const u=[s.default.POLYGON,s.default.CIRCLE,s.default.LINE_STRING,s.default.IMAGE,s.default.TEXT,s.default.DEFAULT];const c={0:[[!0]]};function h(e,t,s){let n;const i=Math.floor(e.length/2);if(t>=i)for(n=i;n<t;n++)e[n][s]=!0;else if(t<i)for(n=t+1;n<i;n++)e[n][s]=!0}function f(e){if(void 0!==c[e])return c[e];const t=2*e+1,s=new Array(t);for(let e=0;e<t;e++)s[e]=new Array(t);let n=e,i=0,o=0;for(;n>=i;)h(s,e+n,e+i),h(s,e+i,e+n),h(s,e-i,e+n),h(s,e-n,e+i),h(s,e-n,e-i),h(s,e-i,e-n),h(s,e+i,e-n),h(s,e+n,e-i),i++,o+=1+2*i,2*(o-n)+1>0&&(n-=1,o+=1-2*n);return c[e]=s,s}t.getCircleArray=f,t.replayDeclutter=function(e,t,s,n,i,o){const r=Object.keys(e).map(Number).sort(l.numberSafeCompareFunction);for(let a=0,l=r.length;a<l;++a){const l=e[r[a].toString()];let d;for(let e=0,r=l.length;e<r;){const r=l[e++],a=l[e++];r.execute(t,1,a,s,i),r!==d&&r.declutterItems.length>0&&(d=r,o.push({items:r.declutterItems,opacity:n}))}}},t.default=class{constructor(e,t,s,n,i,r){this.maxExtent_=e,this.overlaps_=n,this.pixelRatio_=s,this.resolution_=t,this.renderBuffer_=r,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=o.create(),this.createExecutors_(i)}clip(e,t){const s=this.getClipCoords(t);e.beginPath(),e.moveTo(s[0],s[1]),e.lineTo(s[2],s[3]),e.lineTo(s[4],s[5]),e.lineTo(s[6],s[7]),e.clip()}createExecutors_(e){for(const t in e){let s=this.executorsByZIndex_[t];void 0===s&&(s={},this.executorsByZIndex_[t]=s);const i=e[t],o=[this.renderBuffer_||0,this.renderBuffer_||0];for(const e in i){const t=i[e];s[e]=new n.default(this.resolution_,this.pixelRatio_,this.overlaps_,t,o)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const s=this.executorsByZIndex_[t];for(let t=0,n=e.length;t<n;++t)if(e[t]in s)return!0}return!1}forEachFeatureAtCoordinate(e,t,n,a,d,c){const h=2*(a=Math.round(a))+1,_=o.compose(this.hitDetectionTransform_,a+.5,a+.5,1/t,-1/t,-n,-e[0],-e[1]);this.hitDetectionContext_||(this.hitDetectionContext_=r.createCanvasContext2D(h,h));const g=this.hitDetectionContext_;let m;g.canvas.width!==h||g.canvas.height!==h?(g.canvas.width=h,g.canvas.height=h):g.clearRect(0,0,h,h),void 0!==this.renderBuffer_&&(m=i.createEmpty(),i.extendCoordinate(m,e),i.buffer(m,t*(this.renderBuffer_+a),m));const p=f(a);let y;function v(e){const t=g.getImageData(0,0,h,h).data;for(let n=0;n<h;n++)for(let i=0;i<h;i++)if(p[n][i]&&t[4*(i*h+n)+3]>0){let t;return(!c||y!=s.default.IMAGE&&y!=s.default.TEXT||-1!==c.indexOf(e))&&(t=d(e)),t||void g.clearRect(0,0,h,h)}}const x=Object.keys(this.executorsByZIndex_).map(Number);let E,C,T,S,M;for(x.sort(l.numberSafeCompareFunction),E=x.length-1;E>=0;--E){const e=x[E].toString();for(T=this.executorsByZIndex_[e],C=u.length-1;C>=0;--C)if(y=u[C],S=T[y],void 0!==S&&(M=S.executeHitDetection(g,_,n,v,m),M))return M}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const s=t[0],n=t[1],i=t[2],o=t[3],r=[s,n,s,o,i,o,i,n];return d.transform2D(r,0,8,2,e,r),r}isEmpty(){return a.isEmpty(this.executorsByZIndex_)}execute(e,t,n,i,o,r,a){const d=Object.keys(this.executorsByZIndex_).map(Number);d.sort(l.numberSafeCompareFunction),this.maxExtent_&&(e.save(),this.clip(e,n));const c=r||u;let h,f,_,g,m,p;for(h=0,f=d.length;h<f;++h){const r=d[h].toString();for(m=this.executorsByZIndex_[r],_=0,g=c.length;_<g;++_){const l=c[_];if(p=m[l],void 0!==p)if(!a||l!=s.default.IMAGE&&l!=s.default.TEXT)p.execute(e,t,n,i,o);else{const e=a[r];e?e.push(p,n.slice(0)):a[r]=[p,n.slice(0)]}}}this.maxExtent_&&e.restore()}}})),define("node_modules/ol/src/VectorRenderTile",["require","exports","node_modules/ol/src/Tile","node_modules/ol/src/dom","node_modules/ol/src/util"],(function(e,t,s,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=[];class r extends s.default{constructor(e,t,s,n){super(e,t,{transition:0}),this.context_={},this.executorGroups={},this.loadingSourceTiles=0,this.errorSourceTileKeys={},this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=null,this.wantedResolution,this.getSourceTiles=n.bind(void 0,this),this.sourceZ=-1,this.hifi=!1,this.wrappedTileCoord=s}getContext(e){const t=i.getUid(e);return t in this.context_||(this.context_[t]=n.createCanvasContext2D(1,1,o)),this.context_[t]}hasContext(e){return i.getUid(e)in this.context_}getImage(e){return this.hasContext(e)?this.getContext(e).canvas:null}getReplayState(e){const t=i.getUid(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedZ:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){for(const e in this.context_)o.push(this.context_[e].canvas);super.release()}}t.default=r})),define("node_modules/ol/src/source/VectorTile",["require","exports","node_modules/ol/src/events/EventType","node_modules/ol/src/VectorTile","node_modules/ol/src/TileCache","node_modules/ol/src/TileState","node_modules/ol/src/source/UrlTile","node_modules/ol/src/VectorRenderTile","node_modules/ol/src/extent","node_modules/ol/src/tilegrid","node_modules/ol/src/array","node_modules/ol/src/tilecoord","node_modules/ol/src/featureloader","node_modules/ol/src/size"],(function(e,t,s,n,i,o,r,a,l,d,u,c,h,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultLoadFunction=void 0;class _ extends r.default{constructor(e){const t=e.projection||"EPSG:3857",s=e.extent||d.extentFromProjection(t),o=e.tileGrid||d.createXYZ({extent:s,maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,opaque:!1,projection:t,state:e.state,tileGrid:o,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:g,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection}),this.format_=e.format?e.format:null,this.loadingTiles_={},this.sourceTileCache=new i.default(this.tileCache.highWaterMark),this.overlaps_=null==e.overlaps||e.overlaps,this.tileClass=e.tileClass?e.tileClass:n.default,this.tileGrids_={}}getFeaturesInExtent(e){const t=[],s=this.tileCache;if(0===s.getCount())return t;const n=c.fromKey(s.peekFirstKey())[0],i=this.tileGrid;return s.forEach((function(s){if(s.tileCoord[0]!==n||s.getState()!==o.default.LOADED)return;const r=s.getSourceTiles();for(let s=0,n=r.length;s<n;++s){const n=r[s],o=n.tileCoord;if(l.intersects(e,i.getTileCoordExtent(o))){const s=n.getFeatures();if(s)for(let n=0,i=s.length;n<i;++n){const i=s[n],o=i.getGeometry();l.intersects(e,o.getExtent())&&t.push(i)}}}})),t}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(e,t){super.expireCache(e,t),this.sourceTileCache.expireCache({})}getSourceTiles(e,t,n){const i=n.wrappedTileCoord,r=this.getTileGridForProjection(t),a=r.getTileCoordExtent(i),d=i[0],c=r.getResolution(d);l.buffer(a,-c,a);const h=this.tileGrid,f=h.getExtent();f&&l.getIntersection(a,f,a);const _=h.getZForResolution(c,1),g=h.getMinZoom(),m=n.sourceTiles;let p,y,v;if(m&&m.length>0&&m[0].tileCoord[0]===_)p=m,y=!0,v=_;else{p=[],v=_+1;do{--v,y=!0,h.forEachTileCoord(a,v,function(i){const r=this.tileUrlFunction(i,e,t);let a;if(void 0!==r)if(this.sourceTileCache.containsKey(r)){a=this.sourceTileCache.get(r);const e=a.getState();if(e===o.default.LOADED||e===o.default.ERROR||e===o.default.EMPTY)return void p.push(a)}else v===_&&(a=new this.tileClass(i,o.default.IDLE,r,this.format_,this.tileLoadFunction),a.extent=h.getTileCoordExtent(i),a.projection=t,a.resolution=h.getResolution(i[0]),this.sourceTileCache.set(r,a),a.addEventListener(s.default.CHANGE,this.handleTileChange.bind(this)),a.load());y=y&&a&&a.getState()===o.default.LOADED,a&&a.getState()!==o.default.EMPTY&&n.getState()===o.default.IDLE&&(n.loadingSourceTiles++,a.addEventListener(s.default.CHANGE,(function e(){const t=a.getState(),i=a.getKey();if(t===o.default.LOADED||t===o.default.ERROR){t===o.default.LOADED?(a.removeEventListener(s.default.CHANGE,e),n.loadingSourceTiles--,delete n.errorSourceTileKeys[i]):t===o.default.ERROR&&(n.errorSourceTileKeys[i]=!0);const r=Object.keys(n.errorSourceTileKeys).length;n.loadingSourceTiles-r==0&&(n.hifi=0===r,n.sourceZ=_,n.setState(o.default.LOADED))}})))}.bind(this)),y||(p.length=0)}while(!y&&v>g)}return n.getState()===o.default.IDLE&&n.setState(o.default.LOADING),y&&(n.hifi=_===v,n.sourceZ=v,n.getState()<o.default.LOADED?n.setState(o.default.LOADED):m&&u.equals(p,m)||(n.sourceTiles=p)),p}getTile(e,t,s,n,i){const r=c.getKeyZXY(e,t,s),d=this.getKey();let u;if(this.tileCache.containsKey(r)&&(u=this.tileCache.get(r),u.key===d))return u;const h=[e,t,s];let f=this.getTileCoordForTileUrlFunction(h,i);const _=this.getTileGrid().getExtent(),g=this.getTileGridForProjection(i);if(f&&_){const t=g.getTileCoordExtent(f);l.buffer(t,-g.getResolution(e),t),l.intersects(_,t)||(f=null)}let m=!0;if(null!==f){const t=this.tileGrid,s=g.getResolution(e),o=t.getZForResolution(s,1),r=g.getTileCoordExtent(f);l.buffer(r,-s,r),t.forEachTileCoord(r,o,function(e){m=m&&!this.tileUrlFunction(e,n,i)}.bind(this))}const p=new a.default(h,m?o.default.EMPTY:o.default.IDLE,f,this.getSourceTiles.bind(this,n,i));return p.key=d,u?(p.interimTile=u,p.refreshInterimChain(),this.tileCache.replace(r,p)):this.tileCache.set(r,p),p}getTileGridForProjection(e){const t=e.getCode();let s=this.tileGrids_[t];if(!s){const n=this.tileGrid;s=d.createForProjection(e,void 0,n?n.getTileSize(n.getMinZoom()):void 0),this.tileGrids_[t]=s}return s}getTilePixelRatio(e){return e}getTilePixelSize(e,t,s){const n=this.getTileGridForProjection(s),i=f.toSize(n.getTileSize(e),this.tmpSize);return[Math.round(i[0]*t),Math.round(i[1]*t)]}updateCacheSize(e,t){super.updateCacheSize(2*e,t)}}function g(e,t){const s=h.loadFeaturesXhr(t,e.getFormat(),e.onLoad.bind(e),e.onError.bind(e));e.setLoader(s)}t.default=_,t.defaultLoadFunction=g})),define("node_modules/ol/src/layer/BaseVector",["require","exports","node_modules/ol/src/layer/Layer","node_modules/ol/src/obj","node_modules/ol/src/style/Style"],(function(e,t,s,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o="renderOrder";class r extends s.default{constructor(e){const t=e||{},s=n.assign({},t);delete s.style,delete s.renderBuffer,delete s.updateWhileAnimating,delete s.updateWhileInteracting,super(s),this.declutter_=void 0!==t.declutter&&t.declutter,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(o)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}setRenderOrder(e){this.set(o,e)}setStyle(e){this.style_=void 0!==e?e:i.createDefaultStyle,this.styleFunction_=null===e?void 0:i.toFunction(this.style_),this.changed()}}t.default=r})),define("node_modules/ol/src/renderer/canvas/Layer",["require","exports","node_modules/ol/src/renderer/Layer","node_modules/ol/src/render/Event","node_modules/ol/src/render/EventType","node_modules/ol/src/transform","node_modules/ol/src/dom","node_modules/ol/src/extent","node_modules/ol/src/render/canvas"],(function(e,t,s,n,i,o,r,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class d extends s.default{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=o.create(),this.pixelTransform=o.create(),this.inversePixelTransform=o.create(),this.context=null,this.containerReused=!1}useContainer(e,t,s){const n=this.getLayer().getClassName();let i,o;if(e&&""===e.style.opacity&&e.className===n){const t=e.firstElementChild;t instanceof HTMLCanvasElement&&(o=t.getContext("2d"))}if(!o||0!==o.canvas.width&&o.canvas.style.transform!==t?this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1):(this.container=e,this.context=o,this.containerReused=!0),!this.container){i=document.createElement("div"),i.className=n;let e=i.style;e.position="absolute",e.width="100%",e.height="100%",o=r.createCanvasContext2D();const t=o.canvas;i.appendChild(t),e=t.style,e.position="absolute",e.left="0",e.transformOrigin="top left",this.container=i,this.context=o}}clip(e,t,s){const n=t.pixelRatio,i=t.size[0]*n/2,r=t.size[1]*n/2,d=t.viewState.rotation,u=a.getTopLeft(s),c=a.getTopRight(s),h=a.getBottomRight(s),f=a.getBottomLeft(s);o.apply(t.coordinateToPixelTransform,u),o.apply(t.coordinateToPixelTransform,c),o.apply(t.coordinateToPixelTransform,h),o.apply(t.coordinateToPixelTransform,f),e.save(),l.rotateAtOffset(e,-d,i,r),e.beginPath(),e.moveTo(u[0]*n,u[1]*n),e.lineTo(c[0]*n,c[1]*n),e.lineTo(h[0]*n,h[1]*n),e.lineTo(f[0]*n,f[1]*n),e.clip(),l.rotateAtOffset(e,d,i,r)}clipUnrotated(e,t,s){const n=a.getTopLeft(s),i=a.getTopRight(s),r=a.getBottomRight(s),l=a.getBottomLeft(s);o.apply(t.coordinateToPixelTransform,n),o.apply(t.coordinateToPixelTransform,i),o.apply(t.coordinateToPixelTransform,r),o.apply(t.coordinateToPixelTransform,l);const d=this.inversePixelTransform;o.apply(d,n),o.apply(d,i),o.apply(d,r),o.apply(d,l),e.save(),e.beginPath(),e.moveTo(Math.round(n[0]),Math.round(n[1])),e.lineTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.clip()}dispatchRenderEvent_(e,t,s){const i=this.getLayer();if(i.hasListener(e)){const o=new n.default(e,this.inversePixelTransform,s,t);i.dispatchEvent(o)}}preRender(e,t){this.dispatchRenderEvent_(i.default.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(i.default.POSTRENDER,e,t)}getRenderTransform(e,t,s,n,i,r,a){const l=i/2,d=r/2,u=n/t,c=-u,h=-e[0]+a,f=-e[1];return o.compose(this.tempTransform,l,d,u,c,-s,h,f)}getDataAtPixel(e,t,s){const n=o.apply(this.inversePixelTransform,e.slice()),i=this.context;let r;try{const e=Math.round(n[0]),t=Math.round(n[1]),s=document.createElement("canvas"),o=s.getContext("2d");s.width=1,s.height=1,o.clearRect(0,0,1,1),o.drawImage(i.canvas,e,t,1,1,0,0,1,1),r=o.getImageData(0,0,1,1).data}catch(e){return"SecurityError"===e.name?new Uint8Array:r}return 0===r[3]?null:r}}t.default=d})),define("node_modules/ol/src/style/IconAnchorUnits",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={FRACTION:"fraction",PIXELS:"pixels"}})),define("node_modules/ol/src/style/IconOrigin",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}})),define("node_modules/ol/src/style/Icon",["require","exports","node_modules/ol/src/events/EventType","node_modules/ol/src/style/IconAnchorUnits","node_modules/ol/src/style/IconOrigin","node_modules/ol/src/ImageState","node_modules/ol/src/style/Image","node_modules/ol/src/color","node_modules/ol/src/asserts","node_modules/ol/src/style/IconImage","node_modules/ol/src/util"],(function(e,t,s,n,i,o,r,a,l,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class c extends r.default{constructor(e){const t=e||{},s=void 0!==t.opacity?t.opacity:1,r=void 0!==t.rotation?t.rotation:0,c=void 0!==t.scale?t.scale:1,h=void 0!==t.rotateWithView&&t.rotateWithView;super({opacity:s,rotation:r,scale:c,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:h}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:i.default.TOP_LEFT,this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:n.default.FRACTION,this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:n.default.FRACTION,this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;const f=void 0!==t.img?t.img:null,_=void 0!==t.imgSize?t.imgSize:null;let g=t.src;l.assert(!(void 0!==g&&f),4),l.assert(!f||f&&_,5),void 0!==g&&0!==g.length||!f||(g=f.src||u.getUid(f)),l.assert(void 0!==g&&g.length>0,6);const m=void 0!==t.src?o.default.IDLE:o.default.LOADED;this.color_=void 0!==t.color?a.asArray(t.color):null,this.iconImage_=d.get(f,g,_,this.crossOrigin_,m,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:i.default.TOP_LEFT,this.origin_=null,this.size_=void 0!==t.size?t.size:null}clone(){const e=this.getScale();return new c({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})}getAnchor(){if(this.normalizedAnchor_)return this.normalizedAnchor_;let e=this.anchor_;const t=this.getSize();if(this.anchorXUnits_==n.default.FRACTION||this.anchorYUnits_==n.default.FRACTION){if(!t)return null;e=this.anchor_.slice(),this.anchorXUnits_==n.default.FRACTION&&(e[0]*=t[0]),this.anchorYUnits_==n.default.FRACTION&&(e[1]*=t[1])}if(this.anchorOrigin_!=i.default.TOP_LEFT){if(!t)return null;e===this.anchor_&&(e=this.anchor_.slice()),this.anchorOrigin_!=i.default.TOP_RIGHT&&this.anchorOrigin_!=i.default.BOTTOM_RIGHT||(e[0]=-e[0]+t[0]),this.anchorOrigin_!=i.default.BOTTOM_LEFT&&this.anchorOrigin_!=i.default.BOTTOM_RIGHT||(e[1]=-e[1]+t[1])}return this.normalizedAnchor_=e,this.normalizedAnchor_}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getHitDetectionImageSize(){return this.getImageSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;const t=this.getDisplacement();if(this.offsetOrigin_!=i.default.TOP_LEFT){const t=this.getSize(),s=this.iconImage_.getSize();if(!t||!s)return null;e=e.slice(),this.offsetOrigin_!=i.default.TOP_RIGHT&&this.offsetOrigin_!=i.default.BOTTOM_RIGHT||(e[0]=s[0]-t[0]-e[0]),this.offsetOrigin_!=i.default.BOTTOM_LEFT&&this.offsetOrigin_!=i.default.BOTTOM_RIGHT||(e[1]=s[1]-t[1]-e[1])}return e[0]+=t[0],e[1]+=t[1],this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(e){this.iconImage_.addEventListener(s.default.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(s.default.CHANGE,e)}}t.default=c})),define("node_modules/ol/src/style",["require","exports","node_modules/ol/src/style/Circle","node_modules/ol/src/style/Fill","node_modules/ol/src/style/Icon","node_modules/ol/src/style/IconImage","node_modules/ol/src/style/Image","node_modules/ol/src/style/RegularShape","node_modules/ol/src/style/Stroke","node_modules/ol/src/style/Style","node_modules/ol/src/style/Text"],(function(e,t,s,n,i,o,r,a,l,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Text=t.Style=t.Stroke=t.RegularShape=t.Image=t.IconImage=t.Icon=t.Fill=t.Circle=void 0,Object.defineProperty(t,"Circle",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"Fill",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"Icon",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"IconImage",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"RegularShape",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"Stroke",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"Style",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"Text",{enumerable:!0,get:function(){return u.default}})})),define("node_modules/ol/src/render/canvas/hitdetect",["require","exports","node_modules/ol/src/render/canvas/Immediate","node_modules/ol/src/geom/GeometryType","node_modules/ol/src/style/IconAnchorUnits","node_modules/ol/src/style","node_modules/ol/src/dom","node_modules/ol/src/extent","node_modules/ol/src/array"],(function(e,t,s,n,i,o,r,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hitDetect=t.createHitDetectionImageData=void 0,t.createHitDetectionImageData=function(e,t,d,u,c,h,f){const _=e[0]/2,g=e[1]/2,m=r.createCanvasContext2D(_,g);m.imageSmoothingEnabled=!1;const p=m.canvas,y=new s.default(m,.5,c,null,f),v=d.length,x=Math.floor(16777215/v),E={};for(let e=1;e<=v;++e){const t=d[e-1],s=t.getStyleFunction()||u;if(!u)continue;let l=s(t,h);if(!l)continue;Array.isArray(l)||(l=[l]);const f="#"+("000000"+(e*x).toString(16)).slice(-6);for(let e=0,s=l.length;e<s;++e){const s=l[e],d=s.clone(),u=d.getFill();u&&u.setColor(f);const h=d.getStroke();h&&h.setColor(f),d.setText(void 0);const _=s.getImage();if(_){const e=_.getImageSize();if(!e)continue;const t=document.createElement("canvas");t.width=e[0],t.height=e[1];const s=t.getContext("2d",{alpha:!1});s.fillStyle=f;const n=s.canvas;s.fillRect(0,0,n.width,n.height);const a=e?e[0]:n.width,l=e?e[1]:n.height;r.createCanvasContext2D(a,l).drawImage(n,0,0),d.setImage(new o.Icon({img:n,imgSize:e,anchor:_.getAnchor(),anchorXUnits:i.default.PIXELS,anchorYUnits:i.default.PIXELS,offset:_.getOrigin(),size:_.getSize(),opacity:_.getOpacity(),scale:_.getScale(),rotation:_.getRotation(),rotateWithView:_.getRotateWithView()}))}const g=Number(d.getZIndex());let m=E[g];m||(m={},E[g]=m,m[n.default.POLYGON]=[],m[n.default.CIRCLE]=[],m[n.default.LINE_STRING]=[],m[n.default.POINT]=[]);const p=d.getGeometryFunction()(t);p&&a.intersects(c,p.getExtent())&&m[p.getType().replace("Multi","")].push(p,d)}}const C=Object.keys(E).map(Number).sort(l.numberSafeCompareFunction);for(let e=0,s=C.length;e<s;++e){const s=E[C[e]];for(const e in s){const n=s[e];for(let e=0,s=n.length;e<s;e+=2){y.setStyle(n[e+1]);for(let s=0,i=t.length;s<i;++s)y.setTransform(t[s]),y.drawGeometry(n[e])}}}return m.getImageData(0,0,p.width,p.height)},t.hitDetect=function(e,t,s){const n=[];if(s){const i=4*(Math.round(e[0]/2)+Math.round(e[1]/2)*s.width),o=s.data[i],r=s.data[i+1],a=s.data[i+2]+256*(r+256*o),l=Math.floor(16777215/t.length);a&&a%l==0&&n.push(t[a/l-1])}return n}})),define("node_modules/ol/src/renderer/canvas/VectorLayer",["require","exports","node_modules/ol/src/render/canvas/BuilderGroup","node_modules/ol/src/renderer/canvas/Layer","node_modules/ol/src/render/canvas/ExecutorGroup","node_modules/ol/src/ViewHint","node_modules/ol/src/transform","node_modules/ol/src/extent","node_modules/ol/src/render/canvas/hitdetect","node_modules/ol/src/renderer/vector","node_modules/ol/src/proj","node_modules/ol/src/util","node_modules/ol/src/coordinate"],(function(e,t,s,n,i,o,r,a,l,d,u,c,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class f extends n.default{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.dirty_=!1,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=a.createEmpty(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0}useContainer(e,t,s){s<1&&(e=null),super.useContainer(e,t,s)}renderFrame(e,t){const s=e.pixelRatio,n=e.layerStatesArray[e.layerIndex];r.makeScale(this.pixelTransform,1/s,1/s),r.makeInverse(this.inversePixelTransform,this.pixelTransform);const l=r.toString(this.pixelTransform);this.useContainer(t,l,n.opacity);const d=this.context,c=d.canvas,h=this.replayGroup_;if(!h||h.isEmpty())return!this.containerReused&&c.width>0&&(c.width=0),this.container;const f=Math.round(e.size[0]*s),_=Math.round(e.size[1]*s);c.width!=f||c.height!=_?(c.width=f,c.height=_,c.style.transform!==l&&(c.style.transform=l)):this.containerReused||d.clearRect(0,0,f,_),this.preRender(d,e);const g=e.extent,m=e.viewState,p=m.center,y=m.resolution,v=m.projection,x=m.rotation,E=v.getExtent(),C=this.getLayer().getSource();let T=!1;if(n.extent&&this.clipping){const t=u.fromUserExtent(n.extent,v);T=!a.containsExtent(t,e.extent)&&a.intersects(t,e.extent),T&&this.clipUnrotated(d,e,t)}const S=e.viewHints,M=!(S[o.default.ANIMATING]||S[o.default.INTERACTING]),P=this.getRenderTransform(p,y,x,s,f,_,0),O=this.getLayer().getDeclutter()?{}:null;if(h.execute(d,1,P,x,M,void 0,O),C.getWrapX()&&v.canWrapX()&&!a.containsExtent(E,g)){let e=g[0];const t=a.getWidth(E);let n,i=0;for(;e<E[0];){--i,n=t*i;const o=this.getRenderTransform(p,y,x,s,f,_,n);h.execute(d,1,o,x,M,void 0,O),e+=t}for(i=0,e=g[2];e>E[2];){++i,n=t*i;const o=this.getRenderTransform(p,y,x,s,f,_,n);h.execute(d,1,o,x,M,void 0,O),e-=t}}if(O){const t=e.viewHints,s=!(t[o.default.ANIMATING]||t[o.default.INTERACTING]);i.replayDeclutter(O,d,x,1,s,e.declutterItems)}T&&d.restore(),this.postRender(d,e);const R=n.opacity,I=this.container;return R!==parseFloat(I.style.opacity)&&(I.style.opacity=1===R?"":String(R)),this.renderedRotation_!==m.rotation&&(this.renderedRotation_=m.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(function(t,s){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const e=[this.context.canvas.width,this.context.canvas.height];r.apply(this.pixelTransform,e);const t=this.renderedCenter_,s=this.renderedResolution_,n=this.renderedRotation_,i=this.renderedProjection_,o=this.renderedExtent_,d=this.getLayer(),u=[],c=e[0]/2,h=e[1]/2;u.push(this.getRenderTransform(t,s,n,.5,c,h,0).slice());const f=d.getSource(),_=i.getExtent();if(f.getWrapX()&&i.canWrapX()&&!a.containsExtent(_,o)){let e=o[0];const i=a.getWidth(_);let r,l=0;for(;e<_[0];)--l,r=i*l,u.push(this.getRenderTransform(t,s,n,.5,c,h,r).slice()),e+=i;for(l=0,e=o[2];e>_[2];)++l,r=i*l,u.push(this.getRenderTransform(t,s,n,.5,c,h,r).slice()),e-=i}this.hitDetectionImageData_=l.createHitDetectionImageData(e,u,this.renderedFeatures_,d.getStyleFunction(),o,s,n)}t(l.hitDetect(e,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}forEachFeatureAtCoordinate(e,t,s,n,i){if(this.replayGroup_){const o=t.viewState.resolution,r=t.viewState.rotation,a=this.getLayer(),l={};return this.replayGroup_.forEachFeatureAtCoordinate(e,o,r,s,(function(e){const t=c.getUid(e);if(!(t in l))return l[t]=!0,n(e,a)}),a.getDeclutter()?i:null)}}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),n=t.getSource();if(!n)return!1;const r=e.viewHints[o.default.ANIMATING],l=e.viewHints[o.default.INTERACTING],c=t.getUpdateWhileAnimating(),f=t.getUpdateWhileInteracting();if(!this.dirty_&&!c&&r||!f&&l)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const _=e.extent,g=e.viewState,m=g.projection,p=g.resolution,y=e.pixelRatio,v=t.getRevision(),x=t.getRenderBuffer();let E=t.getRenderOrder();void 0===E&&(E=d.defaultOrder);const C=g.center.slice(),T=a.buffer(_,x*p),S=[T.slice()],M=m.getExtent();if(n.getWrapX()&&m.canWrapX()&&!a.containsExtent(M,e.extent)){const e=a.getWidth(M),t=Math.max(a.getWidth(T)/2,e);T[0]=M[0]-t,T[2]=M[2]+t,h.wrapX(C,m);const s=a.wrapX(S[0],m);s[0]<M[0]&&s[2]<M[2]?S.push([s[0]+e,s[1],s[2]+e,s[3]]):s[0]>M[0]&&s[2]>M[2]&&S.push([s[0]-e,s[1],s[2]-e,s[3]])}if(!this.dirty_&&this.renderedResolution_==p&&this.renderedRevision_==v&&this.renderedRenderOrder_==E&&a.containsExtent(this.renderedExtent_,T))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;const P=new s.default(d.getTolerance(p,y),T,p,y,t.getDeclutter()),O=u.getUserProjection();let R;if(O){for(let e=0,t=S.length;e<t;++e)n.loadFeatures(u.toUserExtent(S[e],m),p,O);R=u.getTransformFromProjections(O,m)}else for(let e=0,t=S.length;e<t;++e)n.loadFeatures(S[e],p,m);const I=d.getSquaredTolerance(p,y),b=function(e){let s;const n=e.getStyleFunction()||t.getStyleFunction();if(n&&(s=n(e,p)),s){const t=this.renderFeature(e,I,s,P,R);this.dirty_=this.dirty_||t}}.bind(this),w=u.toUserExtent(T,m),L=n.getFeaturesInExtent(w);E&&L.sort(E);for(let e=0,t=L.length;e<t;++e)b(L[e]);this.renderedFeatures_=L;const F=P.finish(),A=new i.default(T,p,y,n.getOverlaps(),F,t.getRenderBuffer());return this.renderedResolution_=p,this.renderedRevision_=v,this.renderedRenderOrder_=E,this.renderedExtent_=T,this.renderedCenter_=C,this.renderedProjection_=m,this.replayGroup_=A,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,s,n,i){if(!s)return!1;let o=!1;if(Array.isArray(s))for(let r=0,a=s.length;r<a;++r)o=d.renderFeature(n,e,s[r],t,this.boundHandleStyleImageChange_,i)||o;else o=d.renderFeature(n,e,s,t,this.boundHandleStyleImageChange_,i);return o}}t.default=f})),define("node_modules/ol/src/layer/Vector",["require","exports","node_modules/ol/src/layer/BaseVector","node_modules/ol/src/renderer/canvas/VectorLayer"],(function(e,t,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i extends s.default{constructor(e){super(e)}createRenderer(){return new n.default(this)}}t.default=i})),define("node_modules/ol/src/interaction/Draw",["require","exports","node_modules/ol/src/geom/Circle","node_modules/ol/src/events/Event","node_modules/ol/src/events/EventType","node_modules/ol/src/Feature","node_modules/ol/src/geom/GeometryType","node_modules/ol/src/interaction/Property","node_modules/ol/src/geom/LineString","node_modules/ol/src/MapBrowserEvent","node_modules/ol/src/MapBrowserEventType","node_modules/ol/src/geom/MultiLineString","node_modules/ol/src/geom/MultiPoint","node_modules/ol/src/geom/MultiPolygon","node_modules/ol/src/geom/Point","node_modules/ol/src/interaction/Pointer","node_modules/ol/src/geom/Polygon","node_modules/ol/src/layer/Vector","node_modules/ol/src/source/Vector","node_modules/ol/src/functions","node_modules/ol/src/events/condition","node_modules/ol/src/extent","node_modules/ol/src/style/Style","node_modules/ol/src/proj","node_modules/ol/src/Object","node_modules/ol/src/coordinate"],(function(e,t,s,n,i,o,r,a,l,d,u,c,h,f,_,g,m,p,y,v,x,E,C,T,S,M){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createBox=t.createRegularPolygon=void 0;const P="Point",O="LineString",R="Polygon",I="Circle",b="drawstart",w="drawend",L="drawabort";class F extends n.default{constructor(e,t){super(e),this.feature=t}}class A extends g.default{constructor(e){const t=e;t.stopDown||(t.stopDown=v.FALSE),super(t),this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=function(e){let t;e===r.default.POINT||e===r.default.MULTI_POINT?t=P:e===r.default.LINE_STRING||e===r.default.MULTI_LINE_STRING?t=O:e===r.default.POLYGON||e===r.default.MULTI_POLYGON?t=R:e===r.default.CIRCLE&&(t=I);return t}(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_===R?3:2,this.maxPoints_=e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:v.TRUE;let n=e.geometryFunction;if(!n)if(this.type_===r.default.CIRCLE)n=function(e,t,n){const i=t||new s.default([NaN,NaN]),o=T.fromUserCoordinate(e[0],n),r=M.squaredDistance(o,T.fromUserCoordinate(e[1],n));i.setCenterAndRadius(o,Math.sqrt(r));const a=T.getUserProjection();return a&&i.transform(n,a),i};else{let e;const t=this.mode_;t===P?e=_.default:t===O?e=l.default:t===R&&(e=m.default),n=function(s,n,i){let o=n;return o?t===R?s[0].length?o.setCoordinates([s[0].concat([s[0][0]])]):o.setCoordinates([]):o.setCoordinates(s):o=new e(s),o}}this.geometryFunction_=n,this.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new p.default({source:new y.default({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:D(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:x.noModifierKeys,this.freehandCondition_,e.freehand?this.freehandCondition_=x.always:this.freehandCondition_=e.freehandCondition?e.freehandCondition:x.shiftKeyOnly,this.addEventListener(S.getChangeEventType(a.default.ACTIVE),this.updateState_)}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===i.default.CONTEXTMENU&&e.preventDefault(),this.freehand_=this.mode_!==P&&this.freehandCondition_(e);let t=e.type===u.default.POINTERMOVE,s=!0;if(!this.freehand_&&this.lastDragTime_&&e.type===u.default.POINTERDRAG){Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&e.type===u.default.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),s=!1):this.freehand_&&e.type===u.default.POINTERDOWN?s=!1:t?(s=e.type===u.default.POINTERMOVE,s&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.preventDefault()):("mouse"==e.originalEvent.pointerType||e.type===u.default.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e)):e.type===u.default.DBLCLICK&&(s=!1),super.handleEvent(e)&&s}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new d.default(u.default.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}handleUpEvent(e){let t=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const s=this.mode_===I;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||s?this.finishDrawing():this.atFinish_(e)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate):(this.startDrawing_(e),this.mode_===P&&this.finishDrawing()),t=!1):this.freehand_&&this.abortDrawing(),!t&&this.stopClick_&&e.stopPropagation(),t}handlePointerMove_(e){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,s=e.pixel,n=t[0]-s[0],i=t[1]-s[1],o=n*n+i*i;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(e):this.createOrUpdateSketchPoint_(e)}atFinish_(e){let t=!1;if(this.sketchFeature_){let s=!1,n=[this.finishCoordinate_];if(this.mode_===O)s=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===R){const e=this.sketchCoords_;s=e[0].length>this.minPoints_,n=[e[0][0],e[0][e[0].length-2]]}if(s){const s=e.map;for(let i=0,o=n.length;i<o;i++){const o=n[i],r=s.getPixelFromCoordinate(o),a=e.pixel,l=a[0]-r[0],d=a[1]-r[1],u=this.freehand_?1:this.snapTolerance_;if(t=Math.sqrt(l*l+d*d)<=u,t){this.finishCoordinate_=o;break}}}}return t}createOrUpdateSketchPoint_(e){const t=e.coordinate.slice();if(this.sketchPoint_){this.sketchPoint_.getGeometry().setCoordinates(t)}else this.sketchPoint_=new o.default(new _.default(t)),this.updateSketchFeatures_()}startDrawing_(e){const t=e.coordinate,s=e.map.getView().getProjection();this.finishCoordinate_=t,this.mode_===P?this.sketchCoords_=t.slice():this.mode_===R?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new o.default(new l.default(this.sketchLineCoords_)));const n=this.geometryFunction_(this.sketchCoords_,void 0,s);this.sketchFeature_=new o.default,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new F(b,this.sketchFeature_))}modifyDrawing_(e){let t=e.coordinate;const s=this.sketchFeature_.getGeometry(),n=e.map.getView().getProjection();let i,a,d;if(this.mode_===P?a=this.sketchCoords_:this.mode_===R?(i=this.sketchCoords_[0],a=i[i.length-1],this.atFinish_(e)&&(t=this.finishCoordinate_.slice())):(i=this.sketchCoords_,a=i[i.length-1]),a[0]=t[0],a[1]=t[1],this.geometryFunction_(this.sketchCoords_,s,n),this.sketchPoint_){this.sketchPoint_.getGeometry().setCoordinates(t)}if(s.getType()==r.default.POLYGON&&this.mode_!==R){this.sketchLine_||(this.sketchLine_=new o.default);const e=s.getLinearRing(0);d=this.sketchLine_.getGeometry(),d?(d.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),d.changed()):(d=new l.default(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(d))}else this.sketchLineCoords_&&(d=this.sketchLine_.getGeometry(),d.setCoordinates(this.sketchLineCoords_));this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),s=this.getMap().getView().getProjection();let n,i;this.mode_===O?(this.finishCoordinate_=e.slice(),i=this.sketchCoords_,i.length>=this.maxPoints_&&(this.freehand_?i.pop():n=!0),i.push(e.slice()),this.geometryFunction_(i,t,s)):this.mode_===R&&(i=this.sketchCoords_[0],i.length>=this.maxPoints_&&(this.freehand_?i.pop():n=!0),i.push(e.slice()),n&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,t,s)),this.updateSketchFeatures_(),n&&this.finishDrawing()}removeLastPoint(){if(!this.sketchFeature_)return;const e=this.sketchFeature_.getGeometry(),t=this.getMap().getView().getProjection();let s,n;this.mode_===O?(s=this.sketchCoords_,s.splice(-2,1),this.geometryFunction_(s,e,t),s.length>=2&&(this.finishCoordinate_=s[s.length-2].slice())):this.mode_===R&&(s=this.sketchCoords_[0],s.splice(-2,1),n=this.sketchLine_.getGeometry(),n.setCoordinates(s),this.geometryFunction_(this.sketchCoords_,e,t)),0===s.length&&this.abortDrawing(),this.updateSketchFeatures_()}finishDrawing(){const e=this.abortDrawing_();if(!e)return;let t=this.sketchCoords_;const s=e.getGeometry(),n=this.getMap().getView().getProjection();this.mode_===O?(t.pop(),this.geometryFunction_(t,s,n)):this.mode_===R&&(t[0].pop(),this.geometryFunction_(t,s,n),t=s.getCoordinates()),this.type_===r.default.MULTI_POINT?e.setGeometry(new h.default([t])):this.type_===r.default.MULTI_LINE_STRING?e.setGeometry(new c.default([t])):this.type_===r.default.MULTI_POLYGON&&e.setGeometry(new f.default([t])),this.dispatchEvent(new F(w,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new F(L,e))}appendCoordinates(e){const t=this.mode_;let s=[];t===O?s=this.sketchCoords_:t===R&&(s=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]);const n=s.pop();for(let t=0;t<e.length;t++)this.addToDrawing_(e[t]);this.addToDrawing_(n)}extend(e){const t=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=t.getCoordinates();const s=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=s.slice(),this.sketchCoords_.push(s.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new F(b,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();e&&t||this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function D(){const e=C.createEditingStyle();return function(t,s){return e[t.getGeometry().getType()]}}t.createRegularPolygon=function(e,t){return function(n,i,o){const r=T.fromUserCoordinate(n[0],o),a=T.fromUserCoordinate(n[1],o),l=Math.sqrt(M.squaredDistance(r,a)),d=i||m.fromCircle(new s.default(r),e);let u=t;if(!t){const e=a[0]-r[0],t=a[1]-r[1];u=Math.atan(t/e)-(e<0?Math.PI:0)}m.makeRegular(d,r,l,u);const c=T.getUserProjection();return c&&d.transform(o,c),d}},t.createBox=function(){return function(e,t,s){const n=E.boundingExtent(e.map((function(e){return T.fromUserCoordinate(e,s)}))),i=[[E.getBottomLeft(n),E.getBottomRight(n),E.getTopRight(n),E.getTopLeft(n),E.getBottomLeft(n)]];let o=t;o?o.setCoordinates(i):o=new m.default(i);const r=T.getUserProjection();return r&&o.transform(s,r),o}},t.default=A})),define("node_modules/ol/src/interaction/Extent",["require","exports","node_modules/ol/src/events/Event","node_modules/ol/src/Feature","node_modules/ol/src/geom/GeometryType","node_modules/ol/src/MapBrowserEventType","node_modules/ol/src/geom/Point","node_modules/ol/src/interaction/Pointer","node_modules/ol/src/layer/Vector","node_modules/ol/src/source/Vector","node_modules/ol/src/events/condition","node_modules/ol/src/extent","node_modules/ol/src/coordinate","node_modules/ol/src/style/Style","node_modules/ol/src/geom/Polygon","node_modules/ol/src/proj"],(function(e,t,s,n,i,o,r,a,l,d,u,c,h,f,_,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const m="extentchanged";class p extends s.default{constructor(e){super(m),this.extent=e}}class y extends a.default{constructor(e){const t=e||{};super(t),this.condition_=t.condition?t.condition:u.always,this.extent_=null,this.pointerHandler_=null,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.snappedToVertex_=!1,this.extentFeature_=null,this.vertexFeature_=null,e||(e={}),this.extentOverlay_=new l.default({source:new d.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:v(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.vertexOverlay_=new l.default({source:new d.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:x(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&this.setExtent(e.extent)}snapToVertex_(e,t){const s=t.getCoordinateFromPixelInternal(e),n=function(e,t){return h.squaredDistanceToSegment(s,e)-h.squaredDistanceToSegment(s,t)},i=this.getExtentInternal();if(i){const o=function(e){return[[[e[0],e[1]],[e[0],e[3]]],[[e[0],e[3]],[e[2],e[3]]],[[e[2],e[3]],[e[2],e[1]]],[[e[2],e[1]],[e[0],e[1]]]]}(i);o.sort(n);const r=o[0];let a=h.closestOnSegment(s,r);const l=t.getPixelFromCoordinateInternal(a);if(h.distance(e,l)<=this.pixelTolerance_){const e=t.getPixelFromCoordinateInternal(r[0]),s=t.getPixelFromCoordinateInternal(r[1]),n=h.squaredDistance(l,e),i=h.squaredDistance(l,s),o=Math.sqrt(Math.min(n,i));return this.snappedToVertex_=o<=this.pixelTolerance_,this.snappedToVertex_&&(a=n>i?r[1]:r[0]),a}}return null}handlePointerMove_(e){const t=e.pixel,s=e.map;let n=this.snapToVertex_(t,s);n||(n=s.getCoordinateFromPixelInternal(t)),this.createOrUpdatePointerFeature_(n)}createOrUpdateExtentFeature_(e){let t=this.extentFeature_;return t?e?t.setGeometry(_.fromExtent(e)):t.setGeometry(void 0):(t=e?new n.default(_.fromExtent(e)):new n.default({}),this.extentFeature_=t,this.extentOverlay_.getSource().addFeature(t)),t}createOrUpdatePointerFeature_(e){let t=this.vertexFeature_;if(t){t.getGeometry().setCoordinates(e)}else t=new n.default(new r.default(e)),this.vertexFeature_=t,this.vertexOverlay_.getSource().addFeature(t);return t}handleEvent(e){return!e.originalEvent||!this.condition_(e)||(e.type!=o.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),super.handleEvent(e),!1)}handleDownEvent(e){const t=e.pixel,s=e.map,n=this.getExtentInternal();let i=this.snapToVertex_(t,s);const o=function(e){let t=null,s=null;return e[0]==n[0]?t=n[2]:e[0]==n[2]&&(t=n[0]),e[1]==n[1]?s=n[3]:e[1]==n[3]&&(s=n[1]),null!==t&&null!==s?[t,s]:null};if(i&&n){const e=i[0]==n[0]||i[0]==n[2]?i[0]:null,t=i[1]==n[1]||i[1]==n[3]?i[1]:null;null!==e&&null!==t?this.pointerHandler_=E(o(i)):null!==e?this.pointerHandler_=C(o([e,n[1]]),o([e,n[3]])):null!==t&&(this.pointerHandler_=C(o([n[0],t]),o([n[2],t])))}else i=s.getCoordinateFromPixelInternal(t),this.setExtent([i[0],i[1],i[0],i[1]]),this.pointerHandler_=E(i);return!0}handleDragEvent(e){if(this.pointerHandler_){const t=e.coordinate;this.setExtent(this.pointerHandler_(t)),this.createOrUpdatePointerFeature_(t)}}handleUpEvent(e){this.pointerHandler_=null;const t=this.getExtentInternal();return t&&0!==c.getArea(t)||this.setExtent(null),!1}setMap(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),super.setMap(e)}getExtent(){return g.toUserExtent(this.getExtentInternal(),this.getMap().getView().getProjection())}getExtentInternal(){return this.extent_}setExtent(e){this.extent_=e||null,this.createOrUpdateExtentFeature_(e),this.dispatchEvent(new p(this.extent_))}}function v(){const e=f.createEditingStyle();return function(t,s){return e[i.default.POLYGON]}}function x(){const e=f.createEditingStyle();return function(t,s){return e[i.default.POINT]}}function E(e){return function(t){return c.boundingExtent([e,t])}}function C(e,t){return e[0]==t[0]?function(s){return c.boundingExtent([e,[s[0],t[1]]])}:e[1]==t[1]?function(s){return c.boundingExtent([e,[t[0],s[1]]])}:null}t.default=y})),define("node_modules/ol/src/interaction/Modify",["require","exports","node_modules/ol/src/Collection","node_modules/ol/src/CollectionEventType","node_modules/ol/src/events/Event","node_modules/ol/src/events/EventType","node_modules/ol/src/Feature","node_modules/ol/src/geom/GeometryType","node_modules/ol/src/MapBrowserEventType","node_modules/ol/src/geom/Point","node_modules/ol/src/interaction/Pointer","node_modules/ol/src/structs/RBush","node_modules/ol/src/source/VectorEventType","node_modules/ol/src/layer/Vector","node_modules/ol/src/source/Vector","node_modules/ol/src/events/condition","node_modules/ol/src/extent","node_modules/ol/src/coordinate","node_modules/ol/src/style/Style","node_modules/ol/src/array","node_modules/ol/src/geom/Polygon","node_modules/ol/src/proj","node_modules/ol/src/util"],(function(e,t,s,n,i,o,r,a,l,d,u,c,h,f,_,g,m,p,y,v,x,E,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModifyEvent=void 0;const T=[0,0,0,0],S=[],M="modifystart",P="modifyend";class O extends i.default{constructor(e,t,s){super(e),this.features=t,this.mapBrowserEvent=s}}t.ModifyEvent=O;class R extends u.default{constructor(e){let t;if(super(e),this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:g.primaryAction,this.defaultDeleteCondition_=function(e){return g.altKeyOnly(e)&&g.singleClick(e)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:g.always,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new c.default,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new f.default({source:new _.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:L(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,e.source?(this.source_=e.source,t=new s.default(this.source_.getFeatures()),this.source_.addEventListener(h.default.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(h.default.REMOVEFEATURE,this.handleSourceRemove_.bind(this))):t=e.features,!t)throw new Error("The modify interaction requires features or a source");this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(n.default.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(n.default.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null}addFeature_(e){const t=e.getGeometry();if(t){const s=this.SEGMENT_WRITERS_[t.getType()];s&&s(e,t)}const s=this.getMap();s&&s.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,s),e.addEventListener(o.default.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e){this.modified_||(this.modified_=!0,this.dispatchEvent(new O(M,this.features_,e)))}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(o.default.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,s=[];t.forEach((function(t){e===t.feature&&s.push(t)}));for(let e=s.length-1;e>=0;--e){const n=s[e];for(let e=this.dragSegments_.length-1;e>=0;--e)this.dragSegments_[e][0]===n&&this.dragSegments_.splice(e,1);t.remove(n)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){const t=e.element;this.removeFeature_(t)}writePointGeometry_(e,t){const s=t.getCoordinates(),n={feature:e,geometry:t,segment:[s,s]};this.rBush_.insert(t.getExtent(),n)}writeMultiPointGeometry_(e,t){const s=t.getCoordinates();for(let n=0,i=s.length;n<i;++n){const i=s[n],o={feature:e,geometry:t,depth:[n],index:n,segment:[i,i]};this.rBush_.insert(t.getExtent(),o)}}writeLineStringGeometry_(e,t){const s=t.getCoordinates();for(let n=0,i=s.length-1;n<i;++n){const i=s.slice(n,n+2),o={feature:e,geometry:t,index:n,segment:i};this.rBush_.insert(m.boundingExtent(i),o)}}writeMultiLineStringGeometry_(e,t){const s=t.getCoordinates();for(let n=0,i=s.length;n<i;++n){const i=s[n];for(let s=0,o=i.length-1;s<o;++s){const o=i.slice(s,s+2),r={feature:e,geometry:t,depth:[n],index:s,segment:o};this.rBush_.insert(m.boundingExtent(o),r)}}}writePolygonGeometry_(e,t){const s=t.getCoordinates();for(let n=0,i=s.length;n<i;++n){const i=s[n];for(let s=0,o=i.length-1;s<o;++s){const o=i.slice(s,s+2),r={feature:e,geometry:t,depth:[n],index:s,segment:o};this.rBush_.insert(m.boundingExtent(o),r)}}}writeMultiPolygonGeometry_(e,t){const s=t.getCoordinates();for(let n=0,i=s.length;n<i;++n){const i=s[n];for(let s=0,o=i.length;s<o;++s){const o=i[s];for(let i=0,r=o.length-1;i<r;++i){const r=o.slice(i,i+2),a={feature:e,geometry:t,depth:[s,n],index:i,segment:r};this.rBush_.insert(m.boundingExtent(r),a)}}}}writeCircleGeometry_(e,t){const s=t.getCenter(),n={feature:e,geometry:t,index:0,segment:[s,s]},i={feature:e,geometry:t,index:1,segment:[s,s]},o=[n,i];n.featureSegments=o,i.featureSegments=o,this.rBush_.insert(m.createOrUpdateFromCoordinate(s),n);let r=t;const a=E.getUserProjection();if(a&&this.getMap()){const e=this.getMap().getView().getProjection();r=r.clone().transform(a,e),r=x.fromCircle(r).transform(e,a)}this.rBush_.insert(r.getExtent(),i)}writeGeometryCollectionGeometry_(e,t){const s=t.getGeometriesArray();for(let t=0;t<s.length;++t){const n=s[t];(0,this.SEGMENT_WRITERS_[n.getType()])(e,n)}}createOrUpdateVertexFeature_(e){let t=this.vertexFeature_;if(t){t.getGeometry().setCoordinates(e)}else t=new r.default(new d.default(e)),this.vertexFeature_=t,this.overlay_.getSource().addFeature(t);return t}handleEvent(e){if(!e.originalEvent)return!0;let t;return this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=l.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(t=!(e.type!=l.default.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==l.default.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e);const t=e.coordinate;for(let s=0,n=this.dragSegments_.length;s<n;++s){const n=this.dragSegments_[s],i=n[0],o=i.depth,r=i.geometry;let l;const d=i.segment,u=n[1];for(;t.length<r.getStride();)t.push(d[u][t.length]);switch(r.getType()){case a.default.POINT:l=t,d[0]=t,d[1]=t;break;case a.default.MULTI_POINT:l=r.getCoordinates(),l[i.index]=t,d[0]=t,d[1]=t;break;case a.default.LINE_STRING:l=r.getCoordinates(),l[i.index+u]=t,d[u]=t;break;case a.default.MULTI_LINE_STRING:case a.default.POLYGON:l=r.getCoordinates(),l[o[0]][i.index+u]=t,d[u]=t;break;case a.default.MULTI_POLYGON:l=r.getCoordinates(),l[o[1]][o[0]][i.index+u]=t,d[u]=t;break;case a.default.CIRCLE:if(d[0]=t,d[1]=t,0===i.index)this.changingFeature_=!0,r.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0;const s=e.map.getView().getProjection();let n=p.distance(E.fromUserCoordinate(r.getCenter(),s),E.fromUserCoordinate(t,s));const i=E.getUserProjection();if(i){const e=r.clone().transform(i,s);e.setRadius(n),n=e.transform(s,i).getRadius()}r.setRadius(n),this.changingFeature_=!1}}l&&this.setGeometryCoordinates_(r,l)}this.createOrUpdateVertexFeature_(t)}handleDownEvent(e){if(!this.condition_(e))return!1;const t=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,t),this.dragSegments_.length=0,this.modified_=!1;const s=this.vertexFeature_;if(s){const n=e.map.getView().getProjection(),i=[],o=s.getGeometry().getCoordinates(),r=m.boundingExtent([o]),l=this.rBush_.getInExtent(r),d={};l.sort(I);for(let s=0,r=l.length;s<r;++s){const r=l[s],u=r.segment;let c=C.getUid(r.geometry);const h=r.depth;if(h&&(c+="-"+h.join("-")),d[c]||(d[c]=new Array(2)),r.geometry.getType()!==a.default.CIRCLE||1!==r.index)if(!p.equals(u[0],o)||d[c][0])if(!p.equals(u[1],o)||d[c][1])C.getUid(u)in this.vertexSegments_&&!d[c][0]&&!d[c][1]&&this.insertVertexCondition_(e)&&i.push([r,o]);else{if((r.geometry.getType()===a.default.LINE_STRING||r.geometry.getType()===a.default.MULTI_LINE_STRING)&&d[c][0]&&0===d[c][0].index)continue;this.dragSegments_.push([r,1]),d[c][1]=r}else this.dragSegments_.push([r,0]),d[c][0]=r;else{const e=w(t,r,n);p.equals(e,o)&&!d[c][0]&&(this.dragSegments_.push([r,0]),d[c][0]=r)}}i.length&&this.willModifyFeatures_(e);for(let e=i.length-1;e>=0;--e)this.insertVertex_.apply(this,i[e])}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const s=this.dragSegments_[t][0],n=s.geometry;if(n.getType()===a.default.CIRCLE){const t=n.getCenter(),i=s.featureSegments[0],o=s.featureSegments[1];i.segment[0]=t,i.segment[1]=t,o.segment[0]=t,o.segment[1]=t,this.rBush_.update(m.createOrUpdateFromCoordinate(t),i);let r=n;const a=E.getUserProjection();if(a){const t=e.map.getView().getProjection();r=r.clone().transform(a,t),r=x.fromCircle(r).transform(t,a)}this.rBush_.update(r.getExtent(),o)}else this.rBush_.update(m.boundingExtent(s.segment),s)}return this.modified_&&(this.dispatchEvent(new O(P,this.features_,e)),this.modified_=!1),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)}handlePointerAtPixel_(e,t,s){const n=s||t.getCoordinateFromPixel(e),i=t.getView().getProjection(),o=function(e,t){return b(n,e,i)-b(n,t,i)},r=E.fromUserExtent(m.createOrUpdateFromCoordinate(n,T),i),l=t.getView().getResolution()*this.pixelTolerance_,d=E.toUserExtent(m.buffer(r,l,T),i),u=this.rBush_.getInExtent(d);if(u.length>0){u.sort(o);const s=u[0],r=s.segment;let l=w(n,s,i);const d=t.getPixelFromCoordinate(l);let c=p.distance(e,d);if(c<=this.pixelTolerance_){const e={};if(s.geometry.getType()===a.default.CIRCLE&&1===s.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(l);else{const s=t.getPixelFromCoordinate(r[0]),n=t.getPixelFromCoordinate(r[1]),i=p.squaredDistance(d,s),o=p.squaredDistance(d,n);c=Math.sqrt(Math.min(i,o)),this.snappedToVertex_=c<=this.pixelTolerance_,this.snappedToVertex_&&(l=i>o?r[1]:r[0]),this.createOrUpdateVertexFeature_(l);for(let t=1,s=u.length;t<s;++t){const s=u[t].segment;if(!(p.equals(r[0],s[0])&&p.equals(r[1],s[1])||p.equals(r[0],s[1])&&p.equals(r[1],s[0])))break;e[C.getUid(s)]=!0}}return e[C.getUid(r)]=!0,void(this.vertexSegments_=e)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const s=e.segment,n=e.feature,i=e.geometry,o=e.depth,r=e.index;let l;for(;t.length<i.getStride();)t.push(0);switch(i.getType()){case a.default.MULTI_LINE_STRING:case a.default.POLYGON:l=i.getCoordinates(),l[o[0]].splice(r+1,0,t);break;case a.default.MULTI_POLYGON:l=i.getCoordinates(),l[o[1]][o[0]].splice(r+1,0,t);break;case a.default.LINE_STRING:l=i.getCoordinates(),l.splice(r+1,0,t);break;default:return}this.setGeometryCoordinates_(i,l);const d=this.rBush_;d.remove(e),this.updateSegmentIndices_(i,r,o,1);const u={segment:[s[0],t],feature:n,geometry:i,depth:o,index:r};d.insert(m.boundingExtent(u.segment),u),this.dragSegments_.push([u,1]);const c={segment:[t,s[1]],feature:n,geometry:i,depth:o,index:r+1};d.insert(m.boundingExtent(c.segment),c),this.dragSegments_.push([c,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=l.default.POINTERDRAG){const e=this.lastPointerEvent_;this.willModifyFeatures_(e);const t=this.removeVertex_();return this.dispatchEvent(new O(P,this.features_,e)),this.modified_=!1,t}return!1}removeVertex_(){const e=this.dragSegments_,t={};let s,n,i,o,r,l,d,u,c,h,f,_=!1;for(r=e.length-1;r>=0;--r)i=e[r],h=i[0],f=C.getUid(h.feature),h.depth&&(f+="-"+h.depth.join("-")),f in t||(t[f]={}),0===i[1]?(t[f].right=h,t[f].index=h.index):1==i[1]&&(t[f].left=h,t[f].index=h.index+1);for(f in t){switch(c=t[f].right,d=t[f].left,l=t[f].index,u=l-1,h=void 0!==d?d:c,u<0&&(u=0),o=h.geometry,n=o.getCoordinates(),s=n,_=!1,o.getType()){case a.default.MULTI_LINE_STRING:n[h.depth[0]].length>2&&(n[h.depth[0]].splice(l,1),_=!0);break;case a.default.LINE_STRING:n.length>2&&(n.splice(l,1),_=!0);break;case a.default.MULTI_POLYGON:s=s[h.depth[1]];case a.default.POLYGON:s=s[h.depth[0]],s.length>4&&(l==s.length-1&&(l=0),s.splice(l,1),_=!0,0===l&&(s.pop(),s.push(s[0]),u=s.length-1))}if(_){this.setGeometryCoordinates_(o,n);const t=[];if(void 0!==d&&(this.rBush_.remove(d),t.push(d.segment[0])),void 0!==c&&(this.rBush_.remove(c),t.push(c.segment[1])),void 0!==d&&void 0!==c){const e={depth:h.depth,feature:h.feature,geometry:h.geometry,index:u,segment:t};this.rBush_.insert(m.boundingExtent(e.segment),e)}this.updateSegmentIndices_(o,l,h.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return _}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,s,n){this.rBush_.forEachInExtent(e.getExtent(),(function(i){i.geometry===e&&(void 0===s||void 0===i.depth||v.equals(i.depth,s))&&i.index>t&&(i.index+=n)}))}}function I(e,t){return e.index-t.index}function b(e,t,s){const n=t.geometry;if(n.getType()===a.default.CIRCLE){let i=n;if(1===t.index){const t=E.getUserProjection();t&&(i=i.clone().transform(t,s));const n=p.squaredDistance(i.getCenter(),E.fromUserCoordinate(e,s)),o=Math.sqrt(n)-i.getRadius();return o*o}}const i=E.fromUserCoordinate(e,s);return S[0]=E.fromUserCoordinate(t.segment[0],s),S[1]=E.fromUserCoordinate(t.segment[1],s),p.squaredDistanceToSegment(i,S)}function w(e,t,s){const n=t.geometry;if(n.getType()===a.default.CIRCLE&&1===t.index){let t=n;const i=E.getUserProjection();return i&&(t=t.clone().transform(i,s)),E.toUserCoordinate(t.getClosestPoint(E.fromUserCoordinate(e,s)),s)}const i=E.fromUserCoordinate(e,s);return S[0]=E.fromUserCoordinate(t.segment[0],s),S[1]=E.fromUserCoordinate(t.segment[1],s),E.toUserCoordinate(p.closestOnSegment(i,S),s)}function L(){const e=y.createEditingStyle();return function(t,s){return e[a.default.POINT]}}t.default=R})),define("node_modules/ol/src/interaction/Select",["require","exports","node_modules/ol/src/Collection","node_modules/ol/src/CollectionEventType","node_modules/ol/src/events/Event","node_modules/ol/src/geom/GeometryType","node_modules/ol/src/interaction/Interaction","node_modules/ol/src/functions","node_modules/ol/src/obj","node_modules/ol/src/style/Style","node_modules/ol/src/array","node_modules/ol/src/util","node_modules/ol/src/events/condition"],(function(e,t,s,n,i,o,r,a,l,d,u,c,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const f="select";class _ extends i.default{constructor(e,t,s,n){super(e),this.selected=t,this.deselected=s,this.mapBrowserEvent=n}}const g={};class m extends r.default{constructor(e){super();const t=e||{};let n;if(this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=t.condition?t.condition:h.singleClick,this.addCondition_=t.addCondition?t.addCondition:h.never,this.removeCondition_=t.removeCondition?t.removeCondition:h.never,this.toggleCondition_=t.toggleCondition?t.toggleCondition:h.shiftKeyOnly,this.multi_=!!t.multi&&t.multi,this.filter_=t.filter?t.filter:a.TRUE,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.style_=void 0!==t.style?t.style:function(){const e=d.createEditingStyle();return u.extend(e[o.default.POLYGON],e[o.default.LINE_STRING]),u.extend(e[o.default.GEOMETRY_COLLECTION],e[o.default.LINE_STRING]),function(t){return t.getGeometry()?e[t.getGeometry().getType()]:null}}(),this.features_=t.features||new s.default,t.layers)if("function"==typeof t.layers)n=t.layers;else{const e=t.layers;n=function(t){return u.includes(e,t)}}else n=a.TRUE;this.layerFilter_=n,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[c.getUid(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[c.getUid(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(n.default.ADD,this.boundAddFeature_),this.features_.addEventListener(n.default.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(n.default.ADD,this.boundAddFeature_),this.features_.removeEventListener(n.default.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const t=e.element;this.style_&&this.applySelectedStyle_(t)}removeFeature_(e){const t=e.element;this.style_&&this.restorePreviousStyle_(t)}getStyle(){return this.style_}applySelectedStyle_(e){const t=c.getUid(e);t in g||(g[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=c.getUid(e),s=this.getMap().getInteractions().getArray().filter((function(t){return t instanceof m&&t.getStyle()&&-1!==t.getFeatures().getArray().indexOf(e)}));s.length>0?e.setStyle(s[s.length-1].getStyle()):(e.setStyle(g[t]),delete g[t])}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[c.getUid(e)]}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),s=this.removeCondition_(e),n=this.toggleCondition_(e),i=!t&&!s&&!n,o=e.map,r=this.getFeatures(),a=[],d=[];if(i){l.clear(this.featureLayerAssociation_),o.forEachFeatureAtPixel(e.pixel,function(e,t){if(this.filter_(e,t))return d.push(e),this.addFeatureLayerAssociation_(e,t),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let e=r.getLength()-1;e>=0;--e){const t=r.item(e),s=d.indexOf(t);s>-1?d.splice(s,1):(r.remove(t),a.push(t))}0!==d.length&&r.extend(d)}else{o.forEachFeatureAtPixel(e.pixel,function(e,i){if(this.filter_(e,i))return!t&&!n||u.includes(r.getArray(),e)?(s||n)&&u.includes(r.getArray(),e)&&(a.push(e),this.removeFeatureLayerAssociation_(e)):(d.push(e),this.addFeatureLayerAssociation_(e,i)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let e=a.length-1;e>=0;--e)r.remove(a[e]);r.extend(d)}return(d.length>0||a.length>0)&&this.dispatchEvent(new _(f,d,a,e)),!0}}t.default=m})),define("node_modules/ol/src/interaction/Snap",["require","exports","node_modules/ol/src/CollectionEventType","node_modules/ol/src/events/EventType","node_modules/ol/src/geom/GeometryType","node_modules/ol/src/interaction/Pointer","node_modules/ol/src/structs/RBush","node_modules/ol/src/source/VectorEventType","node_modules/ol/src/functions","node_modules/ol/src/extent","node_modules/ol/src/coordinate","node_modules/ol/src/geom/Polygon","node_modules/ol/src/proj","node_modules/ol/src/util","node_modules/ol/src/obj","node_modules/ol/src/events"],(function(e,t,s,n,i,o,r,a,l,d,u,c,h,f,_,g){"use strict";function m(e){return e.feature?e.feature:e.element?e.element:void 0}Object.defineProperty(t,"__esModule",{value:!0});const p=[];class y extends o.default{constructor(e){const t=e||{},s=t;s.handleDownEvent||(s.handleDownEvent=l.TRUE),s.stopDown||(s.stopDown=l.FALSE),super(s),this.source_=t.source?t.source:null,this.vertex_=void 0===t.vertex||t.vertex,this.edge_=void 0===t.edge||t.edge,this.features_=t.features?t.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.rBush_=new r.default,this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this)}}addFeature(e,t){const s=void 0===t||t,i=f.getUid(e),o=e.getGeometry();if(o){const t=this.SEGMENT_WRITERS_[o.getType()];t&&(this.indexedFeaturesExtents_[i]=o.getExtent(d.createEmpty()),t(e,o))}s&&(this.featureChangeListenerKeys_[i]=g.listen(e,n.default.CHANGE,this.handleFeatureChange_,this))}forEachFeatureAdd_(e){this.addFeature(e)}forEachFeatureRemove_(e){this.removeFeature(e)}getFeatures_(){let e;return this.features_?e=this.features_:this.source_&&(e=this.source_.getFeatures()),e}handleEvent(e){const t=this.snapTo(e.pixel,e.coordinate,e.map);return t.snapped&&(e.coordinate=t.vertex.slice(0,2),e.pixel=t.vertexPixel),super.handleEvent(e)}handleFeatureAdd_(e){const t=m(e);this.addFeature(t)}handleFeatureRemove_(e){const t=m(e);this.removeFeature(t)}handleFeatureChange_(e){const t=e.target;if(this.handlingDownUpSequence){const e=f.getUid(t);e in this.pendingFeatures_||(this.pendingFeatures_[e]=t)}else this.updateFeature_(t)}handleUpEvent(e){const t=_.getValues(this.pendingFeatures_);return t.length&&(t.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1}removeFeature(e,t){const s=void 0===t||t,n=f.getUid(e),i=this.indexedFeaturesExtents_[n];if(i){const t=this.rBush_,s=[];t.forEachInExtent(i,(function(t){e===t.feature&&s.push(t)}));for(let e=s.length-1;e>=0;--e)t.remove(s[e])}s&&(g.unlistenByKey(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])}setMap(e){const t=this.getMap(),n=this.featuresListenerKeys_,i=this.getFeatures_();t&&(n.forEach(g.unlistenByKey),n.length=0,i.forEach(this.forEachFeatureRemove_.bind(this))),super.setMap(e),e&&(this.features_?n.push(g.listen(this.features_,s.default.ADD,this.handleFeatureAdd_,this),g.listen(this.features_,s.default.REMOVE,this.handleFeatureRemove_,this)):this.source_&&n.push(g.listen(this.source_,a.default.ADDFEATURE,this.handleFeatureAdd_,this),g.listen(this.source_,a.default.REMOVEFEATURE,this.handleFeatureRemove_,this)),i.forEach(this.forEachFeatureAdd_.bind(this)))}snapTo(e,t,s){const n=s.getCoordinateFromPixel([e[0]-this.pixelTolerance_,e[1]+this.pixelTolerance_]),o=s.getCoordinateFromPixel([e[0]+this.pixelTolerance_,e[1]-this.pixelTolerance_]),r=d.boundingExtent([n,o]);let a=this.rBush_.getInExtent(r);this.vertex_&&!this.edge_&&(a=a.filter((function(e){return e.feature.getGeometry().getType()!==i.default.CIRCLE})));let l=!1,c=null,f=null;if(0===a.length)return{snapped:l,vertex:c,vertexPixel:f};const _=s.getView().getProjection(),g=h.fromUserCoordinate(t,_);let m,y=1/0;for(let e=0;e<a.length;++e){const t=a[e];p[0]=h.fromUserCoordinate(t.segment[0],_),p[1]=h.fromUserCoordinate(t.segment[1],_);const s=u.squaredDistanceToSegment(g,p);s<y&&(m=t,y=s)}const v=m.segment;if(this.vertex_&&!this.edge_){const t=s.getPixelFromCoordinate(v[0]),n=s.getPixelFromCoordinate(v[1]),i=u.squaredDistance(e,t),o=u.squaredDistance(e,n);Math.sqrt(Math.min(i,o))<=this.pixelTolerance_&&(l=!0,c=i>o?v[1]:v[0],f=s.getPixelFromCoordinate(c))}else if(this.edge_){const t=m.feature.getGeometry().getType()===i.default.CIRCLE;if(t){let e=m.feature.getGeometry();const t=h.getUserProjection();t&&(e=e.clone().transform(t,_)),c=h.toUserCoordinate(u.closestOnCircle(g,e),_)}else p[0]=h.fromUserCoordinate(v[0],_),p[1]=h.fromUserCoordinate(v[1],_),c=h.toUserCoordinate(u.closestOnSegment(g,p),_);if(f=s.getPixelFromCoordinate(c),u.distance(e,f)<=this.pixelTolerance_&&(l=!0,this.vertex_&&!t)){const e=s.getPixelFromCoordinate(v[0]),t=s.getPixelFromCoordinate(v[1]),n=u.squaredDistance(f,e),i=u.squaredDistance(f,t);Math.sqrt(Math.min(n,i))<=this.pixelTolerance_&&(c=n>i?v[1]:v[0],f=s.getPixelFromCoordinate(c))}}return l&&(f=[Math.round(f[0]),Math.round(f[1])]),{snapped:l,vertex:c,vertexPixel:f}}updateFeature_(e){this.removeFeature(e,!1),this.addFeature(e,!1)}writeCircleGeometry_(e,t){const s=this.getMap().getView().getProjection();let n=t;const i=h.getUserProjection();i&&(n=n.clone().transform(i,s));const o=c.fromCircle(n);i&&o.transform(s,i);const r=o.getCoordinates()[0];for(let t=0,s=r.length-1;t<s;++t){const s=r.slice(t,t+2),n={feature:e,segment:s};this.rBush_.insert(d.boundingExtent(s),n)}}writeGeometryCollectionGeometry_(e,t){const s=t.getGeometriesArray();for(let t=0;t<s.length;++t){const n=this.SEGMENT_WRITERS_[s[t].getType()];n&&n(e,s[t])}}writeLineStringGeometry_(e,t){const s=t.getCoordinates();for(let t=0,n=s.length-1;t<n;++t){const n=s.slice(t,t+2),i={feature:e,segment:n};this.rBush_.insert(d.boundingExtent(n),i)}}writeMultiLineStringGeometry_(e,t){const s=t.getCoordinates();for(let t=0,n=s.length;t<n;++t){const n=s[t];for(let t=0,s=n.length-1;t<s;++t){const s=n.slice(t,t+2),i={feature:e,segment:s};this.rBush_.insert(d.boundingExtent(s),i)}}}writeMultiPointGeometry_(e,t){const s=t.getCoordinates();for(let n=0,i=s.length;n<i;++n){const i=s[n],o={feature:e,segment:[i,i]};this.rBush_.insert(t.getExtent(),o)}}writeMultiPolygonGeometry_(e,t){const s=t.getCoordinates();for(let t=0,n=s.length;t<n;++t){const n=s[t];for(let t=0,s=n.length;t<s;++t){const s=n[t];for(let t=0,n=s.length-1;t<n;++t){const n=s.slice(t,t+2),i={feature:e,segment:n};this.rBush_.insert(d.boundingExtent(n),i)}}}}writePointGeometry_(e,t){const s=t.getCoordinates(),n={feature:e,segment:[s,s]};this.rBush_.insert(t.getExtent(),n)}writePolygonGeometry_(e,t){const s=t.getCoordinates();for(let t=0,n=s.length;t<n;++t){const n=s[t];for(let t=0,s=n.length-1;t<s;++t){const s=n.slice(t,t+2),i={feature:e,segment:s};this.rBush_.insert(d.boundingExtent(s),i)}}}}t.default=y})),define("node_modules/ol/src/interaction/Translate",["require","exports","node_modules/ol/src/Collection","node_modules/ol/src/events/Event","node_modules/ol/src/interaction/Property","node_modules/ol/src/interaction/Pointer","node_modules/ol/src/functions","node_modules/ol/src/Object","node_modules/ol/src/array"],(function(e,t,s,n,i,o,r,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslateEvent=void 0;const d="translatestart",u="translating",c="translateend";class h extends n.default{constructor(e,t,s,n,i){super(e),this.features=t,this.coordinate=s,this.startCoordinate=n,this.mapBrowserEvent=i}}t.TranslateEvent=h;class f extends o.default{constructor(e){const t=e||{};let s;if(super(t),this.lastCoordinate_=null,this.startCoordinate_=null,this.features_=void 0!==t.features?t.features:null,t.layers)if("function"==typeof t.layers)s=t.layers;else{const e=t.layers;s=function(t){return l.includes(e,t)}}else s=r.TRUE;this.layerFilter_=s,this.filter_=t.filter?t.filter:r.TRUE,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.lastFeature_=null,this.addEventListener(a.getChangeEventType(i.default.ACTIVE),this.handleActiveChanged_)}handleDownEvent(e){if(this.lastFeature_=this.featuresAtPixel_(e.pixel,e.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=e.coordinate,this.lastCoordinate_=e.coordinate,this.handleMoveEvent(e);const t=this.features_||new s.default([this.lastFeature_]);return this.dispatchEvent(new h(d,t,e.coordinate,this.startCoordinate_,e)),!0}return!1}handleUpEvent(e){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(e);const t=this.features_||new s.default([this.lastFeature_]);return this.dispatchEvent(new h(c,t,e.coordinate,this.startCoordinate_,e)),this.startCoordinate_=null,!0}return!1}handleDragEvent(e){if(this.lastCoordinate_){const t=e.coordinate,n=t[0]-this.lastCoordinate_[0],i=t[1]-this.lastCoordinate_[1],o=this.features_||new s.default([this.lastFeature_]);o.forEach((function(e){const t=e.getGeometry();t.translate(n,i),e.setGeometry(t)})),this.lastCoordinate_=t,this.dispatchEvent(new h(u,o,t,this.startCoordinate_,e))}}handleMoveEvent(e){const t=e.map.getViewport();this.featuresAtPixel_(e.pixel,e.map)?(t.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),t.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):t.classList.remove("ol-grab","ol-grabbing")}featuresAtPixel_(e,t){return t.forEachFeatureAtPixel(e,function(e,t){if(this.filter_(e,t)&&(!this.features_||l.includes(this.features_.getArray(),e)))return e}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})}getHitTolerance(){return this.hitTolerance_}setHitTolerance(e){this.hitTolerance_=e}setMap(e){const t=this.getMap();super.setMap(e),this.updateState_(t)}handleActiveChanged_(){this.updateState_(null)}updateState_(e){let t=this.getMap();const s=this.getActive();if((!t||!s)&&(t=t||e,t)){t.getViewport().classList.remove("ol-grab","ol-grabbing")}}}t.default=f})),define("node_modules/ol/src/interaction",["require","exports","node_modules/ol/src/Collection","node_modules/ol/src/interaction/DoubleClickZoom","node_modules/ol/src/interaction/DragPan","node_modules/ol/src/interaction/DragRotate","node_modules/ol/src/interaction/DragZoom","node_modules/ol/src/interaction/KeyboardPan","node_modules/ol/src/interaction/KeyboardZoom","node_modules/ol/src/Kinetic","node_modules/ol/src/interaction/MouseWheelZoom","node_modules/ol/src/interaction/PinchRotate","node_modules/ol/src/interaction/PinchZoom","node_modules/ol/src/interaction/DoubleClickZoom","node_modules/ol/src/interaction/DragAndDrop","node_modules/ol/src/interaction/DragBox","node_modules/ol/src/interaction/DragPan","node_modules/ol/src/interaction/DragRotate","node_modules/ol/src/interaction/DragRotateAndZoom","node_modules/ol/src/interaction/DragZoom","node_modules/ol/src/interaction/Draw","node_modules/ol/src/interaction/Extent","node_modules/ol/src/interaction/Interaction","node_modules/ol/src/interaction/KeyboardPan","node_modules/ol/src/interaction/KeyboardZoom","node_modules/ol/src/interaction/Modify","node_modules/ol/src/interaction/MouseWheelZoom","node_modules/ol/src/interaction/PinchRotate","node_modules/ol/src/interaction/PinchZoom","node_modules/ol/src/interaction/Pointer","node_modules/ol/src/interaction/Select","node_modules/ol/src/interaction/Snap","node_modules/ol/src/interaction/Translate"],(function(e,t,s,n,i,o,r,a,l,d,u,c,h,f,_,g,m,p,y,v,x,E,C,T,S,M,P,O,R,I,b,w,L){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=t.Translate=t.Snap=t.Select=t.Pointer=t.PinchZoom=t.PinchRotate=t.MouseWheelZoom=t.Modify=t.KeyboardZoom=t.KeyboardPan=t.Interaction=t.Extent=t.Draw=t.DragZoom=t.DragRotateAndZoom=t.DragRotate=t.DragPan=t.DragBox=t.DragAndDrop=t.DoubleClickZoom=void 0,Object.defineProperty(t,"DoubleClickZoom",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"DragAndDrop",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(t,"DragBox",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"DragPan",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"DragRotate",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"DragRotateAndZoom",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"DragZoom",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"Draw",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(t,"Extent",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(t,"Interaction",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(t,"KeyboardPan",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(t,"KeyboardZoom",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(t,"Modify",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(t,"MouseWheelZoom",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(t,"PinchRotate",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(t,"PinchZoom",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(t,"Pointer",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(t,"Select",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"Snap",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"Translate",{enumerable:!0,get:function(){return L.default}}),t.defaults=function(e){const t=e||{},f=new s.default,_=new d.default(-.005,.05,100);return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&f.push(new o.default),(void 0===t.doubleClickZoom||t.doubleClickZoom)&&f.push(new n.default({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&&f.push(new i.default({onFocusOnly:t.onFocusOnly,kinetic:_})),(void 0===t.pinchRotate||t.pinchRotate)&&f.push(new c.default),(void 0===t.pinchZoom||t.pinchZoom)&&f.push(new h.default({duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&&(f.push(new a.default),f.push(new l.default({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&f.push(new u.default({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&&f.push(new r.default({duration:t.zoomDuration})),f}})),define("node_modules/ol/src/Map",["require","exports","node_modules/ol/src/renderer/Composite","node_modules/ol/src/PluggableMap","node_modules/ol/src/obj","node_modules/ol/src/control","node_modules/ol/src/interaction"],(function(e,t,s,n,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class a extends n.default{constructor(e){(e=i.assign({},e)).controls||(e.controls=o.defaults()),e.interactions||(e.interactions=r.defaults({onFocusOnly:!0})),super(e)}createRenderer(){return new s.default(this)}}t.default=a})),define("poc/fun/createStyleFactory",["require","exports","node_modules/ol/src/style","node_modules/ol/src/style/Circle"],(function(e,t,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createStyleFactory=void 0;const i=e=>e,o="rgba(0, 48, 109, 0.5)",r="rgba(232, 230, 227, 0.3)",a=2,l="rgba(232, 230, 227, 1)",d="rgba(0, 0, 0, 1)",u=1,c=.75,h=5,f=1,_=e=>Math.pow(2,Math.ceil(Math.log10(e))),g=24,m="rgba(255, 0, 0, 0)",p="rgba(255, 0, 0, 1)",y=.4,v=1,x="rgba(255, 0, 0, 1)",E="rgba(0, 0, 0, 1)",C=.4;t.createStyleFactory=function(){const e=e=>new s.Text({text:e,stroke:new s.Stroke({color:d,width:u}),scale:c,fill:new s.Fill({color:l})});return(t,l)=>{const{tileIdentifier:d,text:u,mass:c,density:T,visible:S,type:M}=t.getProperties();if(!d)return;if(!S)return;const P=[];switch(M){case"cluster":{const t=new s.Style({image:(O=c,new n.default({radius:h+f*(_||i)(O),fill:new s.Fill({color:o}),stroke:new s.Stroke({color:r,width:a})})),text:e(u)});P.push(t);break}case"err":{const t=new s.Style({image:new n.default({radius:g,fill:new s.Fill({color:m}),stroke:new s.Stroke({color:p,width:y})}),text:e(u)});P.push(t);break}case"feature":default:{const e=new s.Style({fill:new s.Fill({color:"white"}),stroke:new s.Stroke({color:"black"})});P.push(new s.Style({image:new n.default({radius:v,fill:new s.Fill({color:x}),stroke:new s.Stroke({color:E,width:C})})})),P.push(e)}}var O;return P}}})),define("poc/AgsClusterLayer",["require","exports","node_modules/ol/src/layer/Vector","poc/AgsClusterSource","poc/fun/createStyleFactory"],(function(e,t,s,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AgsClusterLayer=void 0;class o extends s.default{constructor(e){super();const{url:t,tileSize:s,minRecordCount:o,treeTileState:r}=e,a=new n.AgsClusterSource({tileSize:s,url:t,minRecordCount:o,treeTileState:r});this.setStyle(i.createStyleFactory()),this.setSource(a)}}t.AgsClusterLayer=o})),define("poc/fun/debounce",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=void 0,t.debounce=function(e,t=20){let s=0;return(...n)=>{clearTimeout(s),s=setTimeout(()=>e(...n),t)}}})),define("poc/test/data/treetilestate",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.treeTileState=void 0,t.treeTileState={extent:[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244],data:[[13,38,6,0,0,0],[13,39,6,267,0,0],[13,40,6,0,0,0],[14,38,6,0,0,0],[14,39,6,6364,0,0],[14,40,6,0,0,0],[15,38,6,0,0,0],[15,39,6,306,0,0],[15,40,6,0,0,0],[26,78,7,0,0,0],[26,79,7,0,0,0],[27,78,7,202,0,0],[27,79,7,66,0,0],[27,80,7,0,0,0],[28,78,7,3114,0,0],[28,79,7,1608,0,0],[28,80,7,1,0,0],[29,78,7,1652,0,0],[29,79,7,51,0,0],[29,80,7,0,0,0],[30,78,7,213,0,0],[30,79,7,101,0,0],[31,78,7,1,0,0],[31,79,7,0,0,0],[54,156,8,0,0,0],[54,157,8,0,0,0],[55,156,8,155,0,0],[55,157,8,49,0,0],[56,156,8,315,0,0],[56,157,8,812,0,0],[56,158,8,590,0,0],[56,159,8,49,0,0],[57,156,8,576,0,0],[57,157,8,1447,0,0],[57,158,8,982,0,0],[57,159,8,8,0,0],[58,156,8,515,0,0],[58,157,8,472,0,0],[59,156,8,423,0,0],[59,157,8,292,0,0],[60,156,8,92,0,0],[60,157,8,126,0,0],[60,158,8,101,0,0],[60,159,8,1,0,0],[61,156,8,0,0,0],[61,157,8,0,0,0],[61,158,8,0,0,0],[61,159,8,0,0,0],[110,312,9,8,0,0],[110,313,9,13,0,0],[111,312,9,51,0,0],[111,313,9,1,0,0],[112,312,9,56,0,0],[112,313,9,164,-14676,91317],[112,314,9,102,172335,364580],[112,315,9,176,344099,122576],[112,316,9,160,77456,79495],[112,317,9,63,0,0],[113,312,9,39,0,0],[113,313,9,79,0,0],[113,314,9,86,0,0],[113,315,9,471,207175,134701],[113,316,9,1,0,0],[113,317,9,131,335950,-117127],[114,312,9,43,0,0],[114,313,9,198,309609,180883],[114,314,9,185,288943,261200],[114,315,9,384,222394,276294],[114,316,9,595,46925,76958],[114,317,9,219,-75525,-130453],[115,312,9,48,0,0],[115,313,9,312,44529,273449],[115,314,9,468,0,0],[115,315,9,442,7492,117168],[115,316,9,189,-120947,-77682],[115,317,9,2,0,0],[116,312,9,49,0,0],[116,313,9,1,0,0],[116,314,9,144,70080,86463],[116,315,9,124,-15530,40378],[117,312,9,87,0,0],[117,313,9,197,256198,127897],[117,314,9,126,257676,-48435],[117,315,9,93,0,0],[118,312,9,77,0,0],[118,313,9,240,161466,125585],[118,314,9,103,229111,-42282],[118,315,9,45,0,0],[119,312,9,16,0,0],[119,313,9,119,-49550,222553],[119,314,9,141,-11932,-31022],[119,315,9,22,0,0],[120,314,9,59,0,0],[120,315,9,41,0,0],[120,316,9,72,0,0],[120,317,9,12,0,0],[121,314,9,27,0,0],[121,315,9,16,0,0],[121,316,9,27,0,0],[121,317,9,1,0,0],[224,626,10,60,0,0],[224,627,10,37,0,0],[224,628,10,32,0,0],[224,629,10,44,0,0],[224,630,10,28,0,0],[224,631,10,5,0,0],[224,632,10,34,0,0],[224,633,10,44,0,0],[225,626,10,57,0,0],[225,627,10,33,0,0],[225,628,10,21,0,0],[225,629,10,12,0,0],[225,630,10,61,0,0],[225,631,10,91,0,0],[225,632,10,43,0,0],[225,633,10,51,0,0],[226,630,10,87,0,0],[226,631,10,181,72284,-15333],[226,634,10,20,0,0],[226,635,10,38,0,0],[227,630,10,123,55491,82506],[227,631,10,101,62491,53654],[227,634,10,62,0,0],[227,635,10,1,0,0],[228,626,10,48,0,0],[228,627,10,41,0,0],[228,628,10,39,0,0],[228,629,10,70,0,0],[228,630,10,101,14925,-23216],[228,631,10,1,0,0],[228,632,10,189,72024,61182],[228,633,10,148,-9101,110733],[228,634,10,141,7624,-26683],[228,635,10,17,0,0],[229,626,10,61,0,0],[229,627,10,57,0,0],[229,628,10,1,0,0],[229,629,10,34,0,0],[229,630,10,50,0,0],[229,631,10,1,0,0],[229,632,10,145,85660,-12585],[229,633,10,1,0,0],[229,634,10,49,0,0],[229,635,10,21,0,0],[230,626,10,71,0,0],[230,627,10,91,0,0],[230,628,10,120,142777,106372],[230,629,10,128,139850,103367],[230,630,10,120,120418,70871],[230,631,10,119,-2434,80316],[230,632,10,109,-21133,-783],[230,633,10,52,0,0],[231,626,10,90,0,0],[231,627,10,87,0,0],[231,628,10,124,-36507,99786],[231,629,10,133,-24243,106498],[231,630,10,149,-13652,12514],[231,631,10,92,0,0],[231,632,10,30,0,0],[231,633,10,8,0,0],[232,628,10,41,0,0],[232,629,10,65,0,0],[232,630,10,1,0,0],[232,631,10,33,0,0],[233,628,10,32,0,0],[233,629,10,14,0,0],[233,630,10,24,0,0],[233,631,10,5,0,0],[234,626,10,63,0,0],[234,627,10,37,0,0],[234,628,10,12,0,0],[234,629,10,26,0,0],[235,626,10,61,0,0],[235,627,10,53,0,0],[235,628,10,72,0,0],[235,629,10,22,0,0],[236,626,10,86,0,0],[236,627,10,59,0,0],[236,628,10,42,0,0],[236,629,10,28,0,0],[237,626,10,64,0,0],[237,627,10,45,0,0],[237,628,10,27,0,0],[237,629,10,15,0,0],[238,626,10,55,0,0],[238,627,10,39,0,0],[238,628,10,52,0,0],[238,629,10,35,0,0],[239,626,10,24,0,0],[239,627,10,20,0,0],[239,628,10,43,0,0],[239,629,10,34,0,0],[452,1262,11,58,0,0],[452,1263,11,47,0,0],[453,1262,11,51,0,0],[453,1263,11,42,0,0],[454,1260,11,27,0,0],[454,1261,11,35,0,0],[454,1262,11,46,0,0],[454,1263,11,24,0,0],[455,1260,11,40,0,0],[455,1261,11,39,0,0],[455,1262,11,31,0,0],[455,1263,11,12,0,0],[456,1260,11,31,0,0],[456,1261,11,19,0,0],[456,1264,11,42,0,0],[456,1265,11,44,0,0],[456,1266,11,55,0,0],[456,1267,11,45,0,0],[456,1268,11,41,0,0],[456,1269,11,30,0,0],[457,1260,11,42,0,0],[457,1261,11,26,0,0],[457,1264,11,68,0,0],[457,1265,11,53,0,0],[457,1266,11,26,0,0],[457,1267,11,34,0,0],[457,1268,11,57,0,0],[457,1269,11,26,0,0],[458,1264,11,42,0,0],[458,1265,11,49,0,0],[459,1264,11,50,0,0],[459,1265,11,24,0,0],[460,1256,11,20,0,0],[460,1257,11,17,0,0],[460,1258,11,22,0,0],[460,1259,11,18,0,0],[460,1260,11,25,0,0],[460,1261,11,14,0,0],[460,1262,11,23,0,0],[460,1263,11,36,0,0],[460,1264,11,44,0,0],[460,1265,11,32,0,0],[461,1256,11,44,0,0],[461,1257,11,56,0,0],[461,1258,11,47,0,0],[461,1259,11,53,0,0],[461,1260,11,48,0,0],[461,1261,11,46,0,0],[461,1262,11,58,0,0],[461,1263,11,21,0,0],[461,1264,11,19,0,0],[461,1265,11,30,0,0],[462,1256,11,35,0,0],[462,1257,11,58,0,0],[462,1258,11,45,0,0],[462,1259,11,45,0,0],[462,1260,11,51,0,0],[462,1261,11,47,0,0],[463,1256,11,28,0,0],[463,1257,11,15,0,0],[463,1258,11,20,0,0],[463,1259,11,41,0,0],[463,1260,11,24,0,0],[463,1261,11,50,0,0]]}})),define("poc/test/ux/map-test",["require","exports","mocha","node_modules/ol/src/extent","node_modules/ol/src/Map","node_modules/ol/src/View","poc/AgsClusterLayer","poc/fun/debounce","poc/TileTreeTersifier","poc/test/data/treetilestate"],(function(e,t,s,n,i,o,r,a,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.describe("UI Labs",()=>{s.it("renders cluster layer on a map and continually cycles through the zoom levels",()=>{const e=new o.default({center:n.getCenter([-11114555,4696291,-10958012,4852834]),minZoom:3,maxZoom:9,zoom:6}),t=document.createElement("div");t.className="testmapcontainer";const s=document.createElement("div");s.className="map",document.body.appendChild(t),t.appendChild(s);const l=[new r.AgsClusterLayer({url:"http://localhost:3002/mock/sampleserver3/arcgis/rest/services/Petroleum/KSFields/FeatureServer/0/query",tileSize:256,minRecordCount:100})],d=new i.default({view:e,target:s,layers:l});let u=1;const c=setInterval(()=>{const t=e.getZoom()||0;e.setZoom(t+u),t===e.getMaxZoom()&&(u=-1),t===e.getMinZoom()&&(u=1)},2e3),h=a.debounce(()=>{clearInterval(c),t.remove(),d.dispose()},3e4);e.on("change:resolution",h),e.on("change:center",()=>{h(),clearInterval(c)}),e.on("change:rotation",h),h()}),s.it("sets map state into pre-loaded data from data/treetilestate",()=>{const e=new o.default({center:n.getCenter([-11114555,4696291,-10958012,4852834]),minZoom:3,maxZoom:9,zoom:6}),t=document.createElement("div");t.className="testmapcontainer";const s=document.createElement("div");s.className="map",document.body.appendChild(t),t.appendChild(s);const a=new l.TileTreeTersifier,u=[new r.AgsClusterLayer({url:"http://localhost:3002/mock/sampleserver3/arcgis/rest/services/Petroleum/KSFields/FeatureServer/0/query",tileSize:256,minRecordCount:100,treeTileState:a.unstringify(JSON.stringify(d.treeTileState))})];new i.default({view:e,target:s,layers:u})})})})),define("poc/test/fun/showOnMap",["require","exports","node_modules/ol/src/Feature","node_modules/ol/src/extent","node_modules/ol/src/View","node_modules/ol/src/Map","node_modules/ol/src/layer/Vector","node_modules/ol/src/source/Vector","node_modules/ol/src/style","node_modules/ol/src/geom/Point","node_modules/ol/src/style/Circle","node_modules/ol/src/style/Text","node_modules/ol/src/control"],(function(e,t,s,n,i,o,r,a,l,d,u,c,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showOnMap=void 0;function f(e,t){const s=e.getProperties().Z-t;switch(e.getProperties().type){case"feature":return-3<=s&&s<=4;case"cluster":return 2<=s&&s<=2}return!0}t.showOnMap=function(e){const{helper:t}=e,_=t.tree.descendants().filter(e=>null!==t.getMass(e)),g=t.tree.asExtent(_[0]),m=g.slice();n.scaleFromCenter(m,n.getWidth(g)/4);const p=new i.default({center:n.getCenter(g),zoom:t.minZoom,minZoom:t.minZoom,maxZoom:t.maxZoom,extent:m}),y=document.createElement("div");y.className="testmapcontainer";const v=document.createElement("div");v.className="map",document.body.appendChild(y),y.appendChild(v);const x=new r.default,E=new a.default;x.setSource(E),t.tree.visit((e,s)=>{const n=t.getFeatures(s);return n?(E.addFeatures(n),console.log(n.map(e=>e.getProperties().Z).join(".")),n.length+e):e},0);const C={},T=new Map;x.setStyle((e,t)=>{const{Z:s,type:n,mass:i}=e.getProperties(),o=Math.round(p.getZoomForResolution(t)||0);if(!f(e,o))return null;return(({type:e,zoffset:t,mass:s})=>{const n=`${e}.${t}.${Math.floor(Math.pow(2,Math.floor(Math.log2(s))))}`;let i=C[n];if(!i){switch(e){case"cluster":i=new l.Style({image:new u.default({radius:64*Math.pow(2,-t)*.5,fill:new l.Fill({color:"rgba(255,255,255,0.05)"}),stroke:new l.Stroke({color:"rgba(0,0,0,0.05)",width:64*Math.pow(2,-t)*.5})}),text:new c.default({text:(s||"")+"",scale:.5,fill:new l.Fill({color:"rgba(255,255,255,0.8)"}),stroke:new l.Stroke({color:"rgba(0,0,0,0.8)",width:1})})});break;default:{const e=.8*Math.pow(Math.SQRT2,-Math.abs(t));i=new l.Style({fill:new l.Fill({color:`rgba(0,0,255,${e})`}),stroke:new l.Stroke({color:`rgba(255,255,255,${e})`,width:1})});break}}C[n]=i}switch(e){case"cluster":i.getText()&&i.getText().setText(s+"")}return i})({type:n,zoffset:s-o,mass:i})});{let e=!0;p.on("change:resolution",()=>{e=!0}),x.on("postrender",()=>{e&&(e=!1,M())})}const S=new o.default({view:p,target:v,layers:[x],controls:h.defaults().extend([new h.FullScreen])});return M(),S;function M(){const e=p.getZoom()||0;E.getFeatures().forEach(n=>{const{tileIdentifier:i}=n.getProperties();n.setProperties({visible:f(n,e)}),function(e,n){const i=t.centerOfMass(e).mass;let o=function(e,{X:t,Y:s,Z:n}){const i=`${t}.${s}.${n}`;return e.get(i)}(T,e);if(!o){o=new s.default,o.setProperties({type:"cluster",tileIdentifier:e,Z:e.Z,visible:!1}),function(e,{X:t,Y:s,Z:n},i){const o=`${t}.${s}.${n}`;e.set(o,i)}(T,e,o),E.addFeature(o);const n=t.tree.asCenter(e);o.setGeometry(new d.default(n))}o.setProperties({mass:i},!0)}(i)})}}})),define("poc/test/ux/show-on-map",["require","exports","mocha","chai","poc/AgsFeatureLoader","poc/TileTree","node_modules/ol/src/proj","poc/test/fun/showOnMap","poc/TileTreeExt"],(function(e,t,s,n,i,o,r,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.describe("showOnMap tests",()=>{s.it("renders a fully loaded tree with clusters via showOnMap (petroleum)",()=>__awaiter(void 0,void 0,void 0,(function*(){const e=r.get("EPSG:3857"),t=new o.TileTree({extent:e.getExtent()}),s=new l.TileTreeExt(t,{minZoom:6,maxZoom:18}),d=new i.AgsFeatureLoader({url:"http://localhost:3002/mock/sampleserver3/arcgis/rest/services/Petroleum/KSFields/FeatureServer/0/query",maxDepth:4,minRecordCount:100,tree:s}),u=t.parent({X:58,Y:156,Z:8}),c=yield d.loader(u,e);n.assert.equal(1617,c,"features"),a.showOnMap({helper:s})}))),s.it("renders a fully loaded tree with clusters via showOnMap (watershed)",()=>__awaiter(void 0,void 0,void 0,(function*(){const e=r.get("EPSG:3857"),t=new o.TileTree({extent:e.getExtent()}),s=new l.TileTreeExt(t,{minZoom:6,maxZoom:18}),d=new i.AgsFeatureLoader({url:"http://localhost:3002/mock/sampleserver3/arcgis/rest/services/Hydrography/Watershed173811/FeatureServer/1/query",maxDepth:4,minRecordCount:100,tree:s}),u=t.parent({X:58,Y:156,Z:8}),c=yield d.loader(u,e);n.assert.equal(5354,c,"features"),a.showOnMap({helper:s})}))),s.it("renders a fully loaded tree with clusters via showOnMap (earthquakes)",()=>__awaiter(void 0,void 0,void 0,(function*(){const e=r.get("EPSG:3857"),t=new o.TileTree({extent:e.getExtent()}),s=new l.TileTreeExt(t,{minZoom:6,maxZoom:18}),d=new i.AgsFeatureLoader({url:"http://localhost:3002/mock/sampleserver3/arcgis/rest/services/Earthquakes/EarthquakesFromLastSevenDays/FeatureServer/0/query",maxDepth:4,minRecordCount:100,tree:s}),u=yield d.loader({X:0,Y:0,Z:0},e);n.assert.equal(72,u,"features"),a.showOnMap({helper:s})})))})})),define("poc/test/index",["require","exports","poc/test/moment-test","poc/test/ags-feature-loader-test","poc/test/xyz-test","poc/test/treetile-test","poc/test/tiletreeext-test","poc/test/ux/map-test","poc/test/ux/show-on-map"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})),define("index",["require","exports","poc/test/index"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}));